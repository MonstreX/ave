var b=(f,t)=>()=>(t||f((t={exports:{}}).exports,t),t.exports);var l=b((A,a)=>{class d{constructor(t={}){this.subscribers=new Map,this.computedCache=new Map,this.computedDeps=new Map,this.state=this.createReactive(t,[])}createReactive(t,s=[]){return this.isObject(t)?Array.isArray(t)?this.createReactiveArray(t,s):new Proxy(t,{get:(r,i)=>{this.trackDependency(s.concat(i));const e=r[i];return this.isObject(e)?this.createReactive(e,s.concat(i)):e},set:(r,i,e)=>(r[i]===e||(r[i]=e,this.notify(s.concat(i))),!0),deleteProperty:(r,i)=>(i in r&&(delete r[i],this.notify(s.concat(i))),!0)}):t}createReactiveArray(t,s){const r=this,i=["push","pop","shift","unshift","splice","sort","reverse"];return new Proxy(t,{get(n,c){if(r.trackDependency(s.concat(c)),i.includes(c))return function(...u){const y=Array.prototype[c].apply(n,u);return r.notify(s),y};const o=n[c];return r.isObject(o)?r.createReactive(o,s.concat(c)):o},set(n,c,o){return n[c]===o||(n[c]=o,r.notify(s.concat(c))),!0},deleteProperty(n,c){return c in n&&(delete n[c],r.notify(s)),!0}})}watch(t,s=null){typeof t=="function"&&(s=t,t=[]);const r=Array.isArray(t)?t:t.split("."),i=this.pathToKey(r);return this.subscribers.has(i)||this.subscribers.set(i,new Set),this.subscribers.get(i).add(s),()=>{const e=this.subscribers.get(i);e&&e.delete(s)}}computed(t){const s=Symbol("computed");return()=>{if(this.computedCache.has(s))return this.computedCache.get(s);this.currentComputed=s;const r=t();return this.currentComputed=null,this.computedCache.set(s,r),r}}trackDependency(t){this.currentComputed&&(this.computedDeps.has(this.currentComputed)||this.computedDeps.set(this.currentComputed,new Set),this.computedDeps.get(this.currentComputed).add(this.pathToKey(t)))}notify(t){const s=this.pathToKey(t),r=this.subscribers.get(s);r&&r.forEach(e=>e(this.getByPath(t),t));for(let e=t.length-1;e>=0;e--){const n=t.slice(0,e),c=this.pathToKey(n),o=this.subscribers.get(c);o&&o.forEach(u=>u(this.getByPath(n),n))}const i=this.subscribers.get("");i&&i.forEach(e=>e(this.state,[])),this.invalidateComputed(s)}invalidateComputed(t){this.computedDeps.forEach((s,r)=>{s.has(t)&&this.computedCache.delete(r)})}getByPath(t){return t.reduce((s,r)=>s?.[r],this.state)}setByPath(t,s){if(t.length===0){this.state=this.createReactive(s,[]);return}const r=t[t.length-1],i=t.slice(0,-1).reduce((e,n)=>e[n],this.state);i&&(i[r]=s)}pathToKey(t){return Array.isArray(t)?t.join("."):t}isObject(t){return t!==null&&(typeof t=="object"||Array.isArray(t))}batch(t){this.batching=!0,this.batchedPaths=new Set,t(),this.batching=!1,this.batchedPaths.forEach(s=>{this.notify(s.split("."))}),this.batchedPaths.clear()}}class h{static create(t,s={},...r){const i=document.createElement(t);return Object.keys(s).forEach(e=>{if(e==="className")i.className=s[e];else if(e==="style"&&typeof s[e]=="object")Object.assign(i.style,s[e]);else if(e.startsWith("on")&&typeof s[e]=="function"){const n=e.substring(2).toLowerCase();i.addEventListener(n,s[e])}else e==="dataset"&&typeof s[e]=="object"?Object.assign(i.dataset,s[e]):i.setAttribute(e,s[e])}),r.flat(1/0).forEach(e=>{e!=null&&e!==!1&&(typeof e=="string"||typeof e=="number"?i.appendChild(document.createTextNode(e)):i.appendChild(e))}),i}static render(t,s){if(typeof t=="string"&&(t=document.querySelector(t)),!t){console.error("Container not found");return}t.innerHTML="",Array.isArray(s)?s.forEach(r=>t.appendChild(r)):t.appendChild(s)}static update(t,s){if(t.tagName!==s.tagName){t.replaceWith(s);return}Array.from(t.attributes).forEach(e=>{s.hasAttribute(e.name)||t.removeAttribute(e.name)}),Array.from(s.attributes).forEach(e=>{t.setAttribute(e.name,e.value)});const r=Array.from(t.childNodes),i=Array.from(s.childNodes);r.slice(i.length).forEach(e=>e.remove()),i.forEach((e,n)=>{if(n>=r.length)t.appendChild(e.cloneNode(!0));else{const c=r[n];c.nodeType===Node.TEXT_NODE&&e.nodeType===Node.TEXT_NODE?c.textContent!==e.textContent&&(c.textContent=e.textContent):c.nodeType===Node.ELEMENT_NODE&&e.nodeType===Node.ELEMENT_NODE?h.update(c,e):c.replaceWith(e.cloneNode(!0))}})}}typeof a<"u"&&a.exports?a.exports={Reactive:d,DOM:h}:(window.Reactive=d,window.DOM=h)});export default l();
