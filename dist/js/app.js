class ka{constructor(){this.listeners={}}on(e,i){typeof e=="string"&&(e=[e]),e.forEach(r=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)})}once(e,i){typeof e=="string"&&(e=[e]);const r=(...a)=>{i(...a),this.off(e,r)};this.on(e,r)}off(e,i){typeof e=="string"&&(e=[e]),e.forEach(r=>{this.listeners[r]&&(this.listeners[r]=this.listeners[r].filter(a=>a!==i))})}emit(e,i){this.listeners[e]&&this.listeners[e].forEach(r=>{try{r(i)}catch(a){console.error(`Error in event listener for '${e}':`,a)}})}listeners(e){return this.listeners[e]||[]}hasListeners(e){return(this.listeners[e]||[]).length>0}flush(e){e?this.listeners[e]=[]:this.listeners={}}}const Ve=new ka;/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Le(t){return getComputedStyle(t)}function me(t,e){for(var i in e){var r=e[i];typeof r=="number"&&(r=r+"px"),t.style[i]=r}return t}function Yt(t){var e=document.createElement("div");return e.className=t,e}var ar=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Be(t,e){if(!ar)throw new Error("No element matching method supported");return ar.call(t,e)}function rt(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function nr(t,e){return Array.prototype.filter.call(t.children,function(i){return Be(i,e)})}var ie={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},Yr={x:null,y:null};function Br(t,e){var i=t.element.classList,r=ie.state.scrolling(e);i.contains(r)?clearTimeout(Yr[e]):i.add(r)}function Hr(t,e){Yr[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(ie.state.scrolling(e))},t.settings.scrollingThreshold)}function Na(t,e){Br(t,e),Hr(t,e)}var Ot=function(e){this.element=e,this.handlers={}},Wr={isEmpty:{configurable:!0}};Ot.prototype.bind=function(e,i){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(i),this.element.addEventListener(e,i,!1)};Ot.prototype.unbind=function(e,i){var r=this;this.handlers[e]=this.handlers[e].filter(function(a){return i&&a!==i?!0:(r.element.removeEventListener(e,a,!1),!1)})};Ot.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};Wr.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(Ot.prototype,Wr);var ut=function(){this.eventElements=[]};ut.prototype.eventElement=function(e){var i=this.eventElements.filter(function(r){return r.element===e})[0];return i||(i=new Ot(e),this.eventElements.push(i)),i};ut.prototype.bind=function(e,i,r){this.eventElement(e).bind(i,r)};ut.prototype.unbind=function(e,i,r){var a=this.eventElement(e);a.unbind(i,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};ut.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};ut.prototype.once=function(e,i,r){var a=this.eventElement(e),n=function(o){a.unbind(i,n),r(o)};a.bind(i,n)};function Bt(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function Qt(t,e,i,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var n;if(e==="top")n=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")n=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Pa(t,i,n,r,a)}function Pa(t,e,i,r,a){var n=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=t.element;t.reach[l]=null,d[s]<1&&(t.reach[l]="start"),d[s]>t[n]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(Bt("ps-scroll-"+l)),e<0?d.dispatchEvent(Bt("ps-scroll-"+c)):e>0&&d.dispatchEvent(Bt("ps-scroll-"+u)),r&&Na(t,l)),t.reach[l]&&(e||a)&&d.dispatchEvent(Bt("ps-"+l+"-reach-"+t.reach[l]))}function Z(t){return parseInt(t,10)||0}function Ra(t){return Be(t,"input,[contenteditable]")||Be(t,"select,[contenteditable]")||Be(t,"textarea,[contenteditable]")||Be(t,"button,[contenteditable]")}function qa(t){var e=Le(t);return Z(e.width)+Z(e.paddingLeft)+Z(e.paddingRight)+Z(e.borderLeftWidth)+Z(e.borderRightWidth)}var tt={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Ne(t){var e=t.element,i=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.floor(r.width),t.containerHeight=Math.floor(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(nr(e,ie.element.rail("x")).forEach(function(a){return rt(a)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(nr(e,ie.element.rail("y")).forEach(function(a){return rt(a)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=or(t,Z(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=Z((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=or(t,Z(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=Z(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),Xa(e,t),t.scrollbarXActive?e.classList.add(ie.state.active("x")):(e.classList.remove(ie.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(ie.state.active("y")):(e.classList.remove(ie.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function or(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function Xa(t,e){var i={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:i.left=t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-r:i.top=e.scrollbarXTop+r,me(e.scrollbarXRail,i);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,me(e.scrollbarYRail,a),me(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),me(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function Ya(t){t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=i>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,Ne(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=i>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,Ne(t),e.stopPropagation()})}var Ht=null;function Ba(t){sr(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),sr(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function sr(t,e){var i=e[0],r=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=t.element,h=null,m=null,p=null;function g(E){E.touches&&E.touches[0]&&(E[a]=E.touches[0]["page"+c.toUpperCase()]),Ht===o&&(d[l]=h+p*(E[a]-m),Br(t,c),Ne(t),E.stopPropagation(),E.preventDefault())}function v(){Hr(t,c),t[u].classList.remove(ie.state.clicking),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",v),Ht=null}function w(E){Ht===null&&(Ht=o,h=d[l],E.touches&&(E[a]=E.touches[0]["page"+c.toUpperCase()]),m=E[a],p=(t[r]-t[i])/(t[n]-t[s]),E.touches?(document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",v)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",v)),t[u].classList.add(ie.state.clicking)),E.stopPropagation(),E.cancelable&&E.preventDefault()}t[o].addEventListener("mousedown",w),t[o].addEventListener("touchstart",w)}function Ha(t){var e=t.element,i=function(){return Be(e,":hover")},r=function(){return Be(t.scrollbarX,":focus")||Be(t.scrollbarY,":focus")};function a(n,o){var s=Math.floor(e.scrollTop);if(n===0){if(!t.scrollbarYActive)return!1;if(s===0&&o>0||s>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(l===0&&n<0||l>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&!(!i()&&!r())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(Ra(o))return}var s=0,l=0;switch(n.which){case 37:n.metaKey?s=-t.contentWidth:n.altKey?s=-t.containerWidth:s=-30;break;case 38:n.metaKey?l=t.contentHeight:n.altKey?l=t.containerHeight:l=30;break;case 39:n.metaKey?s=t.contentWidth:n.altKey?s=t.containerWidth:s=30;break;case 40:n.metaKey?l=-t.contentHeight:n.altKey?l=-t.containerHeight:l=-30;break;case 32:n.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&s!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=s,Ne(t),a(s,l)&&n.preventDefault())}})}function Wa(t){var e=t.element;function i(o,s){var l=Math.floor(e.scrollTop),c=e.scrollTop===0,u=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,h=e.scrollLeft+e.offsetWidth===e.scrollWidth,m;return Math.abs(s)>Math.abs(o)?m=c||u:m=d||h,m?!t.settings.wheelPropagation:!0}function r(o){var s=o.deltaX,l=-1*o.deltaY;return(typeof s>"u"||typeof l>"u")&&(s=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(s*=10,l*=10),s!==s&&l!==l&&(s=0,l=o.wheelDelta),o.shiftKey?[-l,-s]:[s,l]}function a(o,s,l){if(!tt.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var c=o;c&&c!==e;){if(c.classList.contains(ie.element.consuming))return!0;var u=Le(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(s&&u.overflowX.match(/(scroll|auto)/)){var h=c.scrollWidth-c.clientWidth;if(h>0&&(c.scrollLeft>0&&s<0||c.scrollLeft<h&&s>0))return!0}c=c.parentNode}return!1}function n(o){var s=r(o),l=s[0],c=s[1];if(!a(o.target,l,c)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?e.scrollTop-=c*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=c*t.settings.wheelSpeed,u=!0):(e.scrollTop-=c*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),Ne(t),u=u||i(l,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",n):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",n)}function $a(t){if(!tt.supportsTouch&&!tt.supportsIePointer)return;var e=t.element,i={startOffset:{},startTime:0,speed:{},easingLoop:null};function r(d,h){var m=Math.floor(e.scrollTop),p=e.scrollLeft,g=Math.abs(d),v=Math.abs(h);if(v>g){if(h<0&&m===t.contentHeight-t.containerHeight||h>0&&m===0)return window.scrollY===0&&h>0&&tt.isChrome}else if(g>v&&(d<0&&p===t.contentWidth-t.containerWidth||d>0&&p===0))return!0;return!0}function a(d,h){e.scrollTop-=h,e.scrollLeft-=d,Ne(t)}function n(d){return d.targetTouches?d.targetTouches[0]:d}function o(d){return d.target===t.scrollbarX||d.target===t.scrollbarY||d.pointerType&&d.pointerType==="pen"&&d.buttons===0?!1:!!(d.targetTouches&&d.targetTouches.length===1||d.pointerType&&d.pointerType!=="mouse"&&d.pointerType!==d.MSPOINTER_TYPE_MOUSE)}function s(d){if(o(d)){var h=n(d);i.startOffset.pageX=h.pageX,i.startOffset.pageY=h.pageY,i.startTime=new Date().getTime(),i.easingLoop!==null&&clearInterval(i.easingLoop)}}function l(d,h,m){if(!e.contains(d))return!1;for(var p=d;p&&p!==e;){if(p.classList.contains(ie.element.consuming))return!0;var g=Le(p);if(m&&g.overflowY.match(/(scroll|auto)/)){var v=p.scrollHeight-p.clientHeight;if(v>0&&(p.scrollTop>0&&m<0||p.scrollTop<v&&m>0))return!0}if(h&&g.overflowX.match(/(scroll|auto)/)){var w=p.scrollWidth-p.clientWidth;if(w>0&&(p.scrollLeft>0&&h<0||p.scrollLeft<w&&h>0))return!0}p=p.parentNode}return!1}function c(d){if(o(d)){var h=n(d),m={pageX:h.pageX,pageY:h.pageY},p=m.pageX-i.startOffset.pageX,g=m.pageY-i.startOffset.pageY;if(l(d.target,p,g))return;a(p,g),i.startOffset=m;var v=new Date().getTime(),w=v-i.startTime;w>0&&(i.speed.x=p/w,i.speed.y=g/w,i.startTime=v),r(p,g)&&d.cancelable&&d.preventDefault()}}function u(){t.settings.swipeEasing&&(clearInterval(i.easingLoop),i.easingLoop=setInterval(function(){if(t.isInitialized){clearInterval(i.easingLoop);return}if(!i.speed.x&&!i.speed.y){clearInterval(i.easingLoop);return}if(Math.abs(i.speed.x)<.01&&Math.abs(i.speed.y)<.01){clearInterval(i.easingLoop);return}a(i.speed.x*30,i.speed.y*30),i.speed.x*=.8,i.speed.y*=.8},10))}tt.supportsTouch?(t.event.bind(e,"touchstart",s),t.event.bind(e,"touchmove",c),t.event.bind(e,"touchend",u)):tt.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",s),t.event.bind(e,"pointermove",c),t.event.bind(e,"pointerup",u)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",s),t.event.bind(e,"MSPointerMove",c),t.event.bind(e,"MSPointerUp",u)))}var za=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Fa={"click-rail":Ya,"drag-thumb":Ba,keyboard:Ha,wheel:Wa,touch:$a},It=function(e,i){var r=this;if(i===void 0&&(i={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(ie.main),this.settings=za();for(var a in i)this.settings[a]=i[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var n=function(){return e.classList.add(ie.state.focus)},o=function(){return e.classList.remove(ie.state.focus)};this.isRtl=Le(e).direction==="rtl",this.isRtl===!0&&e.classList.add(ie.rtl),this.isNegativeScroll=(function(){var c=e.scrollLeft,u=null;return e.scrollLeft=-1,u=e.scrollLeft<0,e.scrollLeft=c,u})(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new ut,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Yt(ie.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Yt(ie.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",n),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var s=Le(this.scrollbarXRail);this.scrollbarXBottom=parseInt(s.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Z(s.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Z(s.borderLeftWidth)+Z(s.borderRightWidth),me(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Z(s.marginLeft)+Z(s.marginRight),me(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Yt(ie.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Yt(ie.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",n),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=Le(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Z(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?qa(this.scrollbarY):null,this.railBorderYWidth=Z(l.borderTopWidth)+Z(l.borderBottomWidth),me(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Z(l.marginTop)+Z(l.marginBottom),me(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return Fa[c](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(c){return r.onScroll(c)}),Ne(this)};It.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,me(this.scrollbarXRail,{display:"block"}),me(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Z(Le(this.scrollbarXRail).marginLeft)+Z(Le(this.scrollbarXRail).marginRight),this.railYMarginHeight=Z(Le(this.scrollbarYRail).marginTop)+Z(Le(this.scrollbarYRail).marginBottom),me(this.scrollbarXRail,{display:"none"}),me(this.scrollbarYRail,{display:"none"}),Ne(this),Qt(this,"top",0,!1,!0),Qt(this,"left",0,!1,!0),me(this.scrollbarXRail,{display:""}),me(this.scrollbarYRail,{display:""}))};It.prototype.onScroll=function(e){this.isAlive&&(Ne(this),Qt(this,"top",this.element.scrollTop-this.lastScrollTop),Qt(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};It.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),rt(this.scrollbarX),rt(this.scrollbarY),rt(this.scrollbarXRail),rt(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};It.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const vi="ave.stickySidebar",lr=()=>{try{return window.localStorage}catch{return null}},ja=(t,e)=>{const i=t.map(r=>({element:r,transition:r?.style.transition,webkit:r?.style.WebkitTransition,moz:r?.style.MozTransition}));i.forEach(({element:r})=>{r&&(r.style.WebkitTransition="none",r.style.MozTransition="none",r.style.transition="none")}),e(),i.forEach(({element:r,transition:a,webkit:n,moz:o})=>{r&&(r.style.WebkitTransition=n||"",r.style.MozTransition=o||"",r.style.transition=a||"")})};function Ua(){const t=document.querySelector(".app"),e=document.querySelector(".side-menu"),i=document.querySelector(".ave-navbar"),r=document.getElementById("ave-loader"),a=document.querySelector(".hamburger"),n=document.querySelector(".fadetoblack"),o=e?.querySelector('[data-ave-menu="container"]')||document.querySelector(".ave-sidebar__menu");if(!t||!e||!i||!a)return;let s=null;const l=()=>{s&&window.requestAnimationFrame(()=>{s?.update()})},c=m=>{const p=lr();if(p){if(m){p.setItem(vi,"true");return}p.removeItem(vi)}},u=(m,p={suppressPersist:!1})=>{t.classList.toggle("expanded",m),a.classList.toggle("is-active",m),p.suppressPersist||c(m),l()};ja([e,t,i],()=>{if(!(window.innerWidth>768&&lr()?.getItem(vi)==="true")){u(!1,{suppressPersist:!0});return}t.classList.add("expanded","no-animation"),a.classList.add("is-active","no-animation"),r&&(r.style.left=`${e.clientWidth/2}px`)}),n&&n.addEventListener("click",()=>{u(!1)}),a.addEventListener("click",m=>{m.preventDefault();const p=!t.classList.contains("expanded");u(p)}),o&&(s=new It(o,{wheelPropagation:!1,suppressScrollX:!0}),window.addEventListener("resize",()=>{l()},{passive:!0}));const d=document.querySelectorAll(".ave-sidebar__toggle"),h=(m,p)=>{if(!m)return;if(m.removeAttribute("data-ave-animating"),p){m.classList.add("ave-sidebar__submenu--open"),m.style.maxHeight="0px",requestAnimationFrame(()=>{const E=m.scrollHeight;m.style.maxHeight=`${E}px`,l()});const w=E=>{E.propertyName==="max-height"&&(m.style.maxHeight="none",m.removeEventListener("transitionend",w),l())};m.addEventListener("transitionend",w);return}const g=m.scrollHeight;m.style.maxHeight=`${g}px`,requestAnimationFrame(()=>{m.classList.remove("ave-sidebar__submenu--open"),m.style.maxHeight="0px",l()});const v=w=>{w.propertyName==="max-height"&&(m.style.maxHeight="0px",m.removeEventListener("transitionend",v),l())};m.addEventListener("transitionend",v)};d.forEach(m=>{const p=m.closest('[data-ave-menu="item"]'),g=m.getAttribute("data-ave-submenu"),v=g?document.getElementById(g):null;if(!p||!v)return;const w=m.getAttribute("aria-expanded")==="true";p.classList.toggle("ave-sidebar__item--expanded",w),v.classList.toggle("ave-sidebar__submenu--open",w),v.style.maxHeight=w?"none":"0px",m.setAttribute("aria-expanded",String(w)),l(),m.addEventListener("click",E=>{E.preventDefault();const T=m.getAttribute("aria-expanded")!=="true";m.setAttribute("aria-expanded",String(T)),p.classList.toggle("ave-sidebar__item--expanded",T),h(v,T)})})}function Ka(){const t=document.querySelector(".ave-navbar__right .dropdown.profile"),e=t?.querySelector(".dropdown-toggle"),i=t?.querySelector(".dropdown-menu");if(!t||!e||!i)return;const r=()=>{t.classList.remove("open"),e.setAttribute("aria-expanded","false")};e.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();const n=t.classList.toggle("open");e.setAttribute("aria-expanded",String(n))}),document.addEventListener("click",a=>{t.contains(a.target)||r()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&r()})}function $r(t=document){t.querySelectorAll(".form-field-default").forEach(e=>{const i=e.querySelector("input");i&&(i.addEventListener("focus",()=>e.classList.add("focused")),i.addEventListener("blur",()=>e.classList.remove("focused")))})}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function cr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function Oe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?cr(Object(i),!0).forEach(function(r){Ga(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):cr(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Kt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kt=function(e){return typeof e}:Kt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(t)}function Ga(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Pe(){return Pe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Pe.apply(this,arguments)}function Va(t,e){if(t==null)return{};var i={},r=Object.keys(t),a,n;for(n=0;n<r.length;n++)a=r[n],!(e.indexOf(a)>=0)&&(i[a]=t[a]);return i}function Ja(t,e){if(t==null)return{};var i=Va(t,e),r,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Za="1.15.6";function ke(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Re=ke(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),kt=ke(/Edge/i),dr=ke(/firefox/i),Et=ke(/safari/i)&&!ke(/chrome/i)&&!ke(/android/i),Ui=ke(/iP(ad|od|hone)/i),zr=ke(/chrome/i)&&ke(/android/i),Fr={capture:!1,passive:!1};function W(t,e,i){t.addEventListener(e,i,!Re&&Fr)}function Y(t,e,i){t.removeEventListener(e,i,!Re&&Fr)}function ei(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function jr(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ce(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&ei(t,e):ei(t,e))||r&&t===i)return t;if(t===i)break}while(t=jr(t))}return null}var ur=/\s+/g;function be(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(ur," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(ur," ")}}function I(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function st(t,e){var i="";if(typeof t=="string")i=t;else do{var r=I(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function Ur(t,e,i){if(t){var r=t.getElementsByTagName(e),a=0,n=r.length;if(i)for(;a<n;a++)i(r[a],a);return r}return[]}function _e(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,i,r,a){if(!(!t.getBoundingClientRect&&t!==window)){var n,o,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==_e()?(n=t.getBoundingClientRect(),o=n.top,s=n.left,l=n.bottom,c=n.right,u=n.height,d=n.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||i)&&t!==window&&(a=a||t.parentNode,!Re))do if(a&&a.getBoundingClientRect&&(I(a,"transform")!=="none"||i&&I(a,"position")!=="static")){var h=a.getBoundingClientRect();o-=h.top+parseInt(I(a,"border-top-width")),s-=h.left+parseInt(I(a,"border-left-width")),l=o+n.height,c=s+n.width;break}while(a=a.parentNode);if(r&&t!==window){var m=st(a||t),p=m&&m.a,g=m&&m.d;m&&(o/=g,s/=p,d/=p,u/=g,l=o+u,c=s+d)}return{top:o,left:s,bottom:l,right:c,width:d,height:u}}}function hr(t,e,i){for(var r=He(t,!0),a=re(t)[e];r;){var n=re(r)[i],o=void 0;if(o=a>=n,!o)return r;if(r===_e())break;r=He(r,!1)}return!1}function dt(t,e,i,r){for(var a=0,n=0,o=t.children;n<o.length;){if(o[n].style.display!=="none"&&o[n]!==O.ghost&&(r||o[n]!==O.dragged)&&Ce(o[n],i.draggable,t,!1)){if(a===e)return o[n];a++}n++}return null}function Ki(t,e){for(var i=t.lastElementChild;i&&(i===O.ghost||I(i,"display")==="none"||e&&!ei(i,e));)i=i.previousElementSibling;return i||null}function Se(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==O.clone&&(!e||ei(t,e))&&i++;return i}function fr(t){var e=0,i=0,r=_e();if(t)do{var a=st(t),n=a.a,o=a.d;e+=t.scrollLeft*n,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function Qa(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function He(t,e){if(!t||!t.getBoundingClientRect)return _e();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=I(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return _e();if(r||e)return i;r=!0}}while(i=i.parentNode);return _e()}function en(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function bi(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var St;function Kr(t,e){return function(){if(!St){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),St=setTimeout(function(){St=void 0},e)}}}function tn(){clearTimeout(St),St=void 0}function Gr(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Vr(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Jr(t,e,i){var r={};return Array.from(t.children).forEach(function(a){var n,o,s,l;if(!(!Ce(a,e.draggable,t,!1)||a.animated||a===i)){var c=re(a);r.left=Math.min((n=r.left)!==null&&n!==void 0?n:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var ge="Sortable"+new Date().getTime();function rn(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(I(a,"display")==="none"||a===O.ghost)){t.push({target:a,rect:re(a)});var n=Oe({},t[t.length-1].rect);if(a.thisAnimationDuration){var o=st(a,!0);o&&(n.top-=o.f,n.left-=o.e)}a.fromRect=n}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Qa(t,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var n=!1,o=0;t.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=re(c),h=c.prevFromRect,m=c.prevToRect,p=s.rect,g=st(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&bi(h,d)&&!bi(u,d)&&(p.top-d.top)/(p.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=nn(p,h,m,a.options)),bi(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=a.options.animation),a.animate(c,p,d,l)),l&&(n=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),n?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,a,n,o){if(o){I(r,"transition",""),I(r,"transform","");var s=st(this.el),l=s&&s.a,c=s&&s.d,u=(a.left-n.left)/(l||1),d=(a.top-n.top)/(c||1);r.animatingX=!!u,r.animatingY=!!d,I(r,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=an(r),I(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),I(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){I(r,"transition",""),I(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function an(t){return t.offsetWidth}function nn(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var Ze=[],yi={initializeByDefault:!0},Nt={mount:function(e){for(var i in yi)yi.hasOwnProperty(i)&&!(i in e)&&(e[i]=yi[i]);Ze.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ze.push(e)},pluginEvent:function(e,i,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var n=e+"Global";Ze.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][n]&&i[o.pluginName][n](Oe({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Oe({sortable:i},r)))})},initializePlugins:function(e,i,r,a){Ze.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,Pe(r,c.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var o=this.modifyOption(e,n,e.options[n]);typeof o<"u"&&(e.options[n]=o)}},getEventProperties:function(e,i){var r={};return Ze.forEach(function(a){typeof a.eventProperties=="function"&&Pe(r,a.eventProperties.call(i[a.pluginName],e))}),r},modifyOption:function(e,i,r){var a;return Ze.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[i]=="function"&&(a=n.optionListeners[i].call(e[n.pluginName],r))}),a}};function on(t){var e=t.sortable,i=t.rootEl,r=t.name,a=t.targetEl,n=t.cloneEl,o=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,p=t.extraEventProperties;if(e=e||i&&i[ge],!!e){var g,v=e.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Re&&!kt?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||i,g.from=s||i,g.item=a||i,g.clone=n,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=m?m.lastPutMode:void 0;var E=Oe(Oe({},p),Nt.getEventProperties(r,e));for(var T in E)g[T]=E[T];i&&i.dispatchEvent(g),v[w]&&v[w].call(e,g)}}var sn=["evt"],he=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,n=Ja(r,sn);Nt.pluginEvent.bind(O)(e,i,Oe({dragEl:y,parentEl:ee,ghostEl:P,rootEl:K,nextEl:Ke,lastDownEl:Gt,cloneEl:J,cloneHidden:Ye,dragStarted:vt,putSortable:se,activeSortable:O.active,originalEvent:a,oldIndex:at,oldDraggableIndex:xt,newIndex:ye,newDraggableIndex:Xe,hideGhostForTarget:ta,unhideGhostForTarget:ia,cloneNowHidden:function(){Ye=!0},cloneNowShown:function(){Ye=!1},dispatchSortableEvent:function(s){de({sortable:i,name:s,originalEvent:a})}},n))};function de(t){on(Oe({putSortable:se,cloneEl:J,targetEl:y,rootEl:K,oldIndex:at,oldDraggableIndex:xt,newIndex:ye,newDraggableIndex:Xe},t))}var y,ee,P,K,Ke,Gt,J,Ye,at,ye,xt,Xe,Wt,se,it=!1,ti=!1,ii=[],ze,De,wi,Ei,pr,mr,vt,Qe,Dt,Tt=!1,$t=!1,Vt,le,Si=[],Mi=!1,ri=[],ci=typeof document<"u",zt=Ui,gr=kt||Re?"cssFloat":"float",ln=ci&&!zr&&!Ui&&"draggable"in document.createElement("div"),Zr=(function(){if(ci){if(Re)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),Qr=function(e,i){var r=I(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),n=dt(e,0,i),o=dt(e,1,i),s=n&&I(n),l=o&&I(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(n).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+re(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return n&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&r[gr]==="none"||o&&r[gr]==="none"&&c+u>a)?"vertical":"horizontal"},cn=function(e,i,r){var a=r?e.left:e.top,n=r?e.right:e.bottom,o=r?e.width:e.height,s=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return a===s||n===l||a+o/2===s+c/2},dn=function(e,i){var r;return ii.some(function(a){var n=a[ge].options.emptyInsertThreshold;if(!(!n||Ki(a))){var o=re(a),s=e>=o.left-n&&e<=o.right+n,l=i>=o.top-n&&i<=o.bottom+n;if(s&&l)return r=a}}),r},ea=function(e){function i(n,o){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(n==null&&(o||d))return!0;if(n==null||n===!1)return!1;if(o&&n==="clone")return n;if(typeof n=="function")return i(n(s,l,c,u),o)(s,l,c,u);var h=(o?s:l).options.group.name;return n===!0||typeof n=="string"&&n===h||n.join&&n.indexOf(h)>-1}}var r={},a=e.group;(!a||Kt(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=i(a.pull,!0),r.checkPut=i(a.put),r.revertClone=a.revertClone,e.group=r},ta=function(){!Zr&&P&&I(P,"display","none")},ia=function(){!Zr&&P&&I(P,"display","")};ci&&!zr&&document.addEventListener("click",function(t){if(ti)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ti=!1,!1},!0);var Fe=function(e){if(y){e=e.touches?e.touches[0]:e;var i=dn(e.clientX,e.clientY);if(i){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[ge]._onDragOver(r)}}},un=function(e){y&&y.parentNode[ge]._isOutsideThisEl(e.target)};function O(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Pe({},e),t[ge]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qr(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&(!Et||Ui),emptyInsertThreshold:5};Nt.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);ea(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:ln,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?W(t,"pointerdown",this._onTapStart):(W(t,"mousedown",this._onTapStart),W(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(W(t,"dragover",this),W(t,"dragenter",this)),ii.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Pe(this,rn())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Qe=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,a=this.options,n=a.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=a.filter;if(yn(r),!y&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Et&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ce(l,a.draggable,r,!1),!(l&&l.animated)&&Gt!==l)){if(at=Se(l),xt=Se(l,a.draggable),typeof u=="function"){if(u.call(this,e,l,this)){de({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),he("filter",i,{evt:e}),n&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Ce(c,d.trim(),r,!1),d)return de({sortable:i,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),he("filter",i,{evt:e}),!0}),u)){n&&e.preventDefault();return}a.handle&&!Ce(c,a.handle,r,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,i,r){var a=this,n=a.el,o=a.options,s=n.ownerDocument,l;if(r&&!y&&r.parentNode===n){var c=re(r);if(K=n,y=r,ee=y.parentNode,Ke=y.nextSibling,Gt=r,Wt=o.group,O.dragged=y,ze={target:y,clientX:(i||e).clientX,clientY:(i||e).clientY},pr=ze.clientX-c.left,mr=ze.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,y.style["will-change"]="all",l=function(){if(he("delayEnded",a,{evt:e}),O.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!dr&&a.nativeDraggable&&(y.draggable=!0),a._triggerDragStart(e,i),de({sortable:a,name:"choose",originalEvent:e}),be(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Ur(y,u.trim(),xi)}),W(s,"dragover",Fe),W(s,"mousemove",Fe),W(s,"touchmove",Fe),o.supportPointer?(W(s,"pointerup",a._onDrop),!this.nativeDraggable&&W(s,"pointercancel",a._onDrop)):(W(s,"mouseup",a._onDrop),W(s,"touchend",a._onDrop),W(s,"touchcancel",a._onDrop)),dr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(kt||Re))){if(O.eventCanceled){this._onDrop();return}o.supportPointer?(W(s,"pointerup",a._disableDelayedDrag),W(s,"pointercancel",a._disableDelayedDrag)):(W(s,"mouseup",a._disableDelayedDrag),W(s,"touchend",a._disableDelayedDrag),W(s,"touchcancel",a._disableDelayedDrag)),W(s,"mousemove",a._delayedDragTouchMoveHandler),W(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&W(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&xi(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._disableDelayedDrag),Y(e,"touchend",this._disableDelayedDrag),Y(e,"touchcancel",this._disableDelayedDrag),Y(e,"pointerup",this._disableDelayedDrag),Y(e,"pointercancel",this._disableDelayedDrag),Y(e,"mousemove",this._delayedDragTouchMoveHandler),Y(e,"touchmove",this._delayedDragTouchMoveHandler),Y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?W(document,"pointermove",this._onTouchMove):i?W(document,"touchmove",this._onTouchMove):W(document,"mousemove",this._onTouchMove):(W(y,"dragend",this),W(K,"dragstart",this._onDragStart));try{document.selection?Jt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(it=!1,K&&y){he("dragStarted",this,{evt:i}),this.nativeDraggable&&W(document,"dragover",un);var r=this.options;!e&&be(y,r.dragClass,!1),be(y,r.ghostClass,!0),O.active=this,e&&this._appendGhost(),de({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,ta();for(var e=document.elementFromPoint(De.clientX,De.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==i);)i=e;if(y.parentNode[ge]._isOutsideThisEl(e),i)do{if(i[ge]){var r=void 0;if(r=i[ge]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=jr(i));ia()}},_onTouchMove:function(e){if(ze){var i=this.options,r=i.fallbackTolerance,a=i.fallbackOffset,n=e.touches?e.touches[0]:e,o=P&&st(P,!0),s=P&&o&&o.a,l=P&&o&&o.d,c=zt&&le&&fr(le),u=(n.clientX-ze.clientX+a.x)/(s||1)+(c?c[0]-Si[0]:0)/(s||1),d=(n.clientY-ze.clientY+a.y)/(l||1)+(c?c[1]-Si[1]:0)/(l||1);if(!O.active&&!it){if(r&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(P){o?(o.e+=u-(wi||0),o.f+=d-(Ei||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");I(P,"webkitTransform",h),I(P,"mozTransform",h),I(P,"msTransform",h),I(P,"transform",h),wi=u,Ei=d,De=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!P){var e=this.options.fallbackOnBody?document.body:K,i=re(y,!0,zt,!0,e),r=this.options;if(zt){for(le=e;I(le,"position")==="static"&&I(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=_e()),i.top+=le.scrollTop,i.left+=le.scrollLeft):le=_e(),Si=fr(le)}P=y.cloneNode(!0),be(P,r.ghostClass,!1),be(P,r.fallbackClass,!0),be(P,r.dragClass,!0),I(P,"transition",""),I(P,"transform",""),I(P,"box-sizing","border-box"),I(P,"margin",0),I(P,"top",i.top),I(P,"left",i.left),I(P,"width",i.width),I(P,"height",i.height),I(P,"opacity","0.8"),I(P,"position",zt?"absolute":"fixed"),I(P,"zIndex","100000"),I(P,"pointerEvents","none"),O.ghost=P,e.appendChild(P),I(P,"transform-origin",pr/parseInt(P.style.width)*100+"% "+mr/parseInt(P.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,a=e.dataTransfer,n=r.options;if(he("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}he("setupClone",this),O.eventCanceled||(J=Vr(y),J.removeAttribute("id"),J.draggable=!1,J.style["will-change"]="",this._hideClone(),be(J,this.options.chosenClass,!1),O.clone=J),r.cloneId=Jt(function(){he("clone",r),!O.eventCanceled&&(r.options.removeCloneOnHide||K.insertBefore(J,y),r._hideClone(),de({sortable:r,name:"clone"}))}),!i&&be(y,n.dragClass,!0),i?(ti=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Y(document,"mouseup",r._onDrop),Y(document,"touchend",r._onDrop),Y(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",n.setData&&n.setData.call(r,a,y)),W(document,"drop",r),I(y,"transform","translateZ(0)")),it=!0,r._dragStartId=Jt(r._dragStarted.bind(r,i,e)),W(document,"selectstart",r),vt=!0,window.getSelection().removeAllRanges(),Et&&I(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,a,n,o,s=this.options,l=s.group,c=O.active,u=Wt===l,d=s.sort,h=se||c,m,p=this,g=!1;if(Mi)return;function v(ue,ve){he(ue,p,Oe({evt:e,isOwner:u,axis:m?"vertical":"horizontal",revert:o,dragRect:a,targetRect:n,canSort:d,fromSortable:h,target:r,completed:E,onMove:function(Ae,Je){return Ft(K,i,y,a,Ae,re(Ae),e,Je)},changed:T},ve))}function w(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function E(ue){return v("dragOverCompleted",{insertion:ue}),ue&&(u?c._hideClone():c._showClone(p),p!==h&&(be(y,se?se.options.ghostClass:c.options.ghostClass,!1),be(y,s.ghostClass,!0)),se!==p&&p!==O.active?se=p:p===O.active&&se&&(se=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===y&&!y.animated||r===i&&!r.animated)&&(Qe=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(y.parentNode[ge]._isOutsideThisEl(e.target),!ue&&Fe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function T(){ye=Se(y),Xe=Se(y,s.draggable),de({sortable:p,name:"change",toEl:i,newIndex:ye,newDraggableIndex:Xe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ce(r,s.draggable,i,!0),v("dragOver"),O.eventCanceled)return g;if(y.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return E(!1);if(ti=!1,c&&!s.disabled&&(u?d||(o=ee!==K):se===this||(this.lastPutMode=Wt.checkPull(this,c,y,e))&&l.checkPut(this,c,y,e))){if(m=this._getDirection(e,r)==="vertical",a=re(y),v("dragOverValid"),O.eventCanceled)return g;if(o)return ee=K,w(),this._hideClone(),v("revert"),O.eventCanceled||(Ke?K.insertBefore(y,Ke):K.appendChild(y)),E(!0);var k=Ki(i,s.draggable);if(!k||mn(e,m,this)&&!k.animated){if(k===y)return E(!1);if(k&&i===e.target&&(r=k),r&&(n=re(r)),Ft(K,i,y,a,r,n,e,!!r)!==!1)return w(),k&&k.nextSibling?i.insertBefore(y,k.nextSibling):i.appendChild(y),ee=i,T(),E(!0)}else if(k&&pn(e,m,this)){var R=dt(i,0,s,!0);if(R===y)return E(!1);if(r=R,n=re(r),Ft(K,i,y,a,r,n,e,!1)!==!1)return w(),i.insertBefore(y,R),ee=i,T(),E(!0)}else if(r.parentNode===i){n=re(r);var f=0,b,x=y.parentNode!==i,L=!cn(y.animated&&y.toRect||a,r.animated&&r.toRect||n,m),_=m?"top":"left",q=hr(r,"top","top")||hr(y,"top","top"),j=q?q.scrollTop:void 0;Qe!==r&&(b=n[_],Tt=!1,$t=!L&&s.invertSwap||x),f=gn(e,r,n,m,L?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,$t,Qe===r);var U;if(f!==0){var F=Se(y);do F-=f,U=ee.children[F];while(U&&(I(U,"display")==="none"||U===P))}if(f===0||U===r)return E(!1);Qe=r,Dt=f;var Q=r.nextElementSibling,ne=!1;ne=f===1;var xe=Ft(K,i,y,a,r,n,e,ne);if(xe!==!1)return(xe===1||xe===-1)&&(ne=xe===1),Mi=!0,setTimeout(fn,30),w(),ne&&!Q?i.appendChild(y):r.parentNode.insertBefore(y,ne?Q:r),q&&Gr(q,0,j-q.scrollTop),ee=y.parentNode,b!==void 0&&!$t&&(Vt=Math.abs(b-re(r)[_])),T(),E(!0)}if(i.contains(y))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Y(document,"mousemove",this._onTouchMove),Y(document,"touchmove",this._onTouchMove),Y(document,"pointermove",this._onTouchMove),Y(document,"dragover",Fe),Y(document,"mousemove",Fe),Y(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._onDrop),Y(e,"touchend",this._onDrop),Y(e,"pointerup",this._onDrop),Y(e,"pointercancel",this._onDrop),Y(e,"touchcancel",this._onDrop),Y(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(ye=Se(y),Xe=Se(y,r.draggable),he("drop",this,{evt:e}),ee=y&&y.parentNode,ye=Se(y),Xe=Se(y,r.draggable),O.eventCanceled){this._nulling();return}it=!1,$t=!1,Tt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Oi(this.cloneId),Oi(this._dragStartId),this.nativeDraggable&&(Y(document,"drop",this),Y(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Et&&I(document.body,"user-select",""),I(y,"transform",""),e&&(vt&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),P&&P.parentNode&&P.parentNode.removeChild(P),(K===ee||se&&se.lastPutMode!=="clone")&&J&&J.parentNode&&J.parentNode.removeChild(J),y&&(this.nativeDraggable&&Y(y,"dragend",this),xi(y),y.style["will-change"]="",vt&&!it&&be(y,se?se.options.ghostClass:this.options.ghostClass,!1),be(y,this.options.chosenClass,!1),de({sortable:this,name:"unchoose",toEl:ee,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==ee?(ye>=0&&(de({rootEl:ee,name:"add",toEl:ee,fromEl:K,originalEvent:e}),de({sortable:this,name:"remove",toEl:ee,originalEvent:e}),de({rootEl:ee,name:"sort",toEl:ee,fromEl:K,originalEvent:e}),de({sortable:this,name:"sort",toEl:ee,originalEvent:e})),se&&se.save()):ye!==at&&ye>=0&&(de({sortable:this,name:"update",toEl:ee,originalEvent:e}),de({sortable:this,name:"sort",toEl:ee,originalEvent:e})),O.active&&((ye==null||ye===-1)&&(ye=at,Xe=xt),de({sortable:this,name:"end",toEl:ee,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),K=y=ee=P=Ke=J=Gt=Ye=ze=De=vt=ye=Xe=at=xt=Qe=Dt=se=Wt=O.dragged=O.ghost=O.clone=O.active=null,ri.forEach(function(e){e.checked=!0}),ri.length=wi=Ei=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),hn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,a=0,n=r.length,o=this.options;a<n;a++)i=r[a],Ce(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||bn(i));return e},sort:function(e,i){var r={},a=this.el;this.toArray().forEach(function(n,o){var s=a.children[o];Ce(s,this.options.draggable,a,!1)&&(r[n]=s)},this),i&&this.captureAnimationState(),e.forEach(function(n){r[n]&&(a.removeChild(r[n]),a.appendChild(r[n]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Ce(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var a=Nt.modifyOption(this,e,i);typeof a<"u"?r[e]=a:r[e]=i,e==="group"&&ea(r)},destroy:function(){he("destroy",this);var e=this.el;e[ge]=null,Y(e,"mousedown",this._onTapStart),Y(e,"touchstart",this._onTapStart),Y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(e,"dragover",this),Y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ii.splice(ii.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ye){if(he("hideClone",this),O.eventCanceled)return;I(J,"display","none"),this.options.removeCloneOnHide&&J.parentNode&&J.parentNode.removeChild(J),Ye=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ye){if(he("showClone",this),O.eventCanceled)return;y.parentNode==K&&!this.options.group.revertClone?K.insertBefore(J,y):Ke?K.insertBefore(J,Ke):K.appendChild(J),this.options.group.revertClone&&this.animate(y,J),I(J,"display",""),Ye=!1}}};function hn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ft(t,e,i,r,a,n,o,s){var l,c=t[ge],u=c.options.onMove,d;return window.CustomEvent&&!Re&&!kt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=a||e,l.relatedRect=n||re(e),l.willInsertAfter=s,l.originalEvent=o,t.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function xi(t){t.draggable=!1}function fn(){Mi=!1}function pn(t,e,i){var r=re(dt(i.el,0,i.options,!0)),a=Jr(i.el,i.options,P),n=10;return e?t.clientX<a.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<a.top-n||t.clientY<r.bottom&&t.clientX<r.left}function mn(t,e,i){var r=re(Ki(i.el,i.options.draggable)),a=Jr(i.el,i.options,P),n=10;return e?t.clientX>a.right+n||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>a.bottom+n||t.clientX>r.right&&t.clientY>r.top}function gn(t,e,i,r,a,n,o,s){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,u=r?i.top:i.left,d=r?i.bottom:i.right,h=!1;if(!o){if(s&&Vt<c*a){if(!Tt&&(Dt===1?l>u+c*n/2:l<d-c*n/2)&&(Tt=!0),Tt)h=!0;else if(Dt===1?l<u+Vt:l>d-Vt)return-Dt}else if(l>u+c*(1-a)/2&&l<d-c*(1-a)/2)return vn(e)}return h=h||o,h&&(l<u+c*n/2||l>d-c*n/2)?l>u+c/2?1:-1:0}function vn(t){return Se(y)<Se(t)?1:-1}function bn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function yn(t){ri.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&ri.push(r)}}function Jt(t){return setTimeout(t,0)}function Oi(t){return clearTimeout(t)}ci&&W(document,"touchmove",function(t){(O.active||it)&&t.cancelable&&t.preventDefault()});O.utils={on:W,off:Y,css:I,find:Ur,is:function(e,i){return!!Ce(e,i,e,!1)},extend:en,throttle:Kr,closest:Ce,toggleClass:be,clone:Vr,index:Se,nextTick:Jt,cancelNextTick:Oi,detectDirection:Qr,getChild:dt,expando:ge};O.get=function(t){return t[ge]};O.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(O.utils=Oe(Oe({},O.utils),r.utils)),Nt.mount(r)})};O.create=function(t,e){return new O(t,e)};O.version=Za;var te=[],bt,Ii,ki=!1,Di,Ti,ai,yt;function wn(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?W(document,"dragover",this._handleAutoScroll):this.options.supportPointer?W(document,"pointermove",this._handleFallbackAutoScroll):r.touches?W(document,"touchmove",this._handleFallbackAutoScroll):W(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):(Y(document,"pointermove",this._handleFallbackAutoScroll),Y(document,"touchmove",this._handleFallbackAutoScroll),Y(document,"mousemove",this._handleFallbackAutoScroll)),vr(),Zt(),tn()},nulling:function(){ai=Ii=bt=ki=yt=Di=Ti=null,te.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var a=this,n=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,s=document.elementFromPoint(n,o);if(ai=i,r||this.options.forceAutoScrollFallback||kt||Re||Et){Ci(i,this.options,s,r);var l=He(s,!0);ki&&(!yt||n!==Di||o!==Ti)&&(yt&&vr(),yt=setInterval(function(){var c=He(document.elementFromPoint(n,o),!0);c!==l&&(l=c,Zt()),Ci(i,a.options,c,r)},10),Di=n,Ti=o)}else{if(!this.options.bubbleScroll||He(s,!0)===_e()){Zt();return}Ci(i,this.options,He(s,!1),!1)}}},Pe(t,{pluginName:"scroll",initializeByDefault:!0})}function Zt(){te.forEach(function(t){clearInterval(t.pid)}),te=[]}function vr(){clearInterval(yt)}var Ci=Kr(function(t,e,i,r){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,l=_e(),c=!1,u;Ii!==i&&(Ii=i,Zt(),bt=e.scroll,u=e.scrollFn,bt===!0&&(bt=He(i,!0)));var d=0,h=bt;do{var m=h,p=re(m),g=p.top,v=p.bottom,w=p.left,E=p.right,T=p.width,k=p.height,R=void 0,f=void 0,b=m.scrollWidth,x=m.scrollHeight,L=I(m),_=m.scrollLeft,q=m.scrollTop;m===l?(R=T<b&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),f=k<x&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(R=T<b&&(L.overflowX==="auto"||L.overflowX==="scroll"),f=k<x&&(L.overflowY==="auto"||L.overflowY==="scroll"));var j=R&&(Math.abs(E-a)<=o&&_+T<b)-(Math.abs(w-a)<=o&&!!_),U=f&&(Math.abs(v-n)<=o&&q+k<x)-(Math.abs(g-n)<=o&&!!q);if(!te[d])for(var F=0;F<=d;F++)te[F]||(te[F]={});(te[d].vx!=j||te[d].vy!=U||te[d].el!==m)&&(te[d].el=m,te[d].vx=j,te[d].vy=U,clearInterval(te[d].pid),(j!=0||U!=0)&&(c=!0,te[d].pid=setInterval((function(){r&&this.layer===0&&O.active._onTouchMove(ai);var Q=te[this.layer].vy?te[this.layer].vy*s:0,ne=te[this.layer].vx?te[this.layer].vx*s:0;typeof u=="function"&&u.call(O.dragged.parentNode[ge],ne,Q,t,ai,te[this.layer].el)!=="continue"||Gr(te[this.layer].el,ne,Q)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=He(h,!1)));ki=c}},30),ra=function(e){var i=e.originalEvent,r=e.putSortable,a=e.dragEl,n=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||n;s();var u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function Gi(){}Gi.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=dt(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:ra};Pe(Gi,{pluginName:"revertOnSpill"});function Vi(){}Vi.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,a=r||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:ra};Pe(Vi,{pluginName:"removeOnSpill"});O.mount(new wn);O.mount(Vi,Gi);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function br(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function aa(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?br(Object(i),!0).forEach(function(r){Dn(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):br(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function En(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function na(t){var e=En(t,"string");return typeof e=="symbol"?e:e+""}function Ni(t){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(t)}function Sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,na(r.key),r)}}function xn(t,e,i){return e&&yr(t.prototype,e),i&&yr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dn(t,e,i){return e=na(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function oa(t){return Tn(t)||Cn(t)||An(t)||Ln()}function Tn(t){if(Array.isArray(t))return Pi(t)}function Cn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function An(t,e){if(t){if(typeof t=="string")return Pi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pi(t,e)}}function Pi(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var di=typeof window<"u"&&typeof window.document<"u",Ie=di?window:{},Ji=di&&Ie.document.documentElement?"ontouchstart"in Ie.document.documentElement:!1,Zi=di?"PointerEvent"in Ie:!1,G="cropper",Qi="all",sa="crop",la="move",ca="zoom",je="e",Ue="w",et="s",qe="n",ft="ne",pt="nw",mt="se",gt="sw",Ri="".concat(G,"-crop"),wr="".concat(G,"-disabled"),pe="".concat(G,"-hidden"),Er="".concat(G,"-hide"),_n="".concat(G,"-invisible"),ni="".concat(G,"-modal"),qi="".concat(G,"-move"),Lt="".concat(G,"Action"),jt="".concat(G,"Preview"),er="crop",da="move",ua="none",Xi="crop",Yi="cropend",Bi="cropmove",Hi="cropstart",Sr="dblclick",Mn=Ji?"touchstart":"mousedown",On=Ji?"touchmove":"mousemove",In=Ji?"touchend touchcancel":"mouseup",xr=Zi?"pointerdown":Mn,Dr=Zi?"pointermove":On,Tr=Zi?"pointerup pointercancel":In,Cr="ready",Ar="resize",Lr="wheel",Wi="zoom",_r="image/jpeg",kn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Nn=/^data:/,Pn=/^data:image\/jpeg;base64,/,Rn=/^img|canvas$/i,ha=200,fa=100,Mr={viewMode:0,dragMode:er,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ha,minContainerHeight:fa,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},qn='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Xn=Number.isNaN||Ie.isNaN;function B(t){return typeof t=="number"&&!Xn(t)}var Or=function(e){return e>0&&e<1/0};function Ai(t){return typeof t>"u"}function Ge(t){return Ni(t)==="object"&&t!==null}var Yn=Object.prototype.hasOwnProperty;function nt(t){if(!Ge(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&Yn.call(i,"isPrototypeOf")}catch{return!1}}function fe(t){return typeof t=="function"}var Bn=Array.prototype.slice;function pa(t){return Array.from?Array.from(t):Bn.call(t)}function ae(t,e){return t&&fe(e)&&(Array.isArray(t)||B(t.length)?pa(t).forEach(function(i,r){e.call(t,i,r,t)}):Ge(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var V=Object.assign||function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return Ge(e)&&r.length>0&&r.forEach(function(n){Ge(n)&&Object.keys(n).forEach(function(o){e[o]=n[o]})}),e},Hn=/\.\d*(?:0|9){12}\d*$/;function lt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Hn.test(t)?Math.round(t*e)/e:t}var Wn=/^width|height|left|top|marginLeft|marginTop$/;function We(t,e){var i=t.style;ae(e,function(r,a){Wn.test(a)&&B(r)&&(r="".concat(r,"px")),i[a]=r})}function $n(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function oe(t,e){if(e){if(B(t.length)){ae(t,function(r){oe(r,e)});return}if(t.classList){t.classList.add(e);return}var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Me(t,e){if(e){if(B(t.length)){ae(t,function(i){Me(i,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function ot(t,e,i){if(e){if(B(t.length)){ae(t,function(r){ot(r,e,i)});return}i?oe(t,e):Me(t,e)}}var zn=/([a-z\d])([A-Z])/g;function tr(t){return t.replace(zn,"$1-$2").toLowerCase()}function $i(t,e){return Ge(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(tr(e)))}function _t(t,e,i){Ge(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(tr(e)),i)}function Fn(t,e){if(Ge(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(tr(e)))}var ma=/\s\s*/,ga=(function(){var t=!1;if(di){var e=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(n){e=n}});Ie.addEventListener("test",i,r),Ie.removeEventListener("test",i,r)}return t})();function Te(t,e,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(ma).forEach(function(n){if(!ga){var o=t.listeners;o&&o[n]&&o[n][i]&&(a=o[n][i],delete o[n][i],Object.keys(o[n]).length===0&&delete o[n],Object.keys(o).length===0&&delete t.listeners)}t.removeEventListener(n,a,r)})}function Ee(t,e,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(ma).forEach(function(n){if(r.once&&!ga){var o=t.listeners,s=o===void 0?{}:o;a=function(){delete s[n][i],t.removeEventListener(n,a,r);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];i.apply(t,u)},s[n]||(s[n]={}),s[n][i]&&t.removeEventListener(n,s[n][i],r),s[n][i]=a,t.listeners=s}t.addEventListener(n,a,r)})}function ct(t,e,i){var r;return fe(Event)&&fe(CustomEvent)?r=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(r)}function va(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Li=Ie.location,jn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ir(t){var e=t.match(jn);return e!==null&&(e[1]!==Li.protocol||e[2]!==Li.hostname||e[3]!==Li.port)}function kr(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Ct(t){var e=t.rotate,i=t.scaleX,r=t.scaleY,a=t.translateX,n=t.translateY,o=[];B(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),B(n)&&n!==0&&o.push("translateY(".concat(n,"px)")),B(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),B(i)&&i!==1&&o.push("scaleX(".concat(i,")")),B(r)&&r!==1&&o.push("scaleY(".concat(r,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Un(t){var e=aa({},t),i=0;return ae(t,function(r,a){delete e[a],ae(e,function(n){var o=Math.abs(r.startX-n.startX),s=Math.abs(r.startY-n.startY),l=Math.abs(r.endX-n.endX),c=Math.abs(r.endY-n.endY),u=Math.sqrt(o*o+s*s),d=Math.sqrt(l*l+c*c),h=(d-u)/u;Math.abs(h)>Math.abs(i)&&(i=h)})}),i}function Ut(t,e){var i=t.pageX,r=t.pageY,a={endX:i,endY:r};return e?a:aa({startX:i,startY:r},a)}function Kn(t){var e=0,i=0,r=0;return ae(t,function(a){var n=a.startX,o=a.startY;e+=n,i+=o,r+=1}),e/=r,i/=r,{pageX:e,pageY:i}}function $e(t){var e=t.aspectRatio,i=t.height,r=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Or(r),o=Or(i);if(n&&o){var s=i*e;a==="contain"&&s>r||a==="cover"&&s<r?i=r/e:r=i*e}else n?i=r/e:o&&(r=i*e);return{width:r,height:i}}function Gn(t){var e=t.width,i=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:i,height:e};var a=r%90*Math.PI/180,n=Math.sin(a),o=Math.cos(a),s=e*o+i*n,l=e*n+i*o;return r>90?{width:l,height:s}:{width:s,height:l}}function Vn(t,e,i,r){var a=e.aspectRatio,n=e.naturalWidth,o=e.naturalHeight,s=e.rotate,l=s===void 0?0:s,c=e.scaleX,u=c===void 0?1:c,d=e.scaleY,h=d===void 0?1:d,m=i.aspectRatio,p=i.naturalWidth,g=i.naturalHeight,v=r.fillColor,w=v===void 0?"transparent":v,E=r.imageSmoothingEnabled,T=E===void 0?!0:E,k=r.imageSmoothingQuality,R=k===void 0?"low":k,f=r.maxWidth,b=f===void 0?1/0:f,x=r.maxHeight,L=x===void 0?1/0:x,_=r.minWidth,q=_===void 0?0:_,j=r.minHeight,U=j===void 0?0:j,F=document.createElement("canvas"),Q=F.getContext("2d"),ne=$e({aspectRatio:m,width:b,height:L}),xe=$e({aspectRatio:m,width:q,height:U},"cover"),ue=Math.min(ne.width,Math.max(xe.width,p)),ve=Math.min(ne.height,Math.max(xe.height,g)),ht=$e({aspectRatio:a,width:b,height:L}),Ae=$e({aspectRatio:a,width:q,height:U},"cover"),Je=Math.min(ht.width,Math.max(Ae.width,n)),Pt=Math.min(ht.height,Math.max(Ae.height,o)),ui=[-Je/2,-Pt/2,Je,Pt];return F.width=lt(ue),F.height=lt(ve),Q.fillStyle=w,Q.fillRect(0,0,ue,ve),Q.save(),Q.translate(ue/2,ve/2),Q.rotate(l*Math.PI/180),Q.scale(u,h),Q.imageSmoothingEnabled=T,Q.imageSmoothingQuality=R,Q.drawImage.apply(Q,[t].concat(oa(ui.map(function(S){return Math.floor(lt(S))})))),Q.restore(),F}var ba=String.fromCharCode;function Jn(t,e,i){var r="";i+=e;for(var a=e;a<i;a+=1)r+=ba(t.getUint8(a));return r}var Zn=/^data:.*,/;function Qn(t){var e=t.replace(Zn,""),i=atob(e),r=new ArrayBuffer(i.length),a=new Uint8Array(r);return ae(a,function(n,o){a[o]=i.charCodeAt(o)}),r}function eo(t,e){for(var i=[],r=8192,a=new Uint8Array(t);a.length>0;)i.push(ba.apply(null,pa(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function to(t){var e=new DataView(t),i;try{var r,a,n;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var o=e.byteLength,s=2;s+1<o;){if(e.getUint8(s)===255&&e.getUint8(s+1)===225){a=s;break}s+=1}if(a){var l=a+4,c=a+10;if(Jn(e,l,4)==="Exif"){var u=e.getUint16(c);if(r=u===18761,(r||u===19789)&&e.getUint16(c+2,r)===42){var d=e.getUint32(c+4,r);d>=8&&(n=c+d)}}}if(n){var h=e.getUint16(n,r),m,p;for(p=0;p<h;p+=1)if(m=n+p*12+2,e.getUint16(m,r)===274){m+=8,i=e.getUint16(m,r),e.setUint16(m,1,r);break}}}catch{i=1}return i}function io(t){var e=0,i=1,r=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:i,scaleY:r}}var ro={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,i=this.options,r=this.container,a=this.cropper,n=Number(i.minContainerWidth),o=Number(i.minContainerHeight);oe(a,pe),Me(e,pe);var s={width:Math.max(r.offsetWidth,n>=0?n:ha),height:Math.max(r.offsetHeight,o>=0?o:fa)};this.containerData=s,We(a,{width:s.width,height:s.height}),oe(e,pe),Me(a,pe)},initCanvas:function(){var e=this.containerData,i=this.imageData,r=this.options.viewMode,a=Math.abs(i.rotate)%180===90,n=a?i.naturalHeight:i.naturalWidth,o=a?i.naturalWidth:i.naturalHeight,s=n/o,l=e.width,c=e.height;e.height*s>e.width?r===3?l=e.height*s:c=e.width/s:r===3?c=e.width/s:l=e.height*s;var u={aspectRatio:s,naturalWidth:n,naturalHeight:o,width:l,height:c};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=V({},u)},limitCanvas:function(e,i){var r=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,s=r.viewMode,l=n.aspectRatio,c=this.cropped&&o;if(e){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;s>1?(u=Math.max(u,a.width),d=Math.max(d,a.height),s===3&&(d*l>u?u=d*l:d=u/l)):s>0&&(u?u=Math.max(u,c?o.width:0):d?d=Math.max(d,c?o.height:0):c&&(u=o.width,d=o.height,d*l>u?u=d*l:d=u/l));var h=$e({aspectRatio:l,width:u,height:d});u=h.width,d=h.height,n.minWidth=u,n.minHeight=d,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(s>(c?0:1)){var m=a.width-n.width,p=a.height-n.height;n.minLeft=Math.min(0,m),n.minTop=Math.min(0,p),n.maxLeft=Math.max(0,m),n.maxTop=Math.max(0,p),c&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,s===2&&(n.width>=a.width&&(n.minLeft=Math.min(0,m),n.maxLeft=Math.max(0,m)),n.height>=a.height&&(n.minTop=Math.min(0,p),n.maxTop=Math.max(0,p))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(e,i){var r=this.canvasData,a=this.imageData;if(i){var n=Gn({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,s=n.height,l=r.width*(o/r.naturalWidth),c=r.height*(s/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(c-r.height)/2,r.width=l,r.height=c,r.aspectRatio=o/s,r.naturalWidth=o,r.naturalHeight=s,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,We(this.canvas,V({width:r.width,height:r.height},Ct({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var i=this.canvasData,r=this.imageData,a=r.naturalWidth*(i.width/i.naturalWidth),n=r.naturalHeight*(i.height/i.naturalHeight);V(r,{width:a,height:n,left:(i.width-a)/2,top:(i.height-n)/2}),We(this.image,V({width:r.width,height:r.height},Ct(V({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,a=Number(e.autoCropArea)||.8,n={width:i.width,height:i.height};r&&(i.height*r>i.width?n.height=n.width/r:n.width=n.height*r),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=V({},n)},limitCropBox:function(e,i){var r=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,s=this.limited,l=r.aspectRatio;if(e){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=s?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,h=s?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;c=Math.min(c,a.width),u=Math.min(u,a.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),h*l>d?h=d/l:d=h*l),o.minWidth=Math.min(c,d),o.minHeight=Math.min(u,h),o.maxWidth=d,o.maxHeight=h}i&&(s?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var e=this.options,i=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&_t(this.face,Lt,r.width>=i.width&&r.height>=i.height?la:Qi),We(this.cropBox,V({width:r.width,height:r.height},Ct({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ct(this.element,Xi,this.getData())}},ao={initPreview:function(){var e=this.element,i=this.crossOrigin,r=this.options.preview,a=i?this.crossOriginUrl:this.url,n=e.alt||"The image to preview",o=document.createElement("img");if(i&&(o.crossOrigin=i),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,!!r){var s=r;typeof r=="string"?s=e.ownerDocument.querySelectorAll(r):r.querySelector&&(s=[r]),this.previews=s,ae(s,function(l){var c=document.createElement("img");_t(l,jt,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),i&&(c.crossOrigin=i),c.src=a,c.alt=n,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){ae(this.previews,function(e){var i=$i(e,jt);We(e,{width:i.width,height:i.height}),e.innerHTML=i.html,Fn(e,jt)})},preview:function(){var e=this.imageData,i=this.canvasData,r=this.cropBoxData,a=r.width,n=r.height,o=e.width,s=e.height,l=r.left-i.left-e.left,c=r.top-i.top-e.top;!this.cropped||this.disabled||(We(this.viewBoxImage,V({width:o,height:s},Ct(V({translateX:-l,translateY:-c},e)))),ae(this.previews,function(u){var d=$i(u,jt),h=d.width,m=d.height,p=h,g=m,v=1;a&&(v=h/a,g=n*v),n&&g>m&&(v=m/n,p=a*v,g=m),We(u,{width:p,height:g}),We(u.getElementsByTagName("img")[0],V({width:o*v,height:s*v},Ct(V({translateX:-l*v,translateY:-c*v},e))))}))}},no={bind:function(){var e=this.element,i=this.options,r=this.cropper;fe(i.cropstart)&&Ee(e,Hi,i.cropstart),fe(i.cropmove)&&Ee(e,Bi,i.cropmove),fe(i.cropend)&&Ee(e,Yi,i.cropend),fe(i.crop)&&Ee(e,Xi,i.crop),fe(i.zoom)&&Ee(e,Wi,i.zoom),Ee(r,xr,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&Ee(r,Lr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Ee(r,Sr,this.onDblclick=this.dblclick.bind(this)),Ee(e.ownerDocument,Dr,this.onCropMove=this.cropMove.bind(this)),Ee(e.ownerDocument,Tr,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&Ee(window,Ar,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,i=this.options,r=this.cropper;fe(i.cropstart)&&Te(e,Hi,i.cropstart),fe(i.cropmove)&&Te(e,Bi,i.cropmove),fe(i.cropend)&&Te(e,Yi,i.cropend),fe(i.crop)&&Te(e,Xi,i.crop),fe(i.zoom)&&Te(e,Wi,i.zoom),Te(r,xr,this.onCropStart),i.zoomable&&i.zoomOnWheel&&Te(r,Lr,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Te(r,Sr,this.onDblclick),Te(e.ownerDocument,Dr,this.onCropMove),Te(e.ownerDocument,Tr,this.onCropEnd),i.responsive&&Te(window,Ar,this.onResize)}},oo={resize:function(){if(!this.disabled){var e=this.options,i=this.container,r=this.containerData,a=i.offsetWidth/r.width,n=i.offsetHeight/r.height,o=Math.abs(a-1)>Math.abs(n-1)?a:n;if(o!==1){var s,l;e.restore&&(s=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(ae(s,function(c,u){s[u]=c*o})),this.setCropBoxData(ae(l,function(c,u){l[u]=c*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===ua||this.setDragMode($n(this.dragBox,Ri)?da:er)},wheel:function(e){var i=this,r=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*r,e)))},cropStart:function(e){var i=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(B(i)&&i!==1||B(r)&&r!==0||e.ctrlKey))){var a=this.options,n=this.pointers,o;e.changedTouches?ae(e.changedTouches,function(s){n[s.identifier]=Ut(s)}):n[e.pointerId||0]=Ut(e),Object.keys(n).length>1&&a.zoomable&&a.zoomOnTouch?o=ca:o=$i(e.target,Lt),kn.test(o)&&ct(this.element,Hi,{originalEvent:e,action:o})!==!1&&(e.preventDefault(),this.action=o,this.cropping=!1,o===sa&&(this.cropping=!0,oe(this.dragBox,ni)))}},cropMove:function(e){var i=this.action;if(!(this.disabled||!i)){var r=this.pointers;e.preventDefault(),ct(this.element,Bi,{originalEvent:e,action:i})!==!1&&(e.changedTouches?ae(e.changedTouches,function(a){V(r[a.identifier]||{},Ut(a,!0))}):V(r[e.pointerId||0]||{},Ut(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var i=this.action,r=this.pointers;e.changedTouches?ae(e.changedTouches,function(a){delete r[a.identifier]}):delete r[e.pointerId||0],i&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,ot(this.dragBox,ni,this.cropped&&this.options.modal)),ct(this.element,Yi,{originalEvent:e,action:i}))}}},so={change:function(e){var i=this.options,r=this.canvasData,a=this.containerData,n=this.cropBoxData,o=this.pointers,s=this.action,l=i.aspectRatio,c=n.left,u=n.top,d=n.width,h=n.height,m=c+d,p=u+h,g=0,v=0,w=a.width,E=a.height,T=!0,k;!l&&e.shiftKey&&(l=d&&h?d/h:1),this.limited&&(g=n.minLeft,v=n.minTop,w=g+Math.min(a.width,r.width,r.left+r.width),E=v+Math.min(a.height,r.height,r.top+r.height));var R=o[Object.keys(o)[0]],f={x:R.endX-R.startX,y:R.endY-R.startY},b=function(L){switch(L){case je:m+f.x>w&&(f.x=w-m);break;case Ue:c+f.x<g&&(f.x=g-c);break;case qe:u+f.y<v&&(f.y=v-u);break;case et:p+f.y>E&&(f.y=E-p);break}};switch(s){case Qi:c+=f.x,u+=f.y;break;case je:if(f.x>=0&&(m>=w||l&&(u<=v||p>=E))){T=!1;break}b(je),d+=f.x,d<0&&(s=Ue,d=-d,c-=d),l&&(h=d/l,u+=(n.height-h)/2);break;case qe:if(f.y<=0&&(u<=v||l&&(c<=g||m>=w))){T=!1;break}b(qe),h-=f.y,u+=f.y,h<0&&(s=et,h=-h,u-=h),l&&(d=h*l,c+=(n.width-d)/2);break;case Ue:if(f.x<=0&&(c<=g||l&&(u<=v||p>=E))){T=!1;break}b(Ue),d-=f.x,c+=f.x,d<0&&(s=je,d=-d,c-=d),l&&(h=d/l,u+=(n.height-h)/2);break;case et:if(f.y>=0&&(p>=E||l&&(c<=g||m>=w))){T=!1;break}b(et),h+=f.y,h<0&&(s=qe,h=-h,u-=h),l&&(d=h*l,c+=(n.width-d)/2);break;case ft:if(l){if(f.y<=0&&(u<=v||m>=w)){T=!1;break}b(qe),h-=f.y,u+=f.y,d=h*l}else b(qe),b(je),f.x>=0?m<w?d+=f.x:f.y<=0&&u<=v&&(T=!1):d+=f.x,f.y<=0?u>v&&(h-=f.y,u+=f.y):(h-=f.y,u+=f.y);d<0&&h<0?(s=gt,h=-h,d=-d,u-=h,c-=d):d<0?(s=pt,d=-d,c-=d):h<0&&(s=mt,h=-h,u-=h);break;case pt:if(l){if(f.y<=0&&(u<=v||c<=g)){T=!1;break}b(qe),h-=f.y,u+=f.y,d=h*l,c+=n.width-d}else b(qe),b(Ue),f.x<=0?c>g?(d-=f.x,c+=f.x):f.y<=0&&u<=v&&(T=!1):(d-=f.x,c+=f.x),f.y<=0?u>v&&(h-=f.y,u+=f.y):(h-=f.y,u+=f.y);d<0&&h<0?(s=mt,h=-h,d=-d,u-=h,c-=d):d<0?(s=ft,d=-d,c-=d):h<0&&(s=gt,h=-h,u-=h);break;case gt:if(l){if(f.x<=0&&(c<=g||p>=E)){T=!1;break}b(Ue),d-=f.x,c+=f.x,h=d/l}else b(et),b(Ue),f.x<=0?c>g?(d-=f.x,c+=f.x):f.y>=0&&p>=E&&(T=!1):(d-=f.x,c+=f.x),f.y>=0?p<E&&(h+=f.y):h+=f.y;d<0&&h<0?(s=ft,h=-h,d=-d,u-=h,c-=d):d<0?(s=mt,d=-d,c-=d):h<0&&(s=pt,h=-h,u-=h);break;case mt:if(l){if(f.x>=0&&(m>=w||p>=E)){T=!1;break}b(je),d+=f.x,h=d/l}else b(et),b(je),f.x>=0?m<w?d+=f.x:f.y>=0&&p>=E&&(T=!1):d+=f.x,f.y>=0?p<E&&(h+=f.y):h+=f.y;d<0&&h<0?(s=pt,h=-h,d=-d,u-=h,c-=d):d<0?(s=gt,d=-d,c-=d):h<0&&(s=ft,h=-h,u-=h);break;case la:this.move(f.x,f.y),T=!1;break;case ca:this.zoom(Un(o),e),T=!1;break;case sa:if(!f.x||!f.y){T=!1;break}k=va(this.cropper),c=R.startX-k.left,u=R.startY-k.top,d=n.minWidth,h=n.minHeight,f.x>0?s=f.y>0?mt:ft:f.x<0&&(c-=d,s=f.y>0?gt:pt),f.y<0&&(u-=h),this.cropped||(Me(this.cropBox,pe),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}T&&(n.width=d,n.height=h,n.left=c,n.top=u,this.action=s,this.renderCropBox()),ae(o,function(x){x.startX=x.endX,x.startY=x.endY})}},lo={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&oe(this.dragBox,ni),Me(this.cropBox,pe),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=V({},this.initialImageData),this.canvasData=V({},this.initialCanvasData),this.cropBoxData=V({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(V(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Me(this.dragBox,ni),oe(this.cropBox,pe)),this},replace:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),i?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ae(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Me(this.cropper,wr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,oe(this.cropper,wr)),this},destroy:function(){var e=this.element;return e[G]?(e[G]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,a=r.left,n=r.top;return this.moveTo(Ai(e)?e:a+Number(e),Ai(i)?i:n+Number(i))},moveTo:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,a=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(B(e)&&(r.left=e,a=!0),B(i)&&(r.top=i,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(e,i){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,i)},zoomTo:function(e,i,r){var a=this.options,n=this.canvasData,o=n.width,s=n.height,l=n.naturalWidth,c=n.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&a.zoomable){var u=l*e,d=c*e;if(ct(this.element,Wi,{ratio:e,oldRatio:o/l,originalEvent:r})===!1)return this;if(r){var h=this.pointers,m=va(this.cropper),p=h&&Object.keys(h).length?Kn(h):{pageX:r.pageX,pageY:r.pageY};n.left-=(u-o)*((p.pageX-m.left-n.left)/o),n.top-=(d-s)*((p.pageY-m.top-n.top)/s)}else nt(i)&&B(i.x)&&B(i.y)?(n.left-=(u-o)*((i.x-n.left)/o),n.top-=(d-s)*((i.y-n.top)/s)):(n.left-=(u-o)/2,n.top-=(d-s)/2);n.width=u,n.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),B(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var i=this.imageData.scaleY;return this.scale(e,B(i)?i:1)},scaleY:function(e){var i=this.imageData.scaleX;return this.scale(B(i)?i:1,e)},scale:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,a=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(B(e)&&(r.scaleX=e,a=!0),B(i)&&(r.scaleY=i,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,r=this.imageData,a=this.canvasData,n=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:n.left-a.left,y:n.top-a.top,width:n.width,height:n.height};var s=r.width/r.naturalWidth;if(ae(o,function(u,d){o[d]=u/s}),e){var l=Math.round(o.y+o.height),c=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=c-o.x,o.height=l-o.y}}else o={x:0,y:0,width:0,height:0};return i.rotatable&&(o.rotate=r.rotate||0),i.scalable&&(o.scaleX=r.scaleX||1,o.scaleY=r.scaleY||1),o},setData:function(e){var i=this.options,r=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&nt(e)){var o=!1;i.rotatable&&B(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,o=!0),i.scalable&&(B(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,o=!0),B(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=r.width/r.naturalWidth;B(e.x)&&(n.left=e.x*s+a.left),B(e.y)&&(n.top=e.y*s+a.top),B(e.width)&&(n.width=e.width*s),B(e.height)&&(n.height=e.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?V({},this.containerData):{}},getImageData:function(){return this.sized?V({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,i={};return this.ready&&ae(["left","top","width","height","naturalWidth","naturalHeight"],function(r){i[r]=e[r]}),i},setCanvasData:function(e){var i=this.canvasData,r=i.aspectRatio;return this.ready&&!this.disabled&&nt(e)&&(B(e.left)&&(i.left=e.left),B(e.top)&&(i.top=e.top),B(e.width)?(i.width=e.width,i.height=e.width/r):B(e.height)&&(i.height=e.height,i.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:e.left,top:e.top,width:e.width,height:e.height}),i||{}},setCropBoxData:function(e){var i=this.cropBoxData,r=this.options.aspectRatio,a,n;return this.ready&&this.cropped&&!this.disabled&&nt(e)&&(B(e.left)&&(i.left=e.left),B(e.top)&&(i.top=e.top),B(e.width)&&e.width!==i.width&&(a=!0,i.width=e.width),B(e.height)&&e.height!==i.height&&(n=!0,i.height=e.height),r&&(a?i.height=i.width/r:n&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,r=Vn(this.image,this.imageData,i,e);if(!this.cropped)return r;var a=this.getData(e.rounded),n=a.x,o=a.y,s=a.width,l=a.height,c=r.width/Math.floor(i.naturalWidth);c!==1&&(n*=c,o*=c,s*=c,l*=c);var u=s/l,d=$e({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=$e({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),m=$e({aspectRatio:u,width:e.width||(c!==1?r.width:s),height:e.height||(c!==1?r.height:l)}),p=m.width,g=m.height;p=Math.min(d.width,Math.max(h.width,p)),g=Math.min(d.height,Math.max(h.height,g));var v=document.createElement("canvas"),w=v.getContext("2d");v.width=lt(p),v.height=lt(g),w.fillStyle=e.fillColor||"transparent",w.fillRect(0,0,p,g);var E=e.imageSmoothingEnabled,T=E===void 0?!0:E,k=e.imageSmoothingQuality;w.imageSmoothingEnabled=T,k&&(w.imageSmoothingQuality=k);var R=r.width,f=r.height,b=n,x=o,L,_,q,j,U,F;b<=-s||b>R?(b=0,L=0,q=0,U=0):b<=0?(q=-b,b=0,L=Math.min(R,s+b),U=L):b<=R&&(q=0,L=Math.min(s,R-b),U=L),L<=0||x<=-l||x>f?(x=0,_=0,j=0,F=0):x<=0?(j=-x,x=0,_=Math.min(f,l+x),F=_):x<=f&&(j=0,_=Math.min(l,f-x),F=_);var Q=[b,x,L,_];if(U>0&&F>0){var ne=p/s;Q.push(q*ne,j*ne,U*ne,F*ne)}return w.drawImage.apply(w,[r].concat(oa(Q.map(function(xe){return Math.floor(lt(xe))})))),v},setAspectRatio:function(e){var i=this.options;return!this.disabled&&!Ai(e)&&(i.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var i=this.options,r=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=e===er,o=i.movable&&e===da;e=n||o?e:ua,i.dragMode=e,_t(r,Lt,e),ot(r,Ri,n),ot(r,qi,o),i.cropBoxMovable||(_t(a,Lt,e),ot(a,Ri,n),ot(a,qi,o))}return this}},co=Ie.Cropper,ya=(function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Sn(this,t),!e||!Rn.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=V({},Mr,nt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return xn(t,[{key:"init",value:function(){var i=this.element,r=i.tagName.toLowerCase(),a;if(!i[G]){if(i[G]=this,r==="img"){if(this.isImg=!0,a=i.getAttribute("src")||"",this.originalUrl=a,!a)return;a=i.src}else r==="canvas"&&window.HTMLCanvasElement&&(a=i.toDataURL());this.load(a)}}},{key:"load",value:function(i){var r=this;if(i){this.url=i,this.imageData={};var a=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Nn.test(i)){Pn.test(i)?this.read(Qn(i)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==_r&&o.abort()},o.onload=function(){r.read(o.response)},o.onloadend=function(){r.reloading=!1,r.xhr=null},n.checkCrossOrigin&&Ir(i)&&a.crossOrigin&&(i=kr(i)),o.open("GET",i,!0),o.responseType="arraybuffer",o.withCredentials=a.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(i){var r=this.options,a=this.imageData,n=to(i),o=0,s=1,l=1;if(n>1){this.url=eo(i,_r);var c=io(n);o=c.rotate,s=c.scaleX,l=c.scaleY}r.rotatable&&(a.rotate=o),r.scalable&&(a.scaleX=s,a.scaleY=l),this.clone()}},{key:"clone",value:function(){var i=this.element,r=this.url,a=i.crossOrigin,n=r;this.options.checkCrossOrigin&&Ir(r)&&(a||(a="anonymous"),n=kr(r)),this.crossOrigin=a,this.crossOriginUrl=n;var o=document.createElement("img");a&&(o.crossOrigin=a),o.src=n||r,o.alt=i.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),oe(o,Er),i.parentNode.insertBefore(o,i.nextSibling)}},{key:"start",value:function(){var i=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var a=Ie.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ie.navigator.userAgent),n=function(c,u){V(i.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),i.initialImageData=V({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(r.naturalWidth&&!a){n(r.naturalWidth,r.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),a||s.removeChild(o)},o.src=r.src,a||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,r=this.options,a=this.image,n=i.parentNode,o=document.createElement("div");o.innerHTML=qn;var s=o.querySelector(".".concat(G,"-container")),l=s.querySelector(".".concat(G,"-canvas")),c=s.querySelector(".".concat(G,"-drag-box")),u=s.querySelector(".".concat(G,"-crop-box")),d=u.querySelector(".".concat(G,"-face"));this.container=n,this.cropper=s,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=s.querySelector(".".concat(G,"-view-box")),this.face=d,l.appendChild(a),oe(i,pe),n.insertBefore(s,i.nextSibling),Me(a,Er),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,oe(u,pe),r.guides||oe(u.getElementsByClassName("".concat(G,"-dashed")),pe),r.center||oe(u.getElementsByClassName("".concat(G,"-center")),pe),r.background&&oe(s,"".concat(G,"-bg")),r.highlight||oe(d,_n),r.cropBoxMovable&&(oe(d,qi),_t(d,Lt,Qi)),r.cropBoxResizable||(oe(u.getElementsByClassName("".concat(G,"-line")),pe),oe(u.getElementsByClassName("".concat(G,"-point")),pe)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),fe(r.ready)&&Ee(i,Cr,r.ready,{once:!0}),ct(i,Cr)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),Me(this.element,pe)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=co,t}},{key:"setDefaults",value:function(i){V(Mr,nt(i)&&i)}}])})();V(ya.prototype,ro,ao,no,oo,so,lo);const wa=t=>{if(!t)return;t.classList.add("is-active"),t.setAttribute("aria-hidden","false"),t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},At=t=>{t&&(t.classList.remove("is-active"),t.setAttribute("aria-hidden","true"))},oi=t=>{t&&(At(t),setTimeout(()=>t.remove(),300))},Mt=t=>{const{title:e="Modal",body:i="",bodyParams:r=null,type:a="default",variant:n="default",confirmText:o="OK",cancelText:s="Cancel",onConfirm:l=null,onCancel:c=null,size:u="default",autoClose:d=!0}=t,h=document.createElement("div");h.className="modal",h.setAttribute("data-ave-modal",""),h.setAttribute("data-modal-dynamic","true");const m=u==="small"?"modal-sm":u==="large"?"modal-lg":"",p=n!=="default"?`modal-${n}`:"";let g=i;if(r&&Array.isArray(r)&&r.length>0){const R=r.map(f=>`<span class="modal-param">"${f}"</span>`).join(", ");g=`<p class="modal-message">${i} ${R}</p>`}else i&&!i.startsWith("<")&&(g=`<p>${i}</p>`);h.innerHTML=`
        <div class="modal-background" data-ave-modal-close></div>
        <div class="modal-dialog ${m} ${p}">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">${e}</h4>
                    <button class="close" data-ave-modal-dismiss type="button">&times;</button>
                </div>
                <div class="modal-body">
                    ${g}
                </div>
                <div class="modal-footer">
                    ${a==="alert"?`
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="confirm"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="form"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:""}
                </div>
            </div>
        </div>
    `;const v=h.querySelector("[data-modal-confirm]"),w=h.querySelector("[data-modal-cancel]"),E=h.querySelector("[data-ave-modal-dismiss]"),T=h.querySelector("[data-ave-modal-close]"),k=()=>{At(h),setTimeout(()=>h.remove(),300)};return v&&v.addEventListener("click",()=>{l&&l(h),d&&k()}),w&&w.addEventListener("click",()=>{c&&c(),k()}),E&&E.addEventListener("click",k),T&&T.addEventListener("click",()=>{c&&c(),k()}),document.body.appendChild(h),requestAnimationFrame(()=>{wa(h),Ve.emit("dom:updated",h)}),h},si=(t,e={})=>new Promise(i=>{Mt({title:e.title||"Confirm",body:t,bodyParams:e.bodyParams||null,type:"confirm",variant:e.variant||"default",confirmText:e.confirmText||"Yes",cancelText:e.cancelText||"No",size:e.size||"small",onConfirm:()=>i(!0),onCancel:()=>i(!1)})}),uo=(t,e={})=>{Mt({title:e.title||"Alert",body:t,bodyParams:e.bodyParams||null,type:"alert",variant:e.variant||"default",confirmText:e.confirmText||"OK",size:e.size||"small"})};function ho(){document.querySelectorAll("[data-ave-modal-trigger]").forEach(t=>{const e=t.getAttribute("data-ave-modal-trigger"),i=e?document.querySelector(e):null;i&&t.addEventListener("click",r=>{r.preventDefault(),wa(i)})}),document.querySelectorAll("[data-ave-modal]").forEach(t=>{t.addEventListener("click",e=>{e.target.hasAttribute("data-ave-modal-close")&&At(t)}),t.querySelectorAll("[data-ave-modal-dismiss]").forEach(e=>{e.addEventListener("click",i=>{i.preventDefault(),At(t)})})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){const e=document.querySelector("[data-ave-modal].is-active");e&&At(e)}})}let wt=null;const $=(t="success",e="",i=4e3)=>{if(!wt&&(wt=document.getElementById("toast-container"),!wt)){console.error('Toast container not found. Add <div id="toast-container"></div> to your layout.');return}const r={success:"Action completed successfully.",danger:"Something went wrong. Please try again.",warning:"Please review your action.",info:"Here is some information."},a={success:"Success",danger:"Error",warning:"Warning",info:"Info"},n=document.createElement("div");n.className=`toast toast-${t}`;const s=(e||r[t]||r.info).split(`
`).map(c=>`<p>${c}</p>`).join("");n.innerHTML=`
        <div class="toast-title">${a[t]||a.info}</div>
        <div class="toast-message">${s}</div>
    `,wt.appendChild(n),requestAnimationFrame(()=>{n.classList.add("show")});const l=t==="danger"?Math.max(i,6e3):i;window.setTimeout(()=>{n.classList.remove("show"),window.setTimeout(()=>n.remove(),200)},l)};function fo(){wt=document.getElementById("toast-container");const t=document.getElementById("ave-toast-data");if(t)try{const e=JSON.parse(t.textContent);e.type&&e.message&&$(e.type,e.message)}catch(e){console.error("Failed to parse toast data:",e)}document.querySelectorAll("[data-ave-toast-trigger]").forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const r=e.getAttribute("data-ave-toast-trigger")||"success",a=e.getAttribute("data-ave-toast-message")||"";$(r,a)})})}function po(t,e=1){const i=["B","KB","MB","GB","TB"];if(t<=0)return"0B";const r=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,r)).toFixed(e)+i[r]}const Ea=new Map,Nr=(t="")=>t?t.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"";function mo(){Ea.forEach(t=>{t.uploadedIdsInput&&(t.uploadedIdsInput.value=t.uploadedIds.join(",")),t.deletedIdsInput&&(t.deletedIdsInput.value=t.deletedIds.join(",")),zi(t)})}function zi(t){const{fieldValueInput:e,container:i,collection:r,uploadedIds:a}=t;if(!e||!i)return;const n=i.querySelector("[data-media-grid]"),s=(n?n.querySelectorAll(".media-item"):[]).length>0||(a??[]).length>0;e.value=s?r:""}function Sa(t=document){t.querySelectorAll(".media-field-container").forEach(e=>{if(e.dataset.initialized==="true")return;e.dataset.initialized="true";const i=e.dataset.multiple==="true",r=parseInt(e.dataset.maxFiles)||null,a=parseInt(e.dataset.maxSize)||null;e.dataset.accept;const n=e.dataset.uploadUrl,o=e.dataset.modelType||"",s=e.dataset.modelId||"",l=e.closest("[data-field-name]")?.dataset.fieldName||"media";let c=Nr(e.dataset.metaKey||l);e.dataset.metaKey=c;const u=JSON.parse(e.dataset.propNames||"[]"),d=e.dataset.collection||"default",h=e.querySelector("[data-media-dropzone]"),m=e.querySelector(".media-file-input"),p=e.querySelector("[data-media-grid]"),g=e.querySelector(".media-bulk-actions"),v=e.querySelector("[data-uploaded-ids]"),w=e.querySelector("[data-deleted-ids]"),E=e.querySelector("[data-media-value]"),T=[],k=[],R=new Set,f=c||l;Ea.set(f,{uploadedIds:T,deletedIds:k,uploadedIdsInput:v,deletedIdsInput:w,fieldValueInput:E,fieldName:l,metaKey:c,collection:d,container:e}),zi({fieldValueInput:E,container:e,collection:d,uploadedIds:T}),h?.addEventListener("click",S=>{S.target.closest(".media-item")||m?.click()}),m?.addEventListener("change",S=>{L(S.target.files)}),h?.addEventListener("dragover",S=>{S.preventDefault(),h.classList.add("dragover")}),h?.addEventListener("dragleave",()=>{h.classList.remove("dragover")}),h?.addEventListener("drop",S=>{S.preventDefault(),h.classList.remove("dragover"),L(S.dataTransfer.files)});let b=!1,x=0;p?.addEventListener("mousedown",S=>{S.target.closest("[data-action]")||(b=!1,x=Date.now())}),p?.addEventListener("mousemove",()=>{Date.now()-x>200&&(b=!0)}),p?.addEventListener("mouseup",S=>{if(b){b=!1;return}const D=S.target.closest(".media-item");if(!D||S.target.closest("[data-action]"))return;const C=D.dataset.mediaId;C&&(D.classList.contains("selected")?(D.classList.remove("selected"),R.delete(parseInt(C))):(D.classList.add("selected"),R.add(parseInt(C))),Ae())}),g?.addEventListener("click",S=>{const D=S.target.closest("[data-action]");D&&(D.dataset.action==="select-all"?Je():D.dataset.action==="deselect-all"?Pt():D.dataset.action==="delete-selected"&&ui())}),p?.addEventListener("click",S=>{const D=S.target.closest("[data-action]");if(!D)return;const C=D.closest(".media-item"),H=C?.dataset.mediaId;D.dataset.action==="delete"?(S.stopPropagation(),U(C,H)):D.dataset.action==="edit"?(S.stopPropagation(),ne(C,H)):D.dataset.action==="crop"&&(S.stopPropagation(),F(C,H))}),i&&p&&O.create(p,{animation:400,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)",handle:".media-drag-handle",onEnd:()=>{ve(),ht()}});function L(S){const D=Array.from(S);if(i){if(r&&p.querySelectorAll(".media-item").length+D.length>r){$("warning",`Maximum ${r} files allowed`);return}}else{if(D.length>1){$("warning","You can only upload 1 file");return}p.querySelectorAll(".media-item").forEach(H=>{const M=H.dataset.mediaId;M?j(M,H):H.remove()})}for(const C of D){if(a&&C.size>a*1024){$("warning",`File "${C.name}" is too large. Maximum size: ${(a/1024).toFixed(1)} MB`);continue}_(C)}m&&(m.value="")}function _(S){const D=new FormData;D.append("files[]",S),D.append("collection",d),o&&D.append("model_type",o),s&&D.append("model_id",s),a&&D.append("max_size",a);const C=h?.querySelector(".upload-progress"),H=C?.querySelector(".progress-fill"),M=C?.querySelector(".progress-text"),z=h?.querySelector(".upload-prompt");z&&(z.style.display="none"),C&&(C.style.display="block",C.classList.add("active"));const A=document.querySelector('meta[name="csrf-token"]')?.content,N=new XMLHttpRequest;N.upload.addEventListener("progress",X=>{if(X.lengthComputable&&H&&M){const ce=X.loaded/X.total*100;H.style.width=ce+"%",M.textContent=`Uploading... ${Math.round(ce)}%`}}),N.addEventListener("load",()=>{if(N.status===200)try{const X=JSON.parse(N.responseText);X.success&&X.media?(X.media.forEach(ce=>{q(ce),T.push(ce.id)}),ue(),$("success","File uploaded successfully.")):$("danger","Upload failed: "+(X.message||"Unknown error"))}catch{$("danger","Upload failed: Invalid server response")}else $("danger","Upload failed: "+N.statusText);C&&(C.classList.remove("active"),C.style.display="none"),z&&(z.style.display="flex"),H&&(H.style.width="0%")}),N.addEventListener("error",()=>{$("danger","Upload failed. Please try again."),C&&(C.classList.remove("active"),C.style.display="none"),z&&(z.style.display="flex")}),N.open("POST",n,!0),A&&N.setRequestHeader("X-CSRF-TOKEN",A),N.send(D)}function q(S){const D=document.getElementById("media-item-template-"+l);if(!D){console.error("Media item template not found:","media-item-template-"+l);return}const C=D.content.cloneNode(!0).querySelector(".media-item");if(C.dataset.mediaId=S.id,S.mime_type&&S.mime_type.startsWith("image/")){const A=C.querySelector(".media-image");A.src=S.url||S.preview_url,A.alt=S.file_name,A.style.display="block";const N=C.querySelector('[data-action="crop"]');N&&(N.style.display="flex")}else{const A=C.querySelector(".media-file-icon"),N=A.querySelector(".media-file-name");N.textContent=S.file_name,A.style.display="flex"}const M=C.querySelector('input[type="hidden"]');M.value=S.id;const z=C.querySelector(".media-item-footer");if(z){const A=z.querySelector(".media-filename");A&&(A.textContent=S.file_name);const N=z.querySelector(".media-size");N&&S.size&&(N.textContent=po(S.size),S.size>1048576&&N.classList.add("media-large-file"));const X=z.querySelector(".media-title i");X&&S.title&&(X.textContent=S.title)}p?.appendChild(C),Ve.emit("dom:updated",C),ve()}function j(S,D){if(!S){D?.remove(),ve();return}const C=n.replace("/upload",`/${S}`),H=document.querySelector('meta[name="csrf-token"]')?.content;fetch(C,{method:"DELETE",headers:{"X-CSRF-TOKEN":H,Accept:"application/json","Content-Type":"application/json"}}).then(M=>M.json()).then(M=>{M.success?(D?.remove(),ve()):console.error("Failed to delete file:",M.message)}).catch(M=>{console.error("Delete error:",M)})}async function U(S,D){const C=S?.querySelector(".media-filename")?.textContent||"this file";if(!await si("You are going to remove:",{title:"Delete File",variant:"error",bodyParams:[C],confirmText:"Delete",cancelText:"Cancel"}))return;if(!D){S?.remove(),ve(),ue(),$("success","File removed successfully.");return}const M=n.replace("/upload",`/${D}`),z=document.querySelector('meta[name="csrf-token"]')?.content;fetch(M,{method:"DELETE",headers:{"X-CSRF-TOKEN":z,Accept:"application/json","Content-Type":"application/json"}}).then(A=>A.json()).then(A=>{if(A.success){S?.remove(),ve();const N=parseInt(D,10),X=T.indexOf(N);X!==-1&&T.splice(X,1),k.includes(N)||k.push(N),ue(),$("success","File deleted successfully.")}else $("danger","Failed to delete file: "+(A.message||"Unknown error"))}).catch(A=>{console.error("Delete error:",A),$("danger","Failed to delete file. Please try again.")})}function F(S,D){const C=S?.querySelector(".media-filename")?.textContent||"Media",H=S?.querySelector("img");if(!H){$("danger","Could not load image for cropping");return}const M=H.src,z=`
                <div class="cropper-modal-content">
                    <div class="cropper-image-container">
                        <img id="cropper-image-${D}" src="${M}" alt="Crop image" class="cropper-image">
                    </div>
                    <div class="cropper-options">
                        <div class="row">
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Aspect Ratio:</label>
                                    <select id="cropper-ratio-${D}" class="form-control">
                                        <option value="">Free</option>
                                        <option value="16/9">16:9 (landscape)</option>
                                        <option value="9/16">9:16 (portrait)</option>
                                        <option value="4/3">4:3 (landscape)</option>
                                        <option value="3/4">3:4 (portrait)</option>
                                        <option value="1/1">1:1 (square)</option>
                                        <option value="3/2">3:2 (landscape)</option>
                                        <option value="2/3">2:3 (portrait)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Max Size (px):</label>
                                    <input type="number" id="cropper-max-size-${D}" class="form-control" placeholder="No limit" min="1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,A=Mt({title:`Crop: ${C}`,body:z,type:"form",confirmText:"Crop",cancelText:"Cancel",size:"large",autoClose:!1,onConfirm:N=>{Q(N,D,S)}});setTimeout(()=>{const N=document.getElementById(`cropper-image-${D}`),X=document.getElementById(`cropper-ratio-${D}`);if(!N){console.error("Cropper image element not found");return}const ce=new ya(N,{aspectRatio:NaN,viewMode:1,autoCropArea:1,responsive:!0,guides:!0,grid:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0});A.cropper=ce,X?.addEventListener("change",Rt=>{const hi=Rt.target.value;if(hi==="")ce.setAspectRatio(NaN);else{const[fi,pi]=hi.split("/").map(Number);ce.setAspectRatio(fi/pi)}})},100)}function Q(S,D,C){const H=S.cropper;if(!H){$("danger","Cropper not initialized");return}H.getCanvasData();const M=H.getData(!0);if(M.width<=0||M.height<=0){$("danger","Invalid crop area");return}const z=Math.round(M.x),A=Math.round(M.y),N=Math.round(M.width),X=Math.round(M.height),ce=document.getElementById(`cropper-max-size-${D}`),Rt=ce?.value?parseInt(ce.value,10):null,fi=document.getElementById(`cropper-ratio-${D}`)?.value||"",pi=document.querySelector('meta[name="csrf-token"]')?.content,Oa=n.replace("/upload",""),ir={x:z,y:A,width:N,height:X,aspectRatio:fi};Rt&&(ir.maxSize=Rt),fetch(`${Oa}/${D}/crop`,{method:"POST",headers:{"X-CSRF-TOKEN":pi,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(ir)}).then(we=>we.ok?we.json():we.json().then(qt=>{throw new Error(qt.message||`HTTP ${we.status}`)})).then(we=>{if(we.success){const qt=C.querySelector("img");if(qt){const Xt=new Date().getTime();qt.src=we.media.url+"?t="+Xt}if(we.media.size){const Xt=C.querySelector(".media-size");if(Xt){const rr=["B","KB","MB","GB"];let mi=we.media.size,gi=0;for(;mi>=1024&&gi<rr.length-1;)mi/=1024,gi++;const Ia=mi.toFixed(1)+rr[gi];Xt.textContent=Ia}}$("success","Image cropped successfully"),oi(S)}else throw new Error(we.message||"Crop failed")}).catch(we=>{$("danger","Failed to crop image: "+we.message)})}function ne(S,D){const C=S?.querySelector(".media-filename")?.textContent||"Media",H=S.querySelector(`input[data-media-props="true"][data-props-id="${D}"]`),M=H?JSON.parse(H.value||"{}"):{},z=u.map(A=>{const N=A.charAt(0).toUpperCase()+A.slice(1).replace(/_/g," "),X=`media-prop-${A}`;return`
                    <div class="form-field">
                        <label for="${X}">${N}</label>
                        <input type="text" id="${X}" name="${A}" class="form-control" value="${M[A]||""}" placeholder="Enter ${N.toLowerCase()}">
                    </div>
                `}).join("");Mt({title:`Edit: ${C}`,body:z,type:"form",confirmText:"Save",cancelText:"Cancel",size:"default",autoClose:!1,onConfirm:A=>{xe(A,D,S)}})}function xe(S,D,C){const H=document.querySelector('meta[name="csrf-token"]')?.content,M={};S.querySelectorAll("input[name], textarea[name]").forEach(A=>{const N=A.getAttribute("name");N&&(M[N]=A.value||"")});const z=n.replace("/upload","");fetch(`${z}/${D}/props`,{method:"POST",headers:{"X-CSRF-TOKEN":H,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(M)}).then(A=>A.ok?A.json():A.json().then(N=>{throw new Error(N.message||`HTTP ${A.status}`)})).then(A=>{if(A.success){if(A.media?.props?.title){const ce=C.querySelector(".media-title i");ce&&(ce.textContent=A.media.props.title)}const N=e.dataset.metaKey||c||Nr(l);let X=C.querySelector(`input[data-media-props="true"][data-props-id="${D}"]`);X?(X.name=`__media_props[${N}][${D}]`,X.setAttribute("data-media-props","true"),X.setAttribute("data-props-id",D)):(X=document.createElement("input"),X.type="hidden",X.name=`__media_props[${N}][${D}]`,X.setAttribute("data-media-props","true"),X.setAttribute("data-props-id",D),C.appendChild(X)),X.value=JSON.stringify(A.media.props),$("success",A.message||"Properties saved successfully"),oi(S)}else throw new Error(A.message||"Save failed")}).catch(A=>{$("danger","Failed to save: "+A.message)})}function ue(){v&&(v.value=T.join(",")),w&&(w.value=k.join(",")),zi({fieldValueInput:E,container:e,collection:d,uploadedIds:T})}function ve(){p?.querySelectorAll(".media-item")?.forEach((D,C)=>{const H=D.querySelector(".media-order");H&&(H.textContent=C+1)})}function ht(){const S=p.querySelectorAll(".media-item"),D=[];if(S.forEach((M,z)=>{const A=M.dataset.mediaId;A&&D.push({id:parseInt(A),order:z})}),D.length===0)return;const C=document.querySelector('meta[name="csrf-token"]')?.content,H=n.replace("/upload","/reorder");fetch(H,{method:"POST",headers:{"X-CSRF-TOKEN":C,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({media:D,collection:d})}).then(M=>M.json()).then(M=>{M.success?$("success","Files reordered successfully."):(console.error("Order update failed:",M.message),$("danger","Failed to reorder files."))}).catch(M=>{console.error("Order update error:",M),$("danger","Failed to reorder files.")})}function Ae(){const S=R.size;S>0?(g.style.display="block",g.querySelector(".selected-count").textContent=S):(g.style.display="none",R.clear())}function Je(){p.querySelectorAll(".media-item").forEach(D=>{const C=D.dataset.mediaId;C&&(R.add(parseInt(C)),D.classList.add("selected"))}),Ae()}function Pt(){p.querySelectorAll(".media-item").forEach(D=>{D.classList.remove("selected")}),R.clear(),Ae()}async function ui(){const S=Array.from(R);if(S.length===0){$("warning","No files selected");return}if(!await si(`You are going to remove ${S.length} file(s):`,{title:"Delete Files",variant:"error",confirmText:"Delete",cancelText:"Cancel"}))return;const C=document.querySelector('meta[name="csrf-token"]')?.content,H=n.replace("/upload","");fetch(`${H}/bulk-delete`,{method:"POST",headers:{"X-CSRF-TOKEN":C,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({ids:S})}).then(M=>M.ok?M.json():M.json().then(z=>{throw new Error(z.message||`HTTP ${M.status}`)})).then(M=>{if(M.success)S.forEach(z=>{const A=p.querySelector(`[data-media-id="${z}"]`);A&&A.remove();const N=parseInt(z,10),X=T.indexOf(N);X!==-1&&T.splice(X,1),k.includes(N)||k.push(N)}),R.clear(),Ae(),ve(),ue(),$("success",`${M.deleted} file(s) deleted successfully.`);else throw new Error(M.message||"Delete failed")}).catch(M=>{$("danger","Failed to delete files: "+M.message)})}})}const go="modulepreload",vo=function(t,e){return new URL(t,e).href},Pr={},bo=function(e,i,r){let a=Promise.resolve();if(i&&i.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");a=c(i.map(u=>{if(u=vo(u,r),u in Pr)return;Pr[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(r)for(let p=o.length-1;p>=0;p--){const g=o[p];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":go,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&n(s.reason);return e().catch(n)})};function xa(t=document){t.querySelectorAll("[data-ave-chips]").forEach(e=>{const i=e.querySelector("input");e.addEventListener("click",()=>{i?.focus()}),e.addEventListener("keydown",r=>{if(!i||r.key!=="Enter")return;const a=i.value.trim();if(!a)return;r.preventDefault();const n=document.createElement("span");n.className="chip",n.innerHTML=`${a} <span class="chip-remove" data-ave-chip-remove>&times;</span>`,e.insertBefore(n,i),i.value=""}),e.addEventListener("click",r=>{const a=r.target.closest("[data-ave-chip-remove]");if(!a)return;r.preventDefault(),a.closest(".chip")?.remove()})})}let Fi=[],Rr=!1;const li=t=>{Fi.forEach(e=>{e!==t&&e.classList.remove("is-open")})},yo=(t,e,i,r,a)=>{const n=()=>{const o=a.filter(c=>c.querySelector("input")?.checked);if(!o.length){i.textContent=r,i.classList.add("select-dropdown__placeholder");return}const s=o.map(c=>c.getAttribute("data-label")||c.textContent.trim()),l=s.length>3?`${s.length} options selected`:s.join(", ");i.textContent=l,i.classList.remove("select-dropdown__placeholder")};a.forEach(o=>{const s=o.querySelector('input[type="checkbox"]');s&&(o.classList.toggle("is-selected",s.checked),s.addEventListener("change",()=>{o.classList.toggle("is-selected",s.checked),n()}),o.addEventListener("click",l=>{l.target!==s&&(s.checked=!s.checked,s.dispatchEvent(new Event("change",{bubbles:!0})))}))}),n(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");li(t),t.classList.toggle("is-open",s)})},wo=(t,e,i,r,a)=>{const n=()=>{const o=a.find(s=>s.querySelector("input")?.checked);o?(i.textContent=o.getAttribute("data-label")||o.textContent.trim(),i.classList.remove("select-dropdown__placeholder")):(i.textContent=r,i.classList.add("select-dropdown__placeholder")),a.forEach(s=>{const l=s.querySelector("input");s.classList.toggle("is-selected",!!l?.checked)})};a.forEach(o=>{const s=o.querySelector('input[type="radio"]');if(!s)return;o.classList.toggle("is-selected",s.checked);const l=()=>{s.checked&&(n(),t.classList.remove("is-open"))};s.addEventListener("change",l),o.addEventListener("click",c=>{c.target!==s&&(s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})))})}),n(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");li(t),t.classList.toggle("is-open",s)})},Eo=(t,e)=>{const i=t.querySelector("[data-ave-select-dropdown-search]");i&&i.addEventListener("input",()=>{const r=i.value.trim().toLowerCase();e.forEach(a=>{const o=(a.getAttribute("data-label")||a.textContent||"").toLowerCase().includes(r);a.classList.toggle("is-hidden",!!r&&!o)})})};function Da(t=document){const e=Array.from(t.querySelectorAll("[data-ave-select-dropdown]"));e.length&&(e.forEach(i=>{Fi.includes(i)||Fi.push(i)}),e.forEach(i=>{const r=i.querySelector("[data-ave-select-toggle]"),a=i.querySelector("[data-ave-select-label]"),n=i.querySelector("[data-ave-select-menu]");if(!r||!a||!n)return;const o=r.getAttribute("data-placeholder")||a.textContent.trim();a.classList.add("select-dropdown__placeholder");const s=Array.from(n.querySelectorAll("[data-ave-select-option]")),l=i.getAttribute("data-ave-select-dropdown")||"single";l==="multi"?yo(i,r,a,o,s):wo(i,r,a,o,s),l==="search"&&Eo(i,s)}),Rr||(document.addEventListener("click",i=>{i.target.closest("[data-ave-select-dropdown]")||li()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&li()}),Rr=!0))}const So=t=>t.replace(/^\/+|\/+$/g,""),xo=()=>{const e=document.head.querySelector('meta[name="ave-route-prefix"]')?.getAttribute("content")??"admin";return So(e)},Do=()=>document.head.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",To=()=>{const t=xo();return t===""?"/ave/api/tools/slug":`/${t}/ave/api/tools/slug`};async function Co(t,e={}){const i=(t??"").toString().trim();if(i==="")return"";const r={source:i,separator:e.separator??"-"};e.language&&(r.language=e.language);const a=await fetch(To(),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Do()},credentials:"same-origin",body:JSON.stringify(r)});if(!a.ok)throw new Error("Unable to fetch slug");const n=await a.json();if(!n||typeof n.slug!="string")throw new Error("Invalid slug payload");return n.slug}const qr={:"a",:"b",:"v",:"g",:"d",:"e",:"e",:"zh",:"z",:"i",:"y",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"f",:"h",:"ts",:"ch",:"sh",:"sch",:"",:"y",:"",:"e",:"yu",:"ya"},Xr=t=>t.toString().toLowerCase().split("").map(e=>{if(Object.prototype.hasOwnProperty.call(qr,e))return qr[e];const i=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i!==e?i:e}).join("").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),Ao=t=>t.replace(/(["\\\[\]])/g,"\\"),Lo=(t,e)=>e?t.querySelector('[name="'+Ao(e)+'"]'):null,_o=t=>{if(t.dataset.aveSlugInit==="1")return;const e=t.dataset.aveSlugSource;if(!e)return;const i=t.closest("form")||document,r=Lo(i,e);if(!r)return;const a=()=>{t.dataset.aveSlugAuto=t.value.trim()===""?"1":"0"},n={};t.dataset.aveSlugSeparator&&(n.separator=t.dataset.aveSlugSeparator),t.dataset.aveSlugLanguage&&(n.language=t.dataset.aveSlugLanguage);const o=async()=>{if(t.dataset.aveSlugAuto!=="1")return;const s=(r.value||"").trim();if(s==="")return;let l="";try{l=await Co(s,n)}catch{l=Xr(s)}l||(l=Xr(s)),l&&(t.value=l,t.dispatchEvent(new Event("input",{bubbles:!0})),a())};t.addEventListener("input",a),t.addEventListener("focus",()=>{t.value.trim()===""&&(t.dataset.aveSlugAuto="1"),o()}),a(),t.dataset.aveSlugInit="1"};function Ta(t=document){const e=t.querySelectorAll("[data-ave-slug-source]");e.length&&e.forEach(_o)}function Ca(t=document){t.querySelectorAll("[data-password-toggle]").forEach(i=>{i.addEventListener("click",function(){const a=this.closest(".password-input-wrapper").querySelector("[data-password-input]"),n=this.querySelector(".icon-eye"),o=this.querySelector(".icon-eye-off");a.type==="password"?(a.type="text",n.style.display="none",o.style.display="block"):(a.type="password",n.style.display="block",o.style.display="none")})})}function Aa(t=document){t.querySelectorAll("[data-ave-option-cards]").forEach(e=>{const i=e.querySelectorAll(".option-card"),r=()=>{i.forEach(a=>{const n=a.querySelector("input");a.classList.toggle("selected",!!n?.checked)})};i.forEach(a=>{const n=a.querySelector("input");n&&(n.addEventListener("change",()=>{if(n.type==="radio"){i.forEach(o=>{const s=o.querySelector("input");o.classList.toggle("selected",s===n)});return}a.classList.toggle("selected",n.checked)}),a.addEventListener("click",o=>{o.target!==n&&(n.type==="radio"?(n.checked=!0,n.dispatchEvent(new Event("change",{bubbles:!0}))):(n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0}))))}))}),r()})}let _i=null;async function Mo(){return _i||(_i=bo(()=>import("./editors.js"),[],import.meta.url)),_i}function La(t){$r(t),xa(t),Aa(t),Da(t),Ca(t),Ta(t),Sa(t)}async function _a(t){let e=null;try{e=await Mo()}catch(a){console.error("Failed to load editors bundle",a);return}const{initCodeEditor:i,initRichEditor:r}=e;typeof i=="function"&&i(t),typeof r=="function"&&r(t)}function Oo(){Ve.on("dom:updated",t=>{La(t),_a(t)})}function Io(t=document){t.querySelectorAll("[data-fieldset]").forEach(e=>{const i=e.dataset.fieldName,r=e.querySelector("[data-fieldset-items]"),a=document.getElementById(`fieldset-template-${i}`),n=e.querySelector('[data-action="add"]'),o=e.dataset.sortable==="true",s=e.dataset.collapsible==="true",l=parseInt(e.dataset.minItems)||0,c=parseInt(e.dataset.maxItems)||null;if(!a){console.error(`FieldSet template not found: fieldset-template-${i}`);return}const u=(f="")=>f?f.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"";let d=null;const h=()=>Array.from(r.querySelectorAll("[data-field-id]")).map(f=>parseInt(f.value,10)).filter(Number.isInteger),m=()=>{const f=new Set(h());let b=0;for(;f.has(b);)b++;return b},p=(f,b)=>f.replace(/__INDEX__/g,b).replace(/__index__/g,b).replace(/__ITEM__/g,b).replace(/__item__/g,b),g=(f,b,x)=>{[f,...f.querySelectorAll("*")].forEach(_=>{Array.from(_.attributes||[]).forEach(q=>{const j=p(q.value,x);j!==q.value&&_.setAttribute(q.name,j)}),Object.entries(_.dataset||{}).forEach(([q,j])=>{const U=p(j,x);U!==j&&(_.dataset[q]=U)})}),f.dataset.itemIndex=b,f.dataset.itemId=x,f.querySelectorAll('[data-meta-key*=".__ITEM__."]').forEach(_=>{const q=_.dataset.metaKey,j=p(q,x),U=u(j);if(_.dataset.metaKey=U,_.dataset.collection&&_.dataset.collection.includes("__ITEM__")){const F=p(_.dataset.collection,x);_.dataset.collection=F}_.querySelectorAll('input[data-uploaded-ids], input[data-deleted-ids], input[data-media-props="true"]').forEach(F=>{F.name&&F.name.includes(q)&&(F.name=F.name.replace(q,U))}),delete _.dataset.initialized})};o&&(d=O.create(r,{animation:400,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)",handle:".fieldset-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",disabled:!0,onEnd:()=>{T()}})),n&&n.addEventListener("click",()=>{const f=r.querySelectorAll(".fieldset-item").length;if(c&&f>=c){alert(`Maximum ${c} items allowed`);return}const b=a.content.cloneNode(!0);r.appendChild(b);const x=r.lastElementChild;if(!x){console.error("Failed to add fieldset item");return}const L=m();g(x,f,L);const _=x.querySelector("[data-field-id]");_&&(_.value=L),x.querySelectorAll(".media-field-container").forEach(q=>{q.dataset.initialized="false"}),La(x),_a(x),Ve.emit("dom:updated",x),T(),R(x)}),r.addEventListener("click",async f=>{const b=f.target.closest('[data-action="delete"]');if(!b)return;const x=b.closest(".fieldset-item");if(!x)return;const L=r.querySelectorAll(".fieldset-item").length;if(l>0&&L<=l){uo(`Minimum ${l} items required`,{title:"Deletion Blocked",variant:"warning",confirmText:"OK"});return}await si("Are you sure you want to delete this item?",{title:"Delete Item",variant:"error",confirmText:"Delete",cancelText:"Cancel"})&&(x.remove(),T())}),s&&r.addEventListener("click",f=>{const b=f.target.closest('[data-action="collapse"]');if(!b)return;const x=b.closest(".fieldset-item");if(!x)return;const L=x.querySelector(".fieldset-item-fields");if(!L)return;x.classList.contains("collapsed")?(x.classList.remove("collapsed"),L.style.maxHeight=L.scrollHeight+"px",setTimeout(()=>{L.style.maxHeight=""},300)):(L.style.maxHeight=L.scrollHeight+"px",L.offsetHeight,L.style.maxHeight="0",x.classList.add("collapsed"))});const v=e.querySelector('[data-action="collapse-all"]');v&&v.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(b=>{if(!b.classList.contains("collapsed")){const x=b.querySelector(".fieldset-item-fields");x&&(x.style.maxHeight=x.scrollHeight+"px",x.offsetHeight,x.style.maxHeight="0",b.classList.add("collapsed"))}})});const w=e.querySelector('[data-action="expand-all"]');w&&w.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(b=>{if(b.classList.contains("collapsed")){const x=b.querySelector(".fieldset-item-fields");x&&(b.classList.remove("collapsed"),x.style.maxHeight=x.scrollHeight+"px",setTimeout(()=>{x.style.maxHeight=""},300))}})});const E=e.querySelector('[data-action="toggle-sort"]');if(E&&d){const f=b=>{[v,w].forEach(x=>{x&&(x.disabled=!b,x.classList.toggle("is-disabled",!b))})};f(!E.checked),E.addEventListener("change",b=>{b.target.checked?(e.classList.add("sort-mode"),d.option("disabled",!1),f(!1),r.querySelectorAll(".fieldset-item").forEach(_=>{const q=_.querySelector(".fieldset-item-fields");q&&(q.style.maxHeight="0",_.classList.add("collapsed"))})):(e.classList.remove("sort-mode"),d.option("disabled",!0),f(!0),r.querySelectorAll(".fieldset-item").forEach(_=>{const q=_.querySelector(".fieldset-item-fields");q&&(_.classList.remove("collapsed"),q.style.maxHeight="")}))})}function T(){r.querySelectorAll(".fieldset-item").forEach((b,x)=>{b.dataset.itemIndex=x;const L=b.querySelector(".fieldset-item-number");L&&(L.textContent=x+1)})}T(),k(),r.addEventListener("input",f=>{const b=f.target.closest(".fieldset-item");b&&R(b)}),r.addEventListener("mediaChanged",f=>{const b=f.target.closest(".fieldset-item");b&&R(b)});function k(){r.querySelectorAll(".fieldset-item").forEach(b=>R(b))}function R(f){const b=f.querySelector(".fieldset-item-header");if(!b)return;const x=b.dataset.headTitleField,L=b.dataset.headPreviewField;if(x){const _=b.querySelector("[data-item-title]"),q=f.querySelector(`[name$="[${x}]"]`);_&&q&&(_.textContent=q.value||"")}if(L){const _=b.querySelector("[data-item-preview]"),q=f.querySelector(`[data-field-name*="${L}"]`);if(_&&q){const j=q.querySelector(".media-preview img");j?(_.style.backgroundImage=`url(${j.src})`,_.style.display="block"):(_.style.backgroundImage="",_.style.display="none")}}}})}function ko(t=document){t.querySelectorAll("[data-fieldset-cards]").forEach(e=>{const i=e.dataset.fieldName||"fieldset",r=e.querySelector("[data-cards-grid]"),a=document.getElementById(`fieldset-card-template-${i}`);if(e.querySelector('[data-action="add"]'),e.querySelector("[data-overlay]"),!r||!a){console.error(`FieldSet Cards setup incomplete for: ${i}`);return}let n=!1,o=0;s();function s(){new O(r,{animation:150,handle:".fieldset-item",ghostClass:"sortable-ghost",dragClass:"sortable-drag",onEnd:()=>{c()}})}r.addEventListener("mousedown",g=>{g.target.closest("[data-action]")||(n=!1,o=Date.now())}),r.addEventListener("mousemove",()=>{Date.now()-o>200&&(n=!0)}),e.addEventListener("click",g=>{const v=g.target.closest('[data-action="edit"]');if(v){if(n){n=!1;return}const T=v.closest(".fieldset-item");l(),T.classList.add("is-editing");return}if(g.target.closest('[data-action="close"]')){l();return}if(g.target.closest("[data-overlay]")){l();return}const w=g.target.closest('[data-action="delete"]');if(w){d(w);return}if(g.target.closest('[data-action="add"]')){h();return}}),document.addEventListener("keydown",g=>{g.key==="Escape"&&l()});function l(){e.querySelectorAll(".fieldset-item.is-editing").forEach(g=>g.classList.remove("is-editing"))}function c(){r.querySelectorAll(".fieldset-item").forEach((g,v)=>{const w=g.querySelector(".fieldset-order");w&&(w.textContent=v+1);const E=g.querySelector("[data-card-form]");if(E){const T=E.querySelector("h3");T&&(T.textContent=`Edit Item ${v+1}`)}g.dataset.cardIndex=v})}function u(){const g=new Set;r.querySelectorAll("[data-item-id]").forEach(w=>{const E=w.dataset.itemId;E&&E!==""&&g.add(parseInt(E,10))});let v=0;for(;g.has(v);)v++;return v}async function d(g){if(!await si("Delete this item?",{title:"Delete Item",variant:"error",confirmText:"Delete",cancelText:"Cancel"}))return;const w=g.closest(".fieldset-item");w&&(w.remove(),c())}function h(){const g=u(),v=r.children.length,w=a.content.cloneNode(!0);m(w,v,g),r.appendChild(w),c(),Ve.emit("dom:updated",r)}function m(g,v,w){[g,...g.querySelectorAll("*")].forEach(k=>{Array.from(k.attributes||[]).forEach(R=>{let f=R.value.replace(/__INDEX__/g,w).replace(/__ITEM__/g,w).replace(/__NUMBER__/g,v+1);f!==R.value&&k.setAttribute(R.name,f)}),Object.entries(k.dataset||{}).forEach(([R,f])=>{let b=f.replace(/__INDEX__/g,w).replace(/__ITEM__/g,w).replace(/__NUMBER__/g,v+1);b!==f&&(k.dataset[R]=b)}),k.nodeType===Node.TEXT_NODE&&(k.textContent=k.textContent.replace(/__NUMBER__/g,v+1))});const T=g.querySelector&&g.querySelector(".fieldset-item");T&&(T.dataset.cardIndex=v,T.dataset.itemId=w)}p();function p(){r.querySelectorAll("[data-card-form]").forEach(g=>{g.addEventListener("input",v=>{g.closest(".fieldset-item")})})}})}function No(t=document){$r(t),xa(t),Aa(t),Da(t),Ca(t),Ta(t),Sa(t),Io(t),ko(t),t.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",i=>{mo()})})}function Po(){document.querySelectorAll('[data-ave-tabs="nav"]').forEach(e=>{const i=e.closest("[data-ave-tabs-root]"),r=i?Array.from(i.querySelectorAll("[data-ave-tab-pane]")):[],a=Array.from(e.querySelectorAll("[data-ave-tab-target]"));a.length===0||r.length===0||(Ro(a,r),a.forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const s=n.getAttribute("data-ave-tab-target");if(!s)return;const l=r.find(c=>c.matches(s));l&&Ma(a,r,n,l)})}))})}function Ma(t,e,i,r){t.forEach(a=>{a.classList.toggle("active",a===i);const n=a.querySelector("a");n&&n.setAttribute("aria-selected",String(a===i))}),e.forEach(a=>{a.classList.toggle("active",a===r)})}function Ro(t,e){const i=document.querySelector(".form-field.has-error");if(!i)return;const r=e.find(o=>o.contains(i));if(!r)return;const a=r.getAttribute("id"),n=t.find(o=>o.getAttribute("data-ave-tab-target")===`#${a}`);n&&Ma(t,e,n,r)}function qo(){document.querySelectorAll(".alert-dismissible .close").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.closest(".alert");i&&i.remove()})})}function Xo(){document.querySelectorAll("[data-ave-accordion-toggle]").forEach(t=>{const e=t.getAttribute("data-ave-accordion-toggle");if(!e)return;const i=e.startsWith("#")?e:`#${e}`,r=document.querySelector(i);r&&t.addEventListener("click",a=>{a.preventDefault();const o=!(t.getAttribute("aria-expanded")==="true");t.setAttribute("aria-expanded",String(o)),r.classList.toggle("show",o)})})}const Yo=t=>{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();let i=!1;try{i=document.execCommand("copy")}catch{i=!1}return document.body.removeChild(e),i};function Bo(){document.querySelectorAll("[data-ave-copy]").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();const i=t.getAttribute("data-ave-copy");if(!i)return;const r=document.querySelector(i);if(!r)return;const a=r.value??r.textContent??"";try{await navigator.clipboard.writeText(a),$("success","Copied to clipboard.")}catch{Yo(a)?$("success","Copied to clipboard."):$("danger","Copy failed. Please try again.")}})})}function Ho(){fo(),Po(),qo(),ho(),Xo(),Bo()}function Wo(){if(!document.body.classList.contains("ave-login"))return;const t=document.forms[0],e=t?.querySelector('button[type="submit"]'),i=t?.querySelector('[name="email"]'),r=t?.querySelector('[name="password"]');if(!t||!e||!i||!r)return;e.addEventListener("click",n=>{if(t.checkValidity()){const o=e.querySelector(".signingin"),s=e.querySelector(".signin");o&&s&&(o.classList.remove("hidden"),s.classList.add("hidden"))}else n.preventDefault()}),i.focus();const a=document.getElementById("emailGroup");a&&a.classList.add("focused")}function ji(){const t=document.getElementById("bulk-actions-toolbar");if(!t)return;const e=document.getElementById("select-all"),i=document.querySelectorAll(".row-selector"),r=document.getElementById("selected-count"),a=t.querySelectorAll(".bulk-action-btn");function n(){const o=Array.from(i).filter(s=>s.checked).length;r.textContent=o,o>0?(t.classList.add("is-visible"),a.forEach(s=>{s.disabled=!1})):(t.classList.remove("is-visible"),e.checked=!1)}e&&e.addEventListener("change",o=>{i.forEach(s=>{s.checked=o.target.checked}),n()}),i.forEach(o=>{o.addEventListener("change",()=>{const s=Array.from(i).every(c=>c.checked),l=Array.from(i).some(c=>c.checked);e&&(e.checked=s,e.indeterminate=l&&!s),n()})}),a.forEach(o=>{o.addEventListener("click",async s=>{s.preventDefault();const l=Array.from(i).filter(h=>h.checked).map(h=>h.value);if(l.length===0){$("warning","Please select at least one record");return}o.dataset.handler;const c=o.textContent.trim(),u=o.dataset.variant||"primary";o.disabled=!0,o.textContent=c+"...";const d=Mt({title:`${c} ${l.length} Record(s)?`,body:`Are you sure you want to ${c.toLowerCase()} ${l.length} selected record(s)?`,type:"confirm",variant:u,confirmText:c,cancelText:"Cancel",size:"small",autoClose:!1,onConfirm:async()=>{try{await Promise.all(l.map(h=>fetch(`${window.location.pathname.replace(/\/$/,"")}/${h}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||"",Accept:"application/json"}}))),oi(d),setTimeout(()=>{$("success",`Successfully ${c.toLowerCase()} ${l.length} record(s)`),window.location.reload()},300)}catch(h){oi(d),$("danger","Error executing action: "+h.message),o.disabled=!1,o.textContent=c}},onCancel:()=>{o.disabled=!1,o.textContent=c}})})}),n()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ji):ji();window.Ave=window.Ave||{};window.Ave.events=Ve;document.addEventListener("DOMContentLoaded",()=>{Oo(),Ua(),Ka(),Ho(),No(),Wo(),ji(),Ve.emit("dom:updated",document)});window.addEventListener("load",()=>{const t=document.getElementById("ave-loader");t&&setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},300)},200)});
