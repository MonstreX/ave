class wn{constructor(){this.listeners={}}on(e,r){typeof e=="string"&&(e=[e]),e.forEach(i=>{this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)})}once(e,r){typeof e=="string"&&(e=[e]);const i=(...n)=>{r(...n),this.off(e,i)};this.on(e,i)}off(e,r){typeof e=="string"&&(e=[e]),e.forEach(i=>{this.listeners[i]&&(this.listeners[i]=this.listeners[i].filter(n=>n!==r))})}emit(e,r){this.listeners[e]&&this.listeners[e].forEach(i=>{try{i(r)}catch(n){console.error(`Error in event listener for '${e}':`,n)}})}listeners(e){return this.listeners[e]||[]}hasListeners(e){return(this.listeners[e]||[]).length>0}flush(e){e?this.listeners[e]=[]:this.listeners={}}}const Ie=new wn;/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function _e(t){return getComputedStyle(t)}function pe(t,e){for(var r in e){var i=e[r];typeof i=="number"&&(i=i+"px"),t.style[r]=i}return t}function $t(t){var e=document.createElement("div");return e.className=t,e}var Si=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Fe(t,e){if(!Si)throw new Error("No element matching method supported");return Si.call(t,e)}function ut(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function Ti(t,e){return Array.prototype.filter.call(t.children,function(r){return Fe(r,e)})}var te={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},ha={x:null,y:null};function fa(t,e){var r=t.element.classList,i=te.state.scrolling(e);r.contains(i)?clearTimeout(ha[e]):r.add(i)}function pa(t,e){ha[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(te.state.scrolling(e))},t.settings.scrollingThreshold)}function En(t,e){fa(t,e),pa(t,e)}var Nt=function(e){this.element=e,this.handlers={}},ma={isEmpty:{configurable:!0}};Nt.prototype.bind=function(e,r){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(r),this.element.addEventListener(e,r,!1)};Nt.prototype.unbind=function(e,r){var i=this;this.handlers[e]=this.handlers[e].filter(function(n){return r&&n!==r?!0:(i.element.removeEventListener(e,n,!1),!1)})};Nt.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};ma.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(Nt.prototype,ma);var bt=function(){this.eventElements=[]};bt.prototype.eventElement=function(e){var r=this.eventElements.filter(function(i){return i.element===e})[0];return r||(r=new Nt(e),this.eventElements.push(r)),r};bt.prototype.bind=function(e,r,i){this.eventElement(e).bind(r,i)};bt.prototype.unbind=function(e,r,i){var n=this.eventElement(e);n.unbind(r,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)};bt.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};bt.prototype.once=function(e,r,i){var n=this.eventElement(e),a=function(o){n.unbind(r,a),i(o)};n.bind(r,a)};function Ft(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function ar(t,e,r,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var a;if(e==="top")a=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")a=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Sn(t,r,a,i,n)}function Sn(t,e,r,i,n){var a=r[0],o=r[1],s=r[2],l=r[3],c=r[4],u=r[5];i===void 0&&(i=!0),n===void 0&&(n=!1);var d=t.element;t.reach[l]=null,d[s]<1&&(t.reach[l]="start"),d[s]>t[a]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(Ft("ps-scroll-"+l)),e<0?d.dispatchEvent(Ft("ps-scroll-"+c)):e>0&&d.dispatchEvent(Ft("ps-scroll-"+u)),i&&En(t,l)),t.reach[l]&&(e||n)&&d.dispatchEvent(Ft("ps-"+l+"-reach-"+t.reach[l]))}function V(t){return parseInt(t,10)||0}function Tn(t){return Fe(t,"input,[contenteditable]")||Fe(t,"select,[contenteditable]")||Fe(t,"textarea,[contenteditable]")||Fe(t,"button,[contenteditable]")}function xn(t){var e=_e(t);return V(e.width)+V(e.paddingLeft)+V(e.paddingRight)+V(e.borderLeftWidth)+V(e.borderRightWidth)}var ct={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function He(t){var e=t.element,r=Math.floor(e.scrollTop),i=e.getBoundingClientRect();t.containerWidth=Math.floor(i.width),t.containerHeight=Math.floor(i.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(Ti(e,te.element.rail("x")).forEach(function(n){return ut(n)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(Ti(e,te.element.rail("y")).forEach(function(n){return ut(n)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=xi(t,V(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=V((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=xi(t,V(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=V(r*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),An(e,t),t.scrollbarXActive?e.classList.add(te.state.active("x")):(e.classList.remove(te.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(te.state.active("y")):(e.classList.remove(te.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function xi(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function An(t,e){var r={width:e.railXWidth},i=Math.floor(t.scrollTop);e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:r.left=t.scrollLeft,e.isScrollbarXUsingBottom?r.bottom=e.scrollbarXBottom-i:r.top=e.scrollbarXTop+i,pe(e.scrollbarXRail,r);var n={top:i,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?n.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:n.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:n.left=e.scrollbarYLeft+t.scrollLeft,pe(e.scrollbarYRail,n),pe(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),pe(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function Dn(t){t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var r=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,i=r>t.scrollbarYTop?1:-1;t.element.scrollTop+=i*t.containerHeight,He(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var r=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,i=r>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=i*t.containerWidth,He(t),e.stopPropagation()})}var zt=null;function Ln(t){Ai(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),Ai(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function Ai(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=t.element,h=null,f=null,m=null;function g(b){b.touches&&b.touches[0]&&(b[n]=b.touches[0]["page"+c.toUpperCase()]),zt===o&&(d[l]=h+m*(b[n]-f),fa(t,c),He(t),b.stopPropagation(),b.preventDefault())}function y(){pa(t,c),t[u].classList.remove(te.state.clicking),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y),zt=null}function A(b){zt===null&&(zt=o,h=d[l],b.touches&&(b[n]=b.touches[0]["page"+c.toUpperCase()]),f=b[n],m=(t[i]-t[r])/(t[a]-t[s]),b.touches?(document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",y)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)),t[u].classList.add(te.state.clicking)),b.stopPropagation(),b.cancelable&&b.preventDefault()}t[o].addEventListener("mousedown",A),t[o].addEventListener("touchstart",A)}function Cn(t){var e=t.element,r=function(){return Fe(e,":hover")},i=function(){return Fe(t.scrollbarX,":focus")||Fe(t.scrollbarY,":focus")};function n(a,o){var s=Math.floor(e.scrollTop);if(a===0){if(!t.scrollbarYActive)return!1;if(s===0&&o>0||s>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(l===0&&a<0||l>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)&&!(!r()&&!i())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(Tn(o))return}var s=0,l=0;switch(a.which){case 37:a.metaKey?s=-t.contentWidth:a.altKey?s=-t.containerWidth:s=-30;break;case 38:a.metaKey?l=t.contentHeight:a.altKey?l=t.containerHeight:l=30;break;case 39:a.metaKey?s=t.contentWidth:a.altKey?s=t.containerWidth:s=30;break;case 40:a.metaKey?l=-t.contentHeight:a.altKey?l=-t.containerHeight:l=-30;break;case 32:a.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&s!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=s,He(t),n(s,l)&&a.preventDefault())}})}function _n(t){var e=t.element;function r(o,s){var l=Math.floor(e.scrollTop),c=e.scrollTop===0,u=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,h=e.scrollLeft+e.offsetWidth===e.scrollWidth,f;return Math.abs(s)>Math.abs(o)?f=c||u:f=d||h,f?!t.settings.wheelPropagation:!0}function i(o){var s=o.deltaX,l=-1*o.deltaY;return(typeof s>"u"||typeof l>"u")&&(s=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(s*=10,l*=10),s!==s&&l!==l&&(s=0,l=o.wheelDelta),o.shiftKey?[-l,-s]:[s,l]}function n(o,s,l){if(!ct.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var c=o;c&&c!==e;){if(c.classList.contains(te.element.consuming))return!0;var u=_e(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(s&&u.overflowX.match(/(scroll|auto)/)){var h=c.scrollWidth-c.clientWidth;if(h>0&&(c.scrollLeft>0&&s<0||c.scrollLeft<h&&s>0))return!0}c=c.parentNode}return!1}function a(o){var s=i(o),l=s[0],c=s[1];if(!n(o.target,l,c)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?e.scrollTop-=c*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=c*t.settings.wheelSpeed,u=!0):(e.scrollTop-=c*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),He(t),u=u||r(l,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",a):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",a)}function Mn(t){if(!ct.supportsTouch&&!ct.supportsIePointer)return;var e=t.element,r={startOffset:{},startTime:0,speed:{},easingLoop:null};function i(d,h){var f=Math.floor(e.scrollTop),m=e.scrollLeft,g=Math.abs(d),y=Math.abs(h);if(y>g){if(h<0&&f===t.contentHeight-t.containerHeight||h>0&&f===0)return window.scrollY===0&&h>0&&ct.isChrome}else if(g>y&&(d<0&&m===t.contentWidth-t.containerWidth||d>0&&m===0))return!0;return!0}function n(d,h){e.scrollTop-=h,e.scrollLeft-=d,He(t)}function a(d){return d.targetTouches?d.targetTouches[0]:d}function o(d){return d.target===t.scrollbarX||d.target===t.scrollbarY||d.pointerType&&d.pointerType==="pen"&&d.buttons===0?!1:!!(d.targetTouches&&d.targetTouches.length===1||d.pointerType&&d.pointerType!=="mouse"&&d.pointerType!==d.MSPOINTER_TYPE_MOUSE)}function s(d){if(o(d)){var h=a(d);r.startOffset.pageX=h.pageX,r.startOffset.pageY=h.pageY,r.startTime=new Date().getTime(),r.easingLoop!==null&&clearInterval(r.easingLoop)}}function l(d,h,f){if(!e.contains(d))return!1;for(var m=d;m&&m!==e;){if(m.classList.contains(te.element.consuming))return!0;var g=_e(m);if(f&&g.overflowY.match(/(scroll|auto)/)){var y=m.scrollHeight-m.clientHeight;if(y>0&&(m.scrollTop>0&&f<0||m.scrollTop<y&&f>0))return!0}if(h&&g.overflowX.match(/(scroll|auto)/)){var A=m.scrollWidth-m.clientWidth;if(A>0&&(m.scrollLeft>0&&h<0||m.scrollLeft<A&&h>0))return!0}m=m.parentNode}return!1}function c(d){if(o(d)){var h=a(d),f={pageX:h.pageX,pageY:h.pageY},m=f.pageX-r.startOffset.pageX,g=f.pageY-r.startOffset.pageY;if(l(d.target,m,g))return;n(m,g),r.startOffset=f;var y=new Date().getTime(),A=y-r.startTime;A>0&&(r.speed.x=m/A,r.speed.y=g/A,r.startTime=y),i(m,g)&&d.cancelable&&d.preventDefault()}}function u(){t.settings.swipeEasing&&(clearInterval(r.easingLoop),r.easingLoop=setInterval(function(){if(t.isInitialized){clearInterval(r.easingLoop);return}if(!r.speed.x&&!r.speed.y){clearInterval(r.easingLoop);return}if(Math.abs(r.speed.x)<.01&&Math.abs(r.speed.y)<.01){clearInterval(r.easingLoop);return}n(r.speed.x*30,r.speed.y*30),r.speed.x*=.8,r.speed.y*=.8},10))}ct.supportsTouch?(t.event.bind(e,"touchstart",s),t.event.bind(e,"touchmove",c),t.event.bind(e,"touchend",u)):ct.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",s),t.event.bind(e,"pointermove",c),t.event.bind(e,"pointerup",u)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",s),t.event.bind(e,"MSPointerMove",c),t.event.bind(e,"MSPointerUp",u)))}var On=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},In={"click-rail":Dn,"drag-thumb":Ln,keyboard:Cn,wheel:_n,touch:Mn},Ht=function(e,r){var i=this;if(r===void 0&&(r={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(te.main),this.settings=On();for(var n in r)this.settings[n]=r[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var a=function(){return e.classList.add(te.state.focus)},o=function(){return e.classList.remove(te.state.focus)};this.isRtl=_e(e).direction==="rtl",this.isRtl===!0&&e.classList.add(te.rtl),this.isNegativeScroll=(function(){var c=e.scrollLeft,u=null;return e.scrollLeft=-1,u=e.scrollLeft<0,e.scrollLeft=c,u})(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new bt,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=$t(te.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=$t(te.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",a),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var s=_e(this.scrollbarXRail);this.scrollbarXBottom=parseInt(s.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=V(s.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=V(s.borderLeftWidth)+V(s.borderRightWidth),pe(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=V(s.marginLeft)+V(s.marginRight),pe(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=$t(te.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=$t(te.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",a),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=_e(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=V(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?xn(this.scrollbarY):null,this.railBorderYWidth=V(l.borderTopWidth)+V(l.borderBottomWidth),pe(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=V(l.marginTop)+V(l.marginBottom),pe(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return In[c](i)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(c){return i.onScroll(c)}),He(this)};Ht.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,pe(this.scrollbarXRail,{display:"block"}),pe(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=V(_e(this.scrollbarXRail).marginLeft)+V(_e(this.scrollbarXRail).marginRight),this.railYMarginHeight=V(_e(this.scrollbarYRail).marginTop)+V(_e(this.scrollbarYRail).marginBottom),pe(this.scrollbarXRail,{display:"none"}),pe(this.scrollbarYRail,{display:"none"}),He(this),ar(this,"top",0,!1,!0),ar(this,"left",0,!1,!0),pe(this.scrollbarXRail,{display:""}),pe(this.scrollbarYRail,{display:""}))};Ht.prototype.onScroll=function(e){this.isAlive&&(He(this),ar(this,"top",this.element.scrollTop-this.lastScrollTop),ar(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Ht.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),ut(this.scrollbarX),ut(this.scrollbarY),ut(this.scrollbarXRail),ut(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Ht.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const xr="ave.stickySidebar",Di=()=>{try{return window.localStorage}catch{return null}},qn=(t,e)=>{const r=t.map(i=>({element:i,transition:i?.style.transition,webkit:i?.style.WebkitTransition,moz:i?.style.MozTransition}));r.forEach(({element:i})=>{i&&(i.style.WebkitTransition="none",i.style.MozTransition="none",i.style.transition="none")}),e(),r.forEach(({element:i,transition:n,webkit:a,moz:o})=>{i&&(i.style.WebkitTransition=a||"",i.style.MozTransition=o||"",i.style.transition=n||"")})};function Pn(){const t=document.querySelector(".app"),e=document.querySelector(".side-menu"),r=document.querySelector(".ave-navbar"),i=document.getElementById("ave-loader"),n=document.querySelector(".hamburger"),a=document.querySelector(".fadetoblack"),o=e?.querySelector('[data-ave-menu="container"]')||document.querySelector(".ave-sidebar__menu");if(!t||!e||!r||!n)return;let s=null;const l=()=>{s&&window.requestAnimationFrame(()=>{s?.update()})},c=f=>{const m=Di();if(m){if(f){m.setItem(xr,"true");return}m.removeItem(xr)}},u=(f,m={suppressPersist:!1})=>{t.classList.toggle("expanded",f),n.classList.toggle("is-active",f),m.suppressPersist||c(f),l()};qn([e,t,r],()=>{if(!(window.innerWidth>768&&Di()?.getItem(xr)==="true")){u(!1,{suppressPersist:!0});return}t.classList.add("expanded","no-animation"),n.classList.add("is-active","no-animation"),i&&(i.style.left=`${e.clientWidth/2}px`)}),a&&a.addEventListener("click",()=>{u(!1)}),n.addEventListener("click",f=>{f.preventDefault();const m=!t.classList.contains("expanded");u(m)}),o&&(s=new Ht(o,{wheelPropagation:!1,suppressScrollX:!0}),window.addEventListener("resize",()=>{l()},{passive:!0}));const d=document.querySelectorAll(".ave-sidebar__toggle"),h=(f,m)=>{if(!f)return;if(f.removeAttribute("data-ave-animating"),m){f.classList.add("ave-sidebar__submenu--open"),f.style.maxHeight="0px",requestAnimationFrame(()=>{const b=f.scrollHeight;f.style.maxHeight=`${b}px`,l()});const A=b=>{b.propertyName==="max-height"&&(f.style.maxHeight="none",f.removeEventListener("transitionend",A),l())};f.addEventListener("transitionend",A);return}const g=f.scrollHeight;f.style.maxHeight=`${g}px`,requestAnimationFrame(()=>{f.classList.remove("ave-sidebar__submenu--open"),f.style.maxHeight="0px",l()});const y=A=>{A.propertyName==="max-height"&&(f.style.maxHeight="0px",f.removeEventListener("transitionend",y),l())};f.addEventListener("transitionend",y)};d.forEach(f=>{const m=f.closest('[data-ave-menu="item"]'),g=f.getAttribute("data-ave-submenu"),y=g?document.getElementById(g):null;if(!m||!y)return;const A=f.getAttribute("aria-expanded")==="true";m.classList.toggle("ave-sidebar__item--expanded",A),y.classList.toggle("ave-sidebar__submenu--open",A),y.style.maxHeight=A?"none":"0px",f.setAttribute("aria-expanded",String(A)),l(),f.addEventListener("click",b=>{b.preventDefault();const O=f.getAttribute("aria-expanded")!=="true";f.setAttribute("aria-expanded",String(O)),m.classList.toggle("ave-sidebar__item--expanded",O),h(y,O)})})}function kn(){const t=document.querySelector(".ave-navbar__right .dropdown.profile"),e=t?.querySelector(".dropdown-toggle"),r=t?.querySelector(".dropdown-menu");if(!t||!e||!r)return;const i=()=>{t.classList.remove("open"),e.setAttribute("aria-expanded","false")};e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const a=t.classList.toggle("open");e.setAttribute("aria-expanded",String(a))}),document.addEventListener("click",n=>{t.contains(n.target)||i()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&i()})}function ga(t=document){t.querySelectorAll(".form-field-default").forEach(e=>{const r=e.querySelector("input");r&&(r.addEventListener("focus",()=>e.classList.add("focused")),r.addEventListener("blur",()=>e.classList.remove("focused")))})}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Li(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Li(Object(r),!0).forEach(function(i){Rn(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Li(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Qt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qt=function(e){return typeof e}:Qt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(t)}function Rn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Be(){return Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Be.apply(this,arguments)}function Nn(t,e){if(t==null)return{};var r={},i=Object.keys(t),n,a;for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Hn(t,e){if(t==null)return{};var r=Nn(t,e),i,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var Bn="1.15.6";function Ne(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Xe=Ne(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Bt=Ne(/Edge/i),Ci=Ne(/firefox/i),_t=Ne(/safari/i)&&!Ne(/chrome/i)&&!Ne(/android/i),di=Ne(/iP(ad|od|hone)/i),va=Ne(/chrome/i)&&Ne(/android/i),ya={capture:!1,passive:!1};function Y(t,e,r){t.addEventListener(e,r,!Xe&&ya)}function B(t,e,r){t.removeEventListener(e,r,!Xe&&ya)}function nr(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ba(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ae(t,e,r,i){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&nr(t,e):nr(t,e))||i&&t===r)return t;if(t===r)break}while(t=ba(t))}return null}var _i=/\s+/g;function ge(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(_i," ").replace(" "+e+" "," ");t.className=(i+(r?" "+e:"")).replace(_i," ")}}function q(t,e,r){var i=t&&t.style;if(i){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=r+(typeof r=="string"?"":"px")}}function mt(t,e){var r="";if(typeof t=="string")r=t;else do{var i=q(t,"transform");i&&i!=="none"&&(r=i+" "+r)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(r)}function wa(t,e,r){if(t){var i=t.getElementsByTagName(e),n=0,a=i.length;if(r)for(;n<a;n++)r(i[n],n);return i}return[]}function Me(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,r,i,n){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==Me()?(a=t.getBoundingClientRect(),o=a.top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(n=n||t.parentNode,!Xe))do if(n&&n.getBoundingClientRect&&(q(n,"transform")!=="none"||r&&q(n,"position")!=="static")){var h=n.getBoundingClientRect();o-=h.top+parseInt(q(n,"border-top-width")),s-=h.left+parseInt(q(n,"border-left-width")),l=o+a.height,c=s+a.width;break}while(n=n.parentNode);if(i&&t!==window){var f=mt(n||t),m=f&&f.a,g=f&&f.d;f&&(o/=g,s/=m,d/=m,u/=g,l=o+u,c=s+d)}return{top:o,left:s,bottom:l,right:c,width:d,height:u}}}function Mi(t,e,r){for(var i=ze(t,!0),n=re(t)[e];i;){var a=re(i)[r],o=void 0;if(o=n>=a,!o)return i;if(i===Me())break;i=ze(i,!1)}return!1}function yt(t,e,r,i){for(var n=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==_.ghost&&(i||o[a]!==_.dragged)&&Ae(o[a],r.draggable,t,!1)){if(n===e)return o[a];n++}a++}return null}function ui(t,e){for(var r=t.lastElementChild;r&&(r===_.ghost||q(r,"display")==="none"||e&&!nr(r,e));)r=r.previousElementSibling;return r||null}function we(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_.clone&&(!e||nr(t,e))&&r++;return r}function Oi(t){var e=0,r=0,i=Me();if(t)do{var n=mt(t),a=n.a,o=n.d;e+=t.scrollLeft*a,r+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,r]}function Xn(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[r][i])return Number(r)}return-1}function ze(t,e){if(!t||!t.getBoundingClientRect)return Me();var r=t,i=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var n=q(r);if(r.clientWidth<r.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Me();if(i||e)return r;i=!0}}while(r=r.parentNode);return Me()}function Yn(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Ar(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Mt;function Ea(t,e){return function(){if(!Mt){var r=arguments,i=this;r.length===1?t.call(i,r[0]):t.apply(i,r),Mt=setTimeout(function(){Mt=void 0},e)}}}function Wn(){clearTimeout(Mt),Mt=void 0}function Sa(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Ta(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function xa(t,e,r){var i={};return Array.from(t.children).forEach(function(n){var a,o,s,l;if(!(!Ae(n,e.draggable,t,!1)||n.animated||n===r)){var c=re(n);i.left=Math.min((a=i.left)!==null&&a!==void 0?a:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var me="Sortable"+new Date().getTime();function $n(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(q(n,"display")==="none"||n===_.ghost)){t.push({target:n,rect:re(n)});var a=qe({},t[t.length-1].rect);if(n.thisAnimationDuration){var o=mt(n,!0);o&&(a.top-=o.f,a.left-=o.e)}n.fromRect=a}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Xn(t,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var a=!1,o=0;t.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=re(c),h=c.prevFromRect,f=c.prevToRect,m=s.rect,g=mt(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&Ar(h,d)&&!Ar(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=zn(m,h,f,n.options)),Ar(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=n.options.animation),n.animate(c,m,d,l)),l&&(a=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),t=[]},animate:function(i,n,a,o){if(o){q(i,"transition",""),q(i,"transform","");var s=mt(this.el),l=s&&s.a,c=s&&s.d,u=(n.left-a.left)/(l||1),d=(n.top-a.top)/(c||1);i.animatingX=!!u,i.animatingY=!!d,q(i,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Fn(i),q(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),q(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){q(i,"transition",""),q(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Fn(t){return t.offsetWidth}function zn(t,e,r,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*i.animation}var ot=[],Dr={initializeByDefault:!0},Xt={mount:function(e){for(var r in Dr)Dr.hasOwnProperty(r)&&!(r in e)&&(e[r]=Dr[r]);ot.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ot.push(e)},pluginEvent:function(e,r,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var a=e+"Global";ot.forEach(function(o){r[o.pluginName]&&(r[o.pluginName][a]&&r[o.pluginName][a](qe({sortable:r},i)),r.options[o.pluginName]&&r[o.pluginName][e]&&r[o.pluginName][e](qe({sortable:r},i)))})},initializePlugins:function(e,r,i,n){ot.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Be(i,c.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,r){var i={};return ot.forEach(function(n){typeof n.eventProperties=="function"&&Be(i,n.eventProperties.call(r[n.pluginName],e))}),i},modifyOption:function(e,r,i){var n;return ot.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[r]=="function"&&(n=a.optionListeners[r].call(e[a.pluginName],i))}),n}};function jn(t){var e=t.sortable,r=t.rootEl,i=t.name,n=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,m=t.extraEventProperties;if(e=e||r&&r[me],!!e){var g,y=e.options,A="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Xe&&!Bt?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=o||r,g.from=s||r,g.item=n||r,g.clone=a,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var b=qe(qe({},m),Xt.getEventProperties(i,e));for(var O in b)g[O]=b[O];r&&r.dispatchEvent(g),y[A]&&y[A].call(e,g)}}var Un=["evt"],ue=function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,a=Hn(i,Un);Xt.pluginEvent.bind(_)(e,r,qe({dragEl:w,parentEl:J,ghostEl:R,rootEl:F,nextEl:rt,lastDownEl:er,cloneEl:K,cloneHidden:$e,dragStarted:At,putSortable:se,activeSortable:_.active,originalEvent:n,oldIndex:ht,oldDraggableIndex:Ot,newIndex:ve,newDraggableIndex:We,hideGhostForTarget:Ca,unhideGhostForTarget:_a,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(s){de({sortable:r,name:s,originalEvent:n})}},a))};function de(t){jn(qe({putSortable:se,cloneEl:K,targetEl:w,rootEl:F,oldIndex:ht,oldDraggableIndex:Ot,newIndex:ve,newDraggableIndex:We},t))}var w,J,R,F,rt,er,K,$e,ht,ve,Ot,We,jt,se,dt=!1,or=!1,sr=[],Ze,Te,Lr,Cr,Ii,qi,At,st,It,qt=!1,Ut=!1,tr,ce,_r=[],$r=!1,lr=[],gr=typeof document<"u",Kt=di,Pi=Bt||Xe?"cssFloat":"float",Kn=gr&&!va&&!di&&"draggable"in document.createElement("div"),Aa=(function(){if(gr){if(Xe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),Da=function(e,r){var i=q(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=yt(e,0,r),o=yt(e,1,r),s=a&&q(a),l=o&&q(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+re(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=n&&i[Pi]==="none"||o&&i[Pi]==="none"&&c+u>n)?"vertical":"horizontal"},Vn=function(e,r,i){var n=i?e.left:e.top,a=i?e.right:e.bottom,o=i?e.width:e.height,s=i?r.left:r.top,l=i?r.right:r.bottom,c=i?r.width:r.height;return n===s||a===l||n+o/2===s+c/2},Gn=function(e,r){var i;return sr.some(function(n){var a=n[me].options.emptyInsertThreshold;if(!(!a||ui(n))){var o=re(n),s=e>=o.left-a&&e<=o.right+a,l=r>=o.top-a&&r<=o.bottom+a;if(s&&l)return i=n}}),i},La=function(e){function r(a,o){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(o||d))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return r(a(s,l,c,u),o)(s,l,c,u);var h=(o?s:l).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var i={},n=e.group;(!n||Qt(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=r(n.pull,!0),i.checkPut=r(n.put),i.revertClone=n.revertClone,e.group=i},Ca=function(){!Aa&&R&&q(R,"display","none")},_a=function(){!Aa&&R&&q(R,"display","")};gr&&!va&&document.addEventListener("click",function(t){if(or)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),or=!1,!1},!0);var Qe=function(e){if(w){e=e.touches?e.touches[0]:e;var r=Gn(e.clientX,e.clientY);if(r){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=r,i.preventDefault=void 0,i.stopPropagation=void 0,r[me]._onDragOver(i)}}},Jn=function(e){w&&w.parentNode[me]._isOutsideThisEl(e.target)};function _(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Be({},e),t[me]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Da(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&(!_t||di),emptyInsertThreshold:5};Xt.initializePlugins(this,t,r);for(var i in r)!(i in e)&&(e[i]=r[i]);La(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:Kn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Y(t,"pointerdown",this._onTapStart):(Y(t,"mousedown",this._onTapStart),Y(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Y(t,"dragover",this),Y(t,"dragenter",this)),sr.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Be(this,$n())}_.prototype={constructor:_,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(st=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,w):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,i=this.el,n=this.options,a=n.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=n.filter;if(no(i),!w&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&_t&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ae(l,n.draggable,i,!1),!(l&&l.animated)&&er!==l)){if(ht=we(l),Ot=we(l,n.draggable),typeof u=="function"){if(u.call(this,e,l,this)){de({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),ue("filter",r,{evt:e}),a&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Ae(c,d.trim(),i,!1),d)return de({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),ue("filter",r,{evt:e}),!0}),u)){a&&e.preventDefault();return}n.handle&&!Ae(c,n.handle,i,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,r,i){var n=this,a=n.el,o=n.options,s=a.ownerDocument,l;if(i&&!w&&i.parentNode===a){var c=re(i);if(F=a,w=i,J=w.parentNode,rt=w.nextSibling,er=i,jt=o.group,_.dragged=w,Ze={target:w,clientX:(r||e).clientX,clientY:(r||e).clientY},Ii=Ze.clientX-c.left,qi=Ze.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,w.style["will-change"]="all",l=function(){if(ue("delayEnded",n,{evt:e}),_.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Ci&&n.nativeDraggable&&(w.draggable=!0),n._triggerDragStart(e,r),de({sortable:n,name:"choose",originalEvent:e}),ge(w,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){wa(w,u.trim(),Mr)}),Y(s,"dragover",Qe),Y(s,"mousemove",Qe),Y(s,"touchmove",Qe),o.supportPointer?(Y(s,"pointerup",n._onDrop),!this.nativeDraggable&&Y(s,"pointercancel",n._onDrop)):(Y(s,"mouseup",n._onDrop),Y(s,"touchend",n._onDrop),Y(s,"touchcancel",n._onDrop)),Ci&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0),ue("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Bt||Xe))){if(_.eventCanceled){this._onDrop();return}o.supportPointer?(Y(s,"pointerup",n._disableDelayedDrag),Y(s,"pointercancel",n._disableDelayedDrag)):(Y(s,"mouseup",n._disableDelayedDrag),Y(s,"touchend",n._disableDelayedDrag),Y(s,"touchcancel",n._disableDelayedDrag)),Y(s,"mousemove",n._delayedDragTouchMoveHandler),Y(s,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&Y(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&Mr(w),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._disableDelayedDrag),B(e,"touchend",this._disableDelayedDrag),B(e,"touchcancel",this._disableDelayedDrag),B(e,"pointerup",this._disableDelayedDrag),B(e,"pointercancel",this._disableDelayedDrag),B(e,"mousemove",this._delayedDragTouchMoveHandler),B(e,"touchmove",this._delayedDragTouchMoveHandler),B(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Y(document,"pointermove",this._onTouchMove):r?Y(document,"touchmove",this._onTouchMove):Y(document,"mousemove",this._onTouchMove):(Y(w,"dragend",this),Y(F,"dragstart",this._onDragStart));try{document.selection?rr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(dt=!1,F&&w){ue("dragStarted",this,{evt:r}),this.nativeDraggable&&Y(document,"dragover",Jn);var i=this.options;!e&&ge(w,i.dragClass,!1),ge(w,i.ghostClass,!0),_.active=this,e&&this._appendGhost(),de({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Te){this._lastX=Te.clientX,this._lastY=Te.clientY,Ca();for(var e=document.elementFromPoint(Te.clientX,Te.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Te.clientX,Te.clientY),e!==r);)r=e;if(w.parentNode[me]._isOutsideThisEl(e),r)do{if(r[me]){var i=void 0;if(i=r[me]._onDragOver({clientX:Te.clientX,clientY:Te.clientY,target:e,rootEl:r}),i&&!this.options.dragoverBubble)break}e=r}while(r=ba(r));_a()}},_onTouchMove:function(e){if(Ze){var r=this.options,i=r.fallbackTolerance,n=r.fallbackOffset,a=e.touches?e.touches[0]:e,o=R&&mt(R,!0),s=R&&o&&o.a,l=R&&o&&o.d,c=Kt&&ce&&Oi(ce),u=(a.clientX-Ze.clientX+n.x)/(s||1)+(c?c[0]-_r[0]:0)/(s||1),d=(a.clientY-Ze.clientY+n.y)/(l||1)+(c?c[1]-_r[1]:0)/(l||1);if(!_.active&&!dt){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(R){o?(o.e+=u-(Lr||0),o.f+=d-(Cr||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");q(R,"webkitTransform",h),q(R,"mozTransform",h),q(R,"msTransform",h),q(R,"transform",h),Lr=u,Cr=d,Te=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!R){var e=this.options.fallbackOnBody?document.body:F,r=re(w,!0,Kt,!0,e),i=this.options;if(Kt){for(ce=e;q(ce,"position")==="static"&&q(ce,"transform")==="none"&&ce!==document;)ce=ce.parentNode;ce!==document.body&&ce!==document.documentElement?(ce===document&&(ce=Me()),r.top+=ce.scrollTop,r.left+=ce.scrollLeft):ce=Me(),_r=Oi(ce)}R=w.cloneNode(!0),ge(R,i.ghostClass,!1),ge(R,i.fallbackClass,!0),ge(R,i.dragClass,!0),q(R,"transition",""),q(R,"transform",""),q(R,"box-sizing","border-box"),q(R,"margin",0),q(R,"top",r.top),q(R,"left",r.left),q(R,"width",r.width),q(R,"height",r.height),q(R,"opacity","0.8"),q(R,"position",Kt?"absolute":"fixed"),q(R,"zIndex","100000"),q(R,"pointerEvents","none"),_.ghost=R,e.appendChild(R),q(R,"transform-origin",Ii/parseInt(R.style.width)*100+"% "+qi/parseInt(R.style.height)*100+"%")}},_onDragStart:function(e,r){var i=this,n=e.dataTransfer,a=i.options;if(ue("dragStart",this,{evt:e}),_.eventCanceled){this._onDrop();return}ue("setupClone",this),_.eventCanceled||(K=Ta(w),K.removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),ge(K,this.options.chosenClass,!1),_.clone=K),i.cloneId=rr(function(){ue("clone",i),!_.eventCanceled&&(i.options.removeCloneOnHide||F.insertBefore(K,w),i._hideClone(),de({sortable:i,name:"clone"}))}),!r&&ge(w,a.dragClass,!0),r?(or=!0,i._loopId=setInterval(i._emulateDragOver,50)):(B(document,"mouseup",i._onDrop),B(document,"touchend",i._onDrop),B(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(i,n,w)),Y(document,"drop",i),q(w,"transform","translateZ(0)")),dt=!0,i._dragStartId=rr(i._dragStarted.bind(i,r,e)),Y(document,"selectstart",i),At=!0,window.getSelection().removeAllRanges(),_t&&q(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,i=e.target,n,a,o,s=this.options,l=s.group,c=_.active,u=jt===l,d=s.sort,h=se||c,f,m=this,g=!1;if($r)return;function y(Se,Ge){ue(Se,m,qe({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:n,targetRect:a,canSort:d,fromSortable:h,target:i,completed:b,onMove:function(Je,ke){return Vt(F,r,w,n,Je,re(Je),e,ke)},changed:O},Ge))}function A(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function b(Se){return y("dragOverCompleted",{insertion:Se}),Se&&(u?c._hideClone():c._showClone(m),m!==h&&(ge(w,se?se.options.ghostClass:c.options.ghostClass,!1),ge(w,s.ghostClass,!0)),se!==m&&m!==_.active?se=m:m===_.active&&se&&(se=null),h===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===w&&!w.animated||i===r&&!i.animated)&&(st=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(w.parentNode[me]._isOutsideThisEl(e.target),!Se&&Qe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function O(){ve=we(w),We=we(w,s.draggable),de({sortable:m,name:"change",toEl:r,newIndex:ve,newDraggableIndex:We,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ae(i,s.draggable,r,!0),y("dragOver"),_.eventCanceled)return g;if(w.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return b(!1);if(or=!1,c&&!s.disabled&&(u?d||(o=J!==F):se===this||(this.lastPutMode=jt.checkPull(this,c,w,e))&&l.checkPut(this,c,w,e))){if(f=this._getDirection(e,i)==="vertical",n=re(w),y("dragOverValid"),_.eventCanceled)return g;if(o)return J=F,A(),this._hideClone(),y("revert"),_.eventCanceled||(rt?F.insertBefore(w,rt):F.appendChild(w)),b(!0);var S=ui(r,s.draggable);if(!S||to(e,f,this)&&!S.animated){if(S===w)return b(!1);if(S&&r===e.target&&(i=S),i&&(a=re(i)),Vt(F,r,w,n,i,a,e,!!i)!==!1)return A(),S&&S.nextSibling?r.insertBefore(w,S.nextSibling):r.appendChild(w),J=r,O(),b(!0)}else if(S&&eo(e,f,this)){var v=yt(r,0,s,!0);if(v===w)return b(!1);if(i=v,a=re(i),Vt(F,r,w,n,i,a,e,!1)!==!1)return A(),r.insertBefore(w,v),J=r,O(),b(!0)}else if(i.parentNode===r){a=re(i);var p=0,x,M=w.parentNode!==r,I=!Vn(w.animated&&w.toRect||n,i.animated&&i.toRect||a,f),U=f?"top":"left",W=Mi(i,"top","top")||Mi(w,"top","top"),le=W?W.scrollTop:void 0;st!==i&&(x=a[U],qt=!1,Ut=!I&&s.invertSwap||M),p=ro(e,i,a,f,I?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ut,st===i);var Z;if(p!==0){var Q=we(w);do Q-=p,Z=J.children[Q];while(Z&&(q(Z,"display")==="none"||Z===R))}if(p===0||Z===i)return b(!1);st=i,It=p;var G=i.nextElementSibling,ne=!1;ne=p===1;var Ee=Vt(F,r,w,n,i,a,e,ne);if(Ee!==!1)return(Ee===1||Ee===-1)&&(ne=Ee===1),$r=!0,setTimeout(Qn,30),A(),ne&&!G?r.appendChild(w):i.parentNode.insertBefore(w,ne?G:i),W&&Sa(W,0,le-W.scrollTop),J=w.parentNode,x!==void 0&&!Ut&&(tr=Math.abs(x-re(i)[U])),O(),b(!0)}if(r.contains(w))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove),B(document,"touchmove",this._onTouchMove),B(document,"pointermove",this._onTouchMove),B(document,"dragover",Qe),B(document,"mousemove",Qe),B(document,"touchmove",Qe)},_offUpEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._onDrop),B(e,"touchend",this._onDrop),B(e,"pointerup",this._onDrop),B(e,"pointercancel",this._onDrop),B(e,"touchcancel",this._onDrop),B(document,"selectstart",this)},_onDrop:function(e){var r=this.el,i=this.options;if(ve=we(w),We=we(w,i.draggable),ue("drop",this,{evt:e}),J=w&&w.parentNode,ve=we(w),We=we(w,i.draggable),_.eventCanceled){this._nulling();return}dt=!1,Ut=!1,qt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fr(this.cloneId),Fr(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_t&&q(document.body,"user-select",""),q(w,"transform",""),e&&(At&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(F===J||se&&se.lastPutMode!=="clone")&&K&&K.parentNode&&K.parentNode.removeChild(K),w&&(this.nativeDraggable&&B(w,"dragend",this),Mr(w),w.style["will-change"]="",At&&!dt&&ge(w,se?se.options.ghostClass:this.options.ghostClass,!1),ge(w,this.options.chosenClass,!1),de({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),F!==J?(ve>=0&&(de({rootEl:J,name:"add",toEl:J,fromEl:F,originalEvent:e}),de({sortable:this,name:"remove",toEl:J,originalEvent:e}),de({rootEl:J,name:"sort",toEl:J,fromEl:F,originalEvent:e}),de({sortable:this,name:"sort",toEl:J,originalEvent:e})),se&&se.save()):ve!==ht&&ve>=0&&(de({sortable:this,name:"update",toEl:J,originalEvent:e}),de({sortable:this,name:"sort",toEl:J,originalEvent:e})),_.active&&((ve==null||ve===-1)&&(ve=ht,We=Ot),de({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ue("nulling",this),F=w=J=R=rt=K=er=$e=Ze=Te=At=ve=We=ht=Ot=st=It=se=jt=_.dragged=_.ghost=_.clone=_.active=null,lr.forEach(function(e){e.checked=!0}),lr.length=Lr=Cr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":w&&(this._onDragOver(e),Zn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,i=this.el.children,n=0,a=i.length,o=this.options;n<a;n++)r=i[n],Ae(r,o.draggable,this.el,!1)&&e.push(r.getAttribute(o.dataIdAttr)||ao(r));return e},sort:function(e,r){var i={},n=this.el;this.toArray().forEach(function(a,o){var s=n.children[o];Ae(s,this.options.draggable,n,!1)&&(i[a]=s)},this),r&&this.captureAnimationState(),e.forEach(function(a){i[a]&&(n.removeChild(i[a]),n.appendChild(i[a]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Ae(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var i=this.options;if(r===void 0)return i[e];var n=Xt.modifyOption(this,e,r);typeof n<"u"?i[e]=n:i[e]=r,e==="group"&&La(i)},destroy:function(){ue("destroy",this);var e=this.el;e[me]=null,B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart),B(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sr.splice(sr.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(ue("hideClone",this),_.eventCanceled)return;q(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(ue("showClone",this),_.eventCanceled)return;w.parentNode==F&&!this.options.group.revertClone?F.insertBefore(K,w):rt?F.insertBefore(K,rt):F.appendChild(K),this.options.group.revertClone&&this.animate(w,K),q(K,"display",""),$e=!1}}};function Zn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Vt(t,e,r,i,n,a,o,s){var l,c=t[me],u=c.options.onMove,d;return window.CustomEvent&&!Xe&&!Bt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=i,l.related=n||e,l.relatedRect=a||re(e),l.willInsertAfter=s,l.originalEvent=o,t.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function Mr(t){t.draggable=!1}function Qn(){$r=!1}function eo(t,e,r){var i=re(yt(r.el,0,r.options,!0)),n=xa(r.el,r.options,R),a=10;return e?t.clientX<n.left-a||t.clientY<i.top&&t.clientX<i.right:t.clientY<n.top-a||t.clientY<i.bottom&&t.clientX<i.left}function to(t,e,r){var i=re(ui(r.el,r.options.draggable)),n=xa(r.el,r.options,R),a=10;return e?t.clientX>n.right+a||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>n.bottom+a||t.clientX>i.right&&t.clientY>i.top}function ro(t,e,r,i,n,a,o,s){var l=i?t.clientY:t.clientX,c=i?r.height:r.width,u=i?r.top:r.left,d=i?r.bottom:r.right,h=!1;if(!o){if(s&&tr<c*n){if(!qt&&(It===1?l>u+c*a/2:l<d-c*a/2)&&(qt=!0),qt)h=!0;else if(It===1?l<u+tr:l>d-tr)return-It}else if(l>u+c*(1-n)/2&&l<d-c*(1-n)/2)return io(e)}return h=h||o,h&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}function io(t){return we(w)<we(t)?1:-1}function ao(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,i=0;r--;)i+=e.charCodeAt(r);return i.toString(36)}function no(t){lr.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var i=e[r];i.checked&&lr.push(i)}}function rr(t){return setTimeout(t,0)}function Fr(t){return clearTimeout(t)}gr&&Y(document,"touchmove",function(t){(_.active||dt)&&t.cancelable&&t.preventDefault()});_.utils={on:Y,off:B,css:q,find:wa,is:function(e,r){return!!Ae(e,r,e,!1)},extend:Yn,throttle:Ea,closest:Ae,toggleClass:ge,clone:Ta,index:we,nextTick:rr,cancelNextTick:Fr,detectDirection:Da,getChild:yt,expando:me};_.get=function(t){return t[me]};_.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(_.utils=qe(qe({},_.utils),i.utils)),Xt.mount(i)})};_.create=function(t,e){return new _(t,e)};_.version=Bn;var ee=[],Dt,zr,jr=!1,Or,Ir,cr,Lt;function oo(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var i=r.originalEvent;this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Y(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Y(document,"touchmove",this._handleFallbackAutoScroll):Y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var i=r.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,"mousemove",this._handleFallbackAutoScroll)),ki(),ir(),Wn()},nulling:function(){cr=zr=Dt=jr=Lt=Or=Ir=null,ee.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,i){var n=this,a=(r.touches?r.touches[0]:r).clientX,o=(r.touches?r.touches[0]:r).clientY,s=document.elementFromPoint(a,o);if(cr=r,i||this.options.forceAutoScrollFallback||Bt||Xe||_t){qr(r,this.options,s,i);var l=ze(s,!0);jr&&(!Lt||a!==Or||o!==Ir)&&(Lt&&ki(),Lt=setInterval(function(){var c=ze(document.elementFromPoint(a,o),!0);c!==l&&(l=c,ir()),qr(r,n.options,c,i)},10),Or=a,Ir=o)}else{if(!this.options.bubbleScroll||ze(s,!0)===Me()){ir();return}qr(r,this.options,ze(s,!1),!1)}}},Be(t,{pluginName:"scroll",initializeByDefault:!0})}function ir(){ee.forEach(function(t){clearInterval(t.pid)}),ee=[]}function ki(){clearInterval(Lt)}var qr=Ea(function(t,e,r,i){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,l=Me(),c=!1,u;zr!==r&&(zr=r,ir(),Dt=e.scroll,u=e.scrollFn,Dt===!0&&(Dt=ze(r,!0)));var d=0,h=Dt;do{var f=h,m=re(f),g=m.top,y=m.bottom,A=m.left,b=m.right,O=m.width,S=m.height,v=void 0,p=void 0,x=f.scrollWidth,M=f.scrollHeight,I=q(f),U=f.scrollLeft,W=f.scrollTop;f===l?(v=O<x&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),p=S<M&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(v=O<x&&(I.overflowX==="auto"||I.overflowX==="scroll"),p=S<M&&(I.overflowY==="auto"||I.overflowY==="scroll"));var le=v&&(Math.abs(b-n)<=o&&U+O<x)-(Math.abs(A-n)<=o&&!!U),Z=p&&(Math.abs(y-a)<=o&&W+S<M)-(Math.abs(g-a)<=o&&!!W);if(!ee[d])for(var Q=0;Q<=d;Q++)ee[Q]||(ee[Q]={});(ee[d].vx!=le||ee[d].vy!=Z||ee[d].el!==f)&&(ee[d].el=f,ee[d].vx=le,ee[d].vy=Z,clearInterval(ee[d].pid),(le!=0||Z!=0)&&(c=!0,ee[d].pid=setInterval((function(){i&&this.layer===0&&_.active._onTouchMove(cr);var G=ee[this.layer].vy?ee[this.layer].vy*s:0,ne=ee[this.layer].vx?ee[this.layer].vx*s:0;typeof u=="function"&&u.call(_.dragged.parentNode[me],ne,G,t,cr,ee[this.layer].el)!=="continue"||Sa(ee[this.layer].el,ne,G)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=ze(h,!1)));jr=c}},30),Ma=function(e){var r=e.originalEvent,i=e.putSortable,n=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=i||a;s();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function hi(){}hi.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=yt(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(r,n):this.sortable.el.appendChild(r),this.sortable.animateAll(),i&&i.animateAll()},drop:Ma};Be(hi,{pluginName:"revertOnSpill"});function fi(){}fi.prototype={onSpill:function(e){var r=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),n.animateAll()},drop:Ma};Be(fi,{pluginName:"removeOnSpill"});_.mount(new oo);_.mount(fi,hi);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Ri(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ri(Object(r),!0).forEach(function(i){uo(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function so(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ia(t){var e=so(t,"string");return typeof e=="symbol"?e:e+""}function Ur(t){"@babel/helpers - typeof";return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(t)}function lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ni(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ia(i.key),i)}}function co(t,e,r){return e&&Ni(t.prototype,e),r&&Ni(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uo(t,e,r){return e=Ia(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qa(t){return ho(t)||fo(t)||po(t)||mo()}function ho(t){if(Array.isArray(t))return Kr(t)}function fo(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function po(t,e){if(t){if(typeof t=="string")return Kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(t,e)}}function Kr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function mo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vr=typeof window<"u"&&typeof window.document<"u",Pe=vr?window:{},pi=vr&&Pe.document.documentElement?"ontouchstart"in Pe.document.documentElement:!1,mi=vr?"PointerEvent"in Pe:!1,z="cropper",gi="all",Pa="crop",ka="move",Ra="zoom",et="e",tt="w",lt="s",Ye="n",Et="ne",St="nw",Tt="se",xt="sw",Vr="".concat(z,"-crop"),Hi="".concat(z,"-disabled"),fe="".concat(z,"-hidden"),Bi="".concat(z,"-hide"),go="".concat(z,"-invisible"),dr="".concat(z,"-modal"),Gr="".concat(z,"-move"),kt="".concat(z,"Action"),Gt="".concat(z,"Preview"),vi="crop",Na="move",Ha="none",Jr="crop",Zr="cropend",Qr="cropmove",ei="cropstart",Xi="dblclick",vo=pi?"touchstart":"mousedown",yo=pi?"touchmove":"mousemove",bo=pi?"touchend touchcancel":"mouseup",Yi=mi?"pointerdown":vo,Wi=mi?"pointermove":yo,$i=mi?"pointerup pointercancel":bo,Fi="ready",zi="resize",ji="wheel",ti="zoom",Ui="image/jpeg",wo=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Eo=/^data:/,So=/^data:image\/jpeg;base64,/,To=/^img|canvas$/i,Ba=200,Xa=100,Ki={viewMode:0,dragMode:vi,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ba,minContainerHeight:Xa,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},xo='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ao=Number.isNaN||Pe.isNaN;function X(t){return typeof t=="number"&&!Ao(t)}var Vi=function(e){return e>0&&e<1/0};function Pr(t){return typeof t>"u"}function at(t){return Ur(t)==="object"&&t!==null}var Do=Object.prototype.hasOwnProperty;function ft(t){if(!at(t))return!1;try{var e=t.constructor,r=e.prototype;return e&&r&&Do.call(r,"isPrototypeOf")}catch{return!1}}function he(t){return typeof t=="function"}var Lo=Array.prototype.slice;function Ya(t){return Array.from?Array.from(t):Lo.call(t)}function ie(t,e){return t&&he(e)&&(Array.isArray(t)||X(t.length)?Ya(t).forEach(function(r,i){e.call(t,r,i,t)}):at(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)})),t}var j=Object.assign||function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return at(e)&&i.length>0&&i.forEach(function(a){at(a)&&Object.keys(a).forEach(function(o){e[o]=a[o]})}),e},Co=/\.\d*(?:0|9){12}\d*$/;function gt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Co.test(t)?Math.round(t*e)/e:t}var _o=/^width|height|left|top|marginLeft|marginTop$/;function je(t,e){var r=t.style;ie(e,function(i,n){_o.test(n)&&X(i)&&(i="".concat(i,"px")),r[n]=i})}function Mo(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function oe(t,e){if(e){if(X(t.length)){ie(t,function(i){oe(i,e)});return}if(t.classList){t.classList.add(e);return}var r=t.className.trim();r?r.indexOf(e)<0&&(t.className="".concat(r," ").concat(e)):t.className=e}}function Oe(t,e){if(e){if(X(t.length)){ie(t,function(r){Oe(r,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function pt(t,e,r){if(e){if(X(t.length)){ie(t,function(i){pt(i,e,r)});return}r?oe(t,e):Oe(t,e)}}var Oo=/([a-z\d])([A-Z])/g;function yi(t){return t.replace(Oo,"$1-$2").toLowerCase()}function ri(t,e){return at(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(yi(e)))}function Rt(t,e,r){at(r)?t[e]=r:t.dataset?t.dataset[e]=r:t.setAttribute("data-".concat(yi(e)),r)}function Io(t,e){if(at(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(yi(e)))}var Wa=/\s\s*/,$a=(function(){var t=!1;if(vr){var e=!1,r=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(a){e=a}});Pe.addEventListener("test",r,i),Pe.removeEventListener("test",r,i)}return t})();function xe(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=r;e.trim().split(Wa).forEach(function(a){if(!$a){var o=t.listeners;o&&o[a]&&o[a][r]&&(n=o[a][r],delete o[a][r],Object.keys(o[a]).length===0&&delete o[a],Object.keys(o).length===0&&delete t.listeners)}t.removeEventListener(a,n,i)})}function be(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=r;e.trim().split(Wa).forEach(function(a){if(i.once&&!$a){var o=t.listeners,s=o===void 0?{}:o;n=function(){delete s[a][r],t.removeEventListener(a,n,i);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];r.apply(t,u)},s[a]||(s[a]={}),s[a][r]&&t.removeEventListener(a,s[a][r],i),s[a][r]=n,t.listeners=s}t.addEventListener(a,n,i)})}function vt(t,e,r){var i;return he(Event)&&he(CustomEvent)?i=new CustomEvent(e,{detail:r,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,r)),t.dispatchEvent(i)}function Fa(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var kr=Pe.location,qo=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Gi(t){var e=t.match(qo);return e!==null&&(e[1]!==kr.protocol||e[2]!==kr.hostname||e[3]!==kr.port)}function Ji(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Pt(t){var e=t.rotate,r=t.scaleX,i=t.scaleY,n=t.translateX,a=t.translateY,o=[];X(n)&&n!==0&&o.push("translateX(".concat(n,"px)")),X(a)&&a!==0&&o.push("translateY(".concat(a,"px)")),X(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),X(r)&&r!==1&&o.push("scaleX(".concat(r,")")),X(i)&&i!==1&&o.push("scaleY(".concat(i,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Po(t){var e=Oa({},t),r=0;return ie(t,function(i,n){delete e[n],ie(e,function(a){var o=Math.abs(i.startX-a.startX),s=Math.abs(i.startY-a.startY),l=Math.abs(i.endX-a.endX),c=Math.abs(i.endY-a.endY),u=Math.sqrt(o*o+s*s),d=Math.sqrt(l*l+c*c),h=(d-u)/u;Math.abs(h)>Math.abs(r)&&(r=h)})}),r}function Jt(t,e){var r=t.pageX,i=t.pageY,n={endX:r,endY:i};return e?n:Oa({startX:r,startY:i},n)}function ko(t){var e=0,r=0,i=0;return ie(t,function(n){var a=n.startX,o=n.startY;e+=a,r+=o,i+=1}),e/=i,r/=i,{pageX:e,pageY:r}}function Ue(t){var e=t.aspectRatio,r=t.height,i=t.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=Vi(i),o=Vi(r);if(a&&o){var s=r*e;n==="contain"&&s>i||n==="cover"&&s<i?r=i/e:i=r*e}else a?r=i/e:o&&(i=r*e);return{width:i,height:r}}function Ro(t){var e=t.width,r=t.height,i=t.degree;if(i=Math.abs(i)%180,i===90)return{width:r,height:e};var n=i%90*Math.PI/180,a=Math.sin(n),o=Math.cos(n),s=e*o+r*a,l=e*a+r*o;return i>90?{width:l,height:s}:{width:s,height:l}}function No(t,e,r,i){var n=e.aspectRatio,a=e.naturalWidth,o=e.naturalHeight,s=e.rotate,l=s===void 0?0:s,c=e.scaleX,u=c===void 0?1:c,d=e.scaleY,h=d===void 0?1:d,f=r.aspectRatio,m=r.naturalWidth,g=r.naturalHeight,y=i.fillColor,A=y===void 0?"transparent":y,b=i.imageSmoothingEnabled,O=b===void 0?!0:b,S=i.imageSmoothingQuality,v=S===void 0?"low":S,p=i.maxWidth,x=p===void 0?1/0:p,M=i.maxHeight,I=M===void 0?1/0:M,U=i.minWidth,W=U===void 0?0:U,le=i.minHeight,Z=le===void 0?0:le,Q=document.createElement("canvas"),G=Q.getContext("2d"),ne=Ue({aspectRatio:f,width:x,height:I}),Ee=Ue({aspectRatio:f,width:W,height:Z},"cover"),Se=Math.min(ne.width,Math.max(Ee.width,m)),Ge=Math.min(ne.height,Math.max(Ee.height,g)),wt=Ue({aspectRatio:n,width:x,height:I}),Je=Ue({aspectRatio:n,width:W,height:Z},"cover"),ke=Math.min(wt.width,Math.max(Je.width,a)),De=Math.min(wt.height,Math.max(Je.height,o)),yr=[-ke/2,-De/2,ke,De];return Q.width=gt(Se),Q.height=gt(Ge),G.fillStyle=A,G.fillRect(0,0,Se,Ge),G.save(),G.translate(Se/2,Ge/2),G.rotate(l*Math.PI/180),G.scale(u,h),G.imageSmoothingEnabled=O,G.imageSmoothingQuality=v,G.drawImage.apply(G,[t].concat(qa(yr.map(function(nt){return Math.floor(gt(nt))})))),G.restore(),Q}var za=String.fromCharCode;function Ho(t,e,r){var i="";r+=e;for(var n=e;n<r;n+=1)i+=za(t.getUint8(n));return i}var Bo=/^data:.*,/;function Xo(t){var e=t.replace(Bo,""),r=atob(e),i=new ArrayBuffer(r.length),n=new Uint8Array(i);return ie(n,function(a,o){n[o]=r.charCodeAt(o)}),i}function Yo(t,e){for(var r=[],i=8192,n=new Uint8Array(t);n.length>0;)r.push(za.apply(null,Ya(n.subarray(0,i)))),n=n.subarray(i);return"data:".concat(e,";base64,").concat(btoa(r.join("")))}function Wo(t){var e=new DataView(t),r;try{var i,n,a;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var o=e.byteLength,s=2;s+1<o;){if(e.getUint8(s)===255&&e.getUint8(s+1)===225){n=s;break}s+=1}if(n){var l=n+4,c=n+10;if(Ho(e,l,4)==="Exif"){var u=e.getUint16(c);if(i=u===18761,(i||u===19789)&&e.getUint16(c+2,i)===42){var d=e.getUint32(c+4,i);d>=8&&(a=c+d)}}}if(a){var h=e.getUint16(a,i),f,m;for(m=0;m<h;m+=1)if(f=a+m*12+2,e.getUint16(f,i)===274){f+=8,r=e.getUint16(f,i),e.setUint16(f,1,i);break}}}catch{r=1}return r}function $o(t){var e=0,r=1,i=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:r,scaleY:i}}var Fo={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,r=this.options,i=this.container,n=this.cropper,a=Number(r.minContainerWidth),o=Number(r.minContainerHeight);oe(n,fe),Oe(e,fe);var s={width:Math.max(i.offsetWidth,a>=0?a:Ba),height:Math.max(i.offsetHeight,o>=0?o:Xa)};this.containerData=s,je(n,{width:s.width,height:s.height}),oe(e,fe),Oe(n,fe)},initCanvas:function(){var e=this.containerData,r=this.imageData,i=this.options.viewMode,n=Math.abs(r.rotate)%180===90,a=n?r.naturalHeight:r.naturalWidth,o=n?r.naturalWidth:r.naturalHeight,s=a/o,l=e.width,c=e.height;e.height*s>e.width?i===3?l=e.height*s:c=e.width/s:i===3?c=e.width/s:l=e.height*s;var u={aspectRatio:s,naturalWidth:a,naturalHeight:o,width:l,height:c};this.canvasData=u,this.limited=i===1||i===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=j({},u)},limitCanvas:function(e,r){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,s=i.viewMode,l=a.aspectRatio,c=this.cropped&&o;if(e){var u=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;s>1?(u=Math.max(u,n.width),d=Math.max(d,n.height),s===3&&(d*l>u?u=d*l:d=u/l)):s>0&&(u?u=Math.max(u,c?o.width:0):d?d=Math.max(d,c?o.height:0):c&&(u=o.width,d=o.height,d*l>u?u=d*l:d=u/l));var h=Ue({aspectRatio:l,width:u,height:d});u=h.width,d=h.height,a.minWidth=u,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(r)if(s>(c?0:1)){var f=n.width-a.width,m=n.height-a.height;a.minLeft=Math.min(0,f),a.minTop=Math.min(0,m),a.maxLeft=Math.max(0,f),a.maxTop=Math.max(0,m),c&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,s===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,f),a.maxLeft=Math.max(0,f)),a.height>=n.height&&(a.minTop=Math.min(0,m),a.maxTop=Math.max(0,m))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(e,r){var i=this.canvasData,n=this.imageData;if(r){var a=Ro({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=a.width,s=a.height,l=i.width*(o/i.naturalWidth),c=i.height*(s/i.naturalHeight);i.left-=(l-i.width)/2,i.top-=(c-i.height)/2,i.width=l,i.height=c,i.aspectRatio=o/s,i.naturalWidth=o,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,je(this.canvas,j({width:i.width,height:i.height},Pt({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var r=this.canvasData,i=this.imageData,n=i.naturalWidth*(r.width/r.naturalWidth),a=i.naturalHeight*(r.height/r.naturalHeight);j(i,{width:n,height:a,left:(r.width-n)/2,top:(r.height-a)/2}),je(this.image,j({width:i.width,height:i.height},Pt(j({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,r=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,a={width:r.width,height:r.height};i&&(r.height*i>r.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=r.left+(r.width-a.width)/2,a.top=r.top+(r.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=j({},a)},limitCropBox:function(e,r){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,s=this.limited,l=i.aspectRatio;if(e){var c=Number(i.minCropBoxWidth)||0,u=Number(i.minCropBoxHeight)||0,d=s?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,h=s?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;c=Math.min(c,n.width),u=Math.min(u,n.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),h*l>d?h=d/l:d=h*l),o.minWidth=Math.min(c,d),o.minHeight=Math.min(u,h),o.maxWidth=d,o.maxHeight=h}r&&(s?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(n.width,a.left+a.width)-o.width,o.maxTop=Math.min(n.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var e=this.options,r=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&Rt(this.face,kt,i.width>=r.width&&i.height>=r.height?ka:gi),je(this.cropBox,j({width:i.width,height:i.height},Pt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),vt(this.element,Jr,this.getData())}},zo={initPreview:function(){var e=this.element,r=this.crossOrigin,i=this.options.preview,n=r?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",o=document.createElement("img");if(r&&(o.crossOrigin=r),o.src=n,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,!!i){var s=i;typeof i=="string"?s=e.ownerDocument.querySelectorAll(i):i.querySelector&&(s=[i]),this.previews=s,ie(s,function(l){var c=document.createElement("img");Rt(l,Gt,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),r&&(c.crossOrigin=r),c.src=n,c.alt=a,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){ie(this.previews,function(e){var r=ri(e,Gt);je(e,{width:r.width,height:r.height}),e.innerHTML=r.html,Io(e,Gt)})},preview:function(){var e=this.imageData,r=this.canvasData,i=this.cropBoxData,n=i.width,a=i.height,o=e.width,s=e.height,l=i.left-r.left-e.left,c=i.top-r.top-e.top;!this.cropped||this.disabled||(je(this.viewBoxImage,j({width:o,height:s},Pt(j({translateX:-l,translateY:-c},e)))),ie(this.previews,function(u){var d=ri(u,Gt),h=d.width,f=d.height,m=h,g=f,y=1;n&&(y=h/n,g=a*y),a&&g>f&&(y=f/a,m=n*y,g=f),je(u,{width:m,height:g}),je(u.getElementsByTagName("img")[0],j({width:o*y,height:s*y},Pt(j({translateX:-l*y,translateY:-c*y},e))))}))}},jo={bind:function(){var e=this.element,r=this.options,i=this.cropper;he(r.cropstart)&&be(e,ei,r.cropstart),he(r.cropmove)&&be(e,Qr,r.cropmove),he(r.cropend)&&be(e,Zr,r.cropend),he(r.crop)&&be(e,Jr,r.crop),he(r.zoom)&&be(e,ti,r.zoom),be(i,Yi,this.onCropStart=this.cropStart.bind(this)),r.zoomable&&r.zoomOnWheel&&be(i,ji,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&be(i,Xi,this.onDblclick=this.dblclick.bind(this)),be(e.ownerDocument,Wi,this.onCropMove=this.cropMove.bind(this)),be(e.ownerDocument,$i,this.onCropEnd=this.cropEnd.bind(this)),r.responsive&&be(window,zi,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,r=this.options,i=this.cropper;he(r.cropstart)&&xe(e,ei,r.cropstart),he(r.cropmove)&&xe(e,Qr,r.cropmove),he(r.cropend)&&xe(e,Zr,r.cropend),he(r.crop)&&xe(e,Jr,r.crop),he(r.zoom)&&xe(e,ti,r.zoom),xe(i,Yi,this.onCropStart),r.zoomable&&r.zoomOnWheel&&xe(i,ji,this.onWheel,{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&xe(i,Xi,this.onDblclick),xe(e.ownerDocument,Wi,this.onCropMove),xe(e.ownerDocument,$i,this.onCropEnd),r.responsive&&xe(window,zi,this.onResize)}},Uo={resize:function(){if(!this.disabled){var e=this.options,r=this.container,i=this.containerData,n=r.offsetWidth/i.width,a=r.offsetHeight/i.height,o=Math.abs(n-1)>Math.abs(a-1)?n:a;if(o!==1){var s,l;e.restore&&(s=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(ie(s,function(c,u){s[u]=c*o})),this.setCropBoxData(ie(l,function(c,u){l[u]=c*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ha||this.setDragMode(Mo(this.dragBox,Vr)?Na:vi)},wheel:function(e){var r=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*i,e)))},cropStart:function(e){var r=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(X(r)&&r!==1||X(i)&&i!==0||e.ctrlKey))){var n=this.options,a=this.pointers,o;e.changedTouches?ie(e.changedTouches,function(s){a[s.identifier]=Jt(s)}):a[e.pointerId||0]=Jt(e),Object.keys(a).length>1&&n.zoomable&&n.zoomOnTouch?o=Ra:o=ri(e.target,kt),wo.test(o)&&vt(this.element,ei,{originalEvent:e,action:o})!==!1&&(e.preventDefault(),this.action=o,this.cropping=!1,o===Pa&&(this.cropping=!0,oe(this.dragBox,dr)))}},cropMove:function(e){var r=this.action;if(!(this.disabled||!r)){var i=this.pointers;e.preventDefault(),vt(this.element,Qr,{originalEvent:e,action:r})!==!1&&(e.changedTouches?ie(e.changedTouches,function(n){j(i[n.identifier]||{},Jt(n,!0))}):j(i[e.pointerId||0]||{},Jt(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var r=this.action,i=this.pointers;e.changedTouches?ie(e.changedTouches,function(n){delete i[n.identifier]}):delete i[e.pointerId||0],r&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,pt(this.dragBox,dr,this.cropped&&this.options.modal)),vt(this.element,Zr,{originalEvent:e,action:r}))}}},Ko={change:function(e){var r=this.options,i=this.canvasData,n=this.containerData,a=this.cropBoxData,o=this.pointers,s=this.action,l=r.aspectRatio,c=a.left,u=a.top,d=a.width,h=a.height,f=c+d,m=u+h,g=0,y=0,A=n.width,b=n.height,O=!0,S;!l&&e.shiftKey&&(l=d&&h?d/h:1),this.limited&&(g=a.minLeft,y=a.minTop,A=g+Math.min(n.width,i.width,i.left+i.width),b=y+Math.min(n.height,i.height,i.top+i.height));var v=o[Object.keys(o)[0]],p={x:v.endX-v.startX,y:v.endY-v.startY},x=function(I){switch(I){case et:f+p.x>A&&(p.x=A-f);break;case tt:c+p.x<g&&(p.x=g-c);break;case Ye:u+p.y<y&&(p.y=y-u);break;case lt:m+p.y>b&&(p.y=b-m);break}};switch(s){case gi:c+=p.x,u+=p.y;break;case et:if(p.x>=0&&(f>=A||l&&(u<=y||m>=b))){O=!1;break}x(et),d+=p.x,d<0&&(s=tt,d=-d,c-=d),l&&(h=d/l,u+=(a.height-h)/2);break;case Ye:if(p.y<=0&&(u<=y||l&&(c<=g||f>=A))){O=!1;break}x(Ye),h-=p.y,u+=p.y,h<0&&(s=lt,h=-h,u-=h),l&&(d=h*l,c+=(a.width-d)/2);break;case tt:if(p.x<=0&&(c<=g||l&&(u<=y||m>=b))){O=!1;break}x(tt),d-=p.x,c+=p.x,d<0&&(s=et,d=-d,c-=d),l&&(h=d/l,u+=(a.height-h)/2);break;case lt:if(p.y>=0&&(m>=b||l&&(c<=g||f>=A))){O=!1;break}x(lt),h+=p.y,h<0&&(s=Ye,h=-h,u-=h),l&&(d=h*l,c+=(a.width-d)/2);break;case Et:if(l){if(p.y<=0&&(u<=y||f>=A)){O=!1;break}x(Ye),h-=p.y,u+=p.y,d=h*l}else x(Ye),x(et),p.x>=0?f<A?d+=p.x:p.y<=0&&u<=y&&(O=!1):d+=p.x,p.y<=0?u>y&&(h-=p.y,u+=p.y):(h-=p.y,u+=p.y);d<0&&h<0?(s=xt,h=-h,d=-d,u-=h,c-=d):d<0?(s=St,d=-d,c-=d):h<0&&(s=Tt,h=-h,u-=h);break;case St:if(l){if(p.y<=0&&(u<=y||c<=g)){O=!1;break}x(Ye),h-=p.y,u+=p.y,d=h*l,c+=a.width-d}else x(Ye),x(tt),p.x<=0?c>g?(d-=p.x,c+=p.x):p.y<=0&&u<=y&&(O=!1):(d-=p.x,c+=p.x),p.y<=0?u>y&&(h-=p.y,u+=p.y):(h-=p.y,u+=p.y);d<0&&h<0?(s=Tt,h=-h,d=-d,u-=h,c-=d):d<0?(s=Et,d=-d,c-=d):h<0&&(s=xt,h=-h,u-=h);break;case xt:if(l){if(p.x<=0&&(c<=g||m>=b)){O=!1;break}x(tt),d-=p.x,c+=p.x,h=d/l}else x(lt),x(tt),p.x<=0?c>g?(d-=p.x,c+=p.x):p.y>=0&&m>=b&&(O=!1):(d-=p.x,c+=p.x),p.y>=0?m<b&&(h+=p.y):h+=p.y;d<0&&h<0?(s=Et,h=-h,d=-d,u-=h,c-=d):d<0?(s=Tt,d=-d,c-=d):h<0&&(s=St,h=-h,u-=h);break;case Tt:if(l){if(p.x>=0&&(f>=A||m>=b)){O=!1;break}x(et),d+=p.x,h=d/l}else x(lt),x(et),p.x>=0?f<A?d+=p.x:p.y>=0&&m>=b&&(O=!1):d+=p.x,p.y>=0?m<b&&(h+=p.y):h+=p.y;d<0&&h<0?(s=St,h=-h,d=-d,u-=h,c-=d):d<0?(s=xt,d=-d,c-=d):h<0&&(s=Et,h=-h,u-=h);break;case ka:this.move(p.x,p.y),O=!1;break;case Ra:this.zoom(Po(o),e),O=!1;break;case Pa:if(!p.x||!p.y){O=!1;break}S=Fa(this.cropper),c=v.startX-S.left,u=v.startY-S.top,d=a.minWidth,h=a.minHeight,p.x>0?s=p.y>0?Tt:Et:p.x<0&&(c-=d,s=p.y>0?xt:St),p.y<0&&(u-=h),this.cropped||(Oe(this.cropBox,fe),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}O&&(a.width=d,a.height=h,a.left=c,a.top=u,this.action=s,this.renderCropBox()),ie(o,function(M){M.startX=M.endX,M.startY=M.endY})}},Vo={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&oe(this.dragBox,dr),Oe(this.cropBox,fe),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Oe(this.dragBox,dr),oe(this.cropBox,fe)),this},replace:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),r?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ie(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Oe(this.cropper,Hi)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,oe(this.cropper,Hi)),this},destroy:function(){var e=this.element;return e[z]?(e[z]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,n=i.left,a=i.top;return this.moveTo(Pr(e)?e:n+Number(e),Pr(r)?r:a+Number(r))},moveTo:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,n=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.movable&&(X(e)&&(i.left=e,n=!0),X(r)&&(i.top=r,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,r){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,r)},zoomTo:function(e,r,i){var n=this.options,a=this.canvasData,o=a.width,s=a.height,l=a.naturalWidth,c=a.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&n.zoomable){var u=l*e,d=c*e;if(vt(this.element,ti,{ratio:e,oldRatio:o/l,originalEvent:i})===!1)return this;if(i){var h=this.pointers,f=Fa(this.cropper),m=h&&Object.keys(h).length?ko(h):{pageX:i.pageX,pageY:i.pageY};a.left-=(u-o)*((m.pageX-f.left-a.left)/o),a.top-=(d-s)*((m.pageY-f.top-a.top)/s)}else ft(r)&&X(r.x)&&X(r.y)?(a.left-=(u-o)*((r.x-a.left)/o),a.top-=(d-s)*((r.y-a.top)/s)):(a.left-=(u-o)/2,a.top-=(d-s)/2);a.width=u,a.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),X(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var r=this.imageData.scaleY;return this.scale(e,X(r)?r:1)},scaleY:function(e){var r=this.imageData.scaleX;return this.scale(X(r)?r:1,e)},scale:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,n=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.scalable&&(X(e)&&(i.scaleX=e,n=!0),X(r)&&(i.scaleY=r,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.options,i=this.imageData,n=this.canvasData,a=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:a.left-n.left,y:a.top-n.top,width:a.width,height:a.height};var s=i.width/i.naturalWidth;if(ie(o,function(u,d){o[d]=u/s}),e){var l=Math.round(o.y+o.height),c=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=c-o.x,o.height=l-o.y}}else o={x:0,y:0,width:0,height:0};return r.rotatable&&(o.rotate=i.rotate||0),r.scalable&&(o.scaleX=i.scaleX||1,o.scaleY=i.scaleY||1),o},setData:function(e){var r=this.options,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&ft(e)){var o=!1;r.rotatable&&X(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,o=!0),r.scalable&&(X(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,o=!0),X(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;X(e.x)&&(a.left=e.x*s+n.left),X(e.y)&&(a.top=e.y*s+n.top),X(e.width)&&(a.width=e.width*s),X(e.height)&&(a.height=e.height*s),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,r={};return this.ready&&ie(["left","top","width","height","naturalWidth","naturalHeight"],function(i){r[i]=e[i]}),r},setCanvasData:function(e){var r=this.canvasData,i=r.aspectRatio;return this.ready&&!this.disabled&&ft(e)&&(X(e.left)&&(r.left=e.left),X(e.top)&&(r.top=e.top),X(e.width)?(r.width=e.width,r.height=e.width/i):X(e.height)&&(r.height=e.height,r.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,r;return this.ready&&this.cropped&&(r={left:e.left,top:e.top,width:e.width,height:e.height}),r||{}},setCropBoxData:function(e){var r=this.cropBoxData,i=this.options.aspectRatio,n,a;return this.ready&&this.cropped&&!this.disabled&&ft(e)&&(X(e.left)&&(r.left=e.left),X(e.top)&&(r.top=e.top),X(e.width)&&e.width!==r.width&&(n=!0,r.width=e.width),X(e.height)&&e.height!==r.height&&(a=!0,r.height=e.height),i&&(n?r.height=r.width/i:a&&(r.width=r.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var r=this.canvasData,i=No(this.image,this.imageData,r,e);if(!this.cropped)return i;var n=this.getData(e.rounded),a=n.x,o=n.y,s=n.width,l=n.height,c=i.width/Math.floor(r.naturalWidth);c!==1&&(a*=c,o*=c,s*=c,l*=c);var u=s/l,d=Ue({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=Ue({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),f=Ue({aspectRatio:u,width:e.width||(c!==1?i.width:s),height:e.height||(c!==1?i.height:l)}),m=f.width,g=f.height;m=Math.min(d.width,Math.max(h.width,m)),g=Math.min(d.height,Math.max(h.height,g));var y=document.createElement("canvas"),A=y.getContext("2d");y.width=gt(m),y.height=gt(g),A.fillStyle=e.fillColor||"transparent",A.fillRect(0,0,m,g);var b=e.imageSmoothingEnabled,O=b===void 0?!0:b,S=e.imageSmoothingQuality;A.imageSmoothingEnabled=O,S&&(A.imageSmoothingQuality=S);var v=i.width,p=i.height,x=a,M=o,I,U,W,le,Z,Q;x<=-s||x>v?(x=0,I=0,W=0,Z=0):x<=0?(W=-x,x=0,I=Math.min(v,s+x),Z=I):x<=v&&(W=0,I=Math.min(s,v-x),Z=I),I<=0||M<=-l||M>p?(M=0,U=0,le=0,Q=0):M<=0?(le=-M,M=0,U=Math.min(p,l+M),Q=U):M<=p&&(le=0,U=Math.min(l,p-M),Q=U);var G=[x,M,I,U];if(Z>0&&Q>0){var ne=m/s;G.push(W*ne,le*ne,Z*ne,Q*ne)}return A.drawImage.apply(A,[i].concat(qa(G.map(function(Ee){return Math.floor(gt(Ee))})))),y},setAspectRatio:function(e){var r=this.options;return!this.disabled&&!Pr(e)&&(r.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var r=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=e===vi,o=r.movable&&e===Na;e=a||o?e:Ha,r.dragMode=e,Rt(i,kt,e),pt(i,Vr,a),pt(i,Gr,o),r.cropBoxMovable||(Rt(n,kt,e),pt(n,Vr,a),pt(n,Gr,o))}return this}},Go=Pe.Cropper,ja=(function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(lo(this,t),!e||!To.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=j({},Ki,ft(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return co(t,[{key:"init",value:function(){var r=this.element,i=r.tagName.toLowerCase(),n;if(!r[z]){if(r[z]=this,i==="img"){if(this.isImg=!0,n=r.getAttribute("src")||"",this.originalUrl=n,!n)return;n=r.src}else i==="canvas"&&window.HTMLCanvasElement&&(n=r.toDataURL());this.load(n)}}},{key:"load",value:function(r){var i=this;if(r){this.url=r,this.imageData={};var n=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Eo.test(r)){So.test(r)?this.read(Xo(r)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==Ui&&o.abort()},o.onload=function(){i.read(o.response)},o.onloadend=function(){i.reloading=!1,i.xhr=null},a.checkCrossOrigin&&Gi(r)&&n.crossOrigin&&(r=Ji(r)),o.open("GET",r,!0),o.responseType="arraybuffer",o.withCredentials=n.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(r){var i=this.options,n=this.imageData,a=Wo(r),o=0,s=1,l=1;if(a>1){this.url=Yo(r,Ui);var c=$o(a);o=c.rotate,s=c.scaleX,l=c.scaleY}i.rotatable&&(n.rotate=o),i.scalable&&(n.scaleX=s,n.scaleY=l),this.clone()}},{key:"clone",value:function(){var r=this.element,i=this.url,n=r.crossOrigin,a=i;this.options.checkCrossOrigin&&Gi(i)&&(n||(n="anonymous"),a=Ji(i)),this.crossOrigin=n,this.crossOriginUrl=a;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=a||i,o.alt=r.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),oe(o,Bi),r.parentNode.insertBefore(o,r.nextSibling)}},{key:"start",value:function(){var r=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var n=Pe.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Pe.navigator.userAgent),a=function(c,u){j(r.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),r.initialImageData=j({},r.imageData),r.sizing=!1,r.sized=!0,r.build()};if(i.naturalWidth&&!n){a(i.naturalWidth,i.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){a(o.width,o.height),n||s.removeChild(o)},o.src=i.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var r=this.image;r.onload=null,r.onerror=null,r.parentNode.removeChild(r),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var r=this.element,i=this.options,n=this.image,a=r.parentNode,o=document.createElement("div");o.innerHTML=xo;var s=o.querySelector(".".concat(z,"-container")),l=s.querySelector(".".concat(z,"-canvas")),c=s.querySelector(".".concat(z,"-drag-box")),u=s.querySelector(".".concat(z,"-crop-box")),d=u.querySelector(".".concat(z,"-face"));this.container=a,this.cropper=s,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=s.querySelector(".".concat(z,"-view-box")),this.face=d,l.appendChild(n),oe(r,fe),a.insertBefore(s,r.nextSibling),Oe(n,Bi),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,oe(u,fe),i.guides||oe(u.getElementsByClassName("".concat(z,"-dashed")),fe),i.center||oe(u.getElementsByClassName("".concat(z,"-center")),fe),i.background&&oe(s,"".concat(z,"-bg")),i.highlight||oe(d,go),i.cropBoxMovable&&(oe(d,Gr),Rt(d,kt,gi)),i.cropBoxResizable||(oe(u.getElementsByClassName("".concat(z,"-line")),fe),oe(u.getElementsByClassName("".concat(z,"-point")),fe)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),he(i.ready)&&be(r,Fi,i.ready,{once:!0}),vt(r,Fi)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var r=this.cropper.parentNode;r&&r.removeChild(this.cropper),Oe(this.element,fe)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Go,t}},{key:"setDefaults",value:function(r){j(Ki,ft(r)&&r)}}])})();j(ja.prototype,Fo,zo,jo,Uo,Ko,Vo);const Ua=t=>{if(!t)return;t.classList.add("is-active"),t.setAttribute("aria-hidden","false"),t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},Ke=t=>{t&&(t.classList.remove("is-active"),t.setAttribute("aria-hidden","true"))},ur=t=>{t&&(Ke(t),setTimeout(()=>t.remove(),300))},Ve=t=>{const{title:e="Modal",body:r="",bodyParams:i=null,type:n="default",variant:a="default",confirmText:o="OK",cancelText:s="Cancel",onConfirm:l=null,onCancel:c=null,size:u="default",autoClose:d=!0}=t,h=document.createElement("div");h.className="modal",h.setAttribute("data-ave-modal",""),h.setAttribute("data-modal-dynamic","true");const f=u==="small"?"modal-sm":u==="large"?"modal-lg":"",m=a!=="default"?`modal-${a}`:"";let g=r;if(i&&Array.isArray(i)&&i.length>0){const v=i.map(p=>`<span class="modal-param">"${p}"</span>`).join(", ");g=`<p class="modal-message">${r} ${v}</p>`}else r&&!r.startsWith("<")&&(g=`<p>${r}</p>`);h.innerHTML=`
        <div class="modal-background" data-ave-modal-close></div>
        <div class="modal-dialog ${f} ${m}">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">${e}</h4>
                    <button class="close" data-ave-modal-dismiss type="button">&times;</button>
                </div>
                <div class="modal-body">
                    ${g}
                </div>
                <div class="modal-footer">
                    ${n==="alert"?`
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:n==="confirm"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:n==="form"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:""}
                </div>
            </div>
        </div>
    `;const y=h.querySelector("[data-modal-confirm]"),A=h.querySelector("[data-modal-cancel]"),b=h.querySelector("[data-ave-modal-dismiss]"),O=h.querySelector("[data-ave-modal-close]"),S=()=>{Ke(h),setTimeout(()=>h.remove(),300)};return y&&y.addEventListener("click",()=>{l&&l(h),d&&S()}),A&&A.addEventListener("click",()=>{c&&c(),S()}),b&&b.addEventListener("click",S),O&&O.addEventListener("click",()=>{c&&c(),S()}),document.body.appendChild(h),requestAnimationFrame(()=>{Ua(h),Ie.emit("dom:updated",h)}),h},ii=(t,e={})=>new Promise(r=>{Ve({title:e.title||"Confirm",body:t,bodyParams:e.bodyParams||null,type:"confirm",variant:e.variant||"default",confirmText:e.confirmText||"Yes",cancelText:e.cancelText||"No",size:e.size||"small",onConfirm:()=>r(!0),onCancel:()=>r(!1)})}),Jo=(t,e={})=>{Ve({title:e.title||"Alert",body:t,bodyParams:e.bodyParams||null,type:"alert",variant:e.variant||"default",confirmText:e.confirmText||"OK",size:e.size||"small"})};function Zo(){document.querySelectorAll("[data-ave-modal-trigger]").forEach(t=>{const e=t.getAttribute("data-ave-modal-trigger"),r=e?document.querySelector(e):null;r&&t.addEventListener("click",i=>{i.preventDefault(),Ua(r)})}),document.querySelectorAll("[data-ave-modal]").forEach(t=>{t.addEventListener("click",e=>{e.target.hasAttribute("data-ave-modal-close")&&Ke(t)}),t.querySelectorAll("[data-ave-modal-dismiss]").forEach(e=>{e.addEventListener("click",r=>{r.preventDefault(),Ke(t)})})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){const e=document.querySelector("[data-ave-modal].is-active");e&&Ke(e)}})}function Ce(t,e={}){if(!window.AveTranslations)return console.warn("AveTranslations not loaded"),t;const r=t.split(".");let i=window.AveTranslations;for(const a of r)if(i&&typeof i=="object"&&a in i)i=i[a];else return console.warn(`Translation key not found: ${t}`),t;if(typeof i!="string")return console.warn(`Translation value is not a string: ${t}`),t;let n=i;for(const[a,o]of Object.entries(e))n=n.replace(`:${a}`,o);return n}let Ct=null;const P=(t="success",e="",r=4e3)=>{if(!Ct&&(Ct=document.getElementById("toast-container"),!Ct)){console.error(Ce("toast.container_not_found"));return}const i={success:Ce("toast.defaults.success"),danger:Ce("toast.defaults.error"),warning:Ce("toast.defaults.warning"),info:Ce("toast.defaults.info")},n={success:Ce("toast.titles.success"),danger:Ce("toast.titles.error"),warning:Ce("toast.titles.warning"),info:Ce("toast.titles.info")},a=document.createElement("div");a.className=`toast toast-${t}`;const s=(e||i[t]||i.info).split(`
`).map(c=>`<p>${c}</p>`).join("");a.innerHTML=`
        <div class="toast-title">${n[t]||n.info}</div>
        <div class="toast-message">${s}</div>
    `,Ct.appendChild(a),requestAnimationFrame(()=>{a.classList.add("show")});const l=t==="danger"?Math.max(r,6e3):r;window.setTimeout(()=>{a.classList.remove("show"),window.setTimeout(()=>a.remove(),200)},l)};function Qo(){Ct=document.getElementById("toast-container");const t=document.getElementById("ave-toast-data");if(t)try{const e=JSON.parse(t.textContent);e.type&&e.message&&P(e.type,e.message)}catch(e){console.error(Ce("toast.parse_error"),e)}document.querySelectorAll("[data-ave-toast-trigger]").forEach(e=>{e.addEventListener("click",r=>{r.preventDefault();const i=e.getAttribute("data-ave-toast-trigger")||"success",n=e.getAttribute("data-ave-toast-message")||"";P(i,n)})})}const hr={SORTABLE:400,COLLAPSE:300},bi={SORTABLE:"cubic-bezier(0.25, 0.8, 0.25, 1)"},es={OK:200},Rr={BYTE_FACTOR:1024,DECIMAL_PLACES:1};function ts(t,e=Rr.DECIMAL_PLACES){const r=["B","KB","MB","GB","TB"];if(t<=0)return"0B";const i=Math.floor(Math.log(t)/Math.log(Rr.BYTE_FACTOR));return(t/Math.pow(Rr.BYTE_FACTOR,i)).toFixed(e)+r[i]}const Ka=new Map,ai=(t="")=>t?t.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"",Zi=(t,e)=>t.replace(/__INDEX__/g,e).replace(/__index__/g,e).replace(/__ITEM__/g,e).replace(/__item__/g,e).replace(/__TEMPLATE__/g,e).replace(/__template__/g,e);function Qi(t){if(!t||!t.classList.contains("media-field-container"))return;const e=t.dataset.metaKey;if(!e||!e.includes("__item__")&&!e.includes("__template__"))return;const r=t.closest("[data-fieldset-item]");if(!r)return;const i=r.dataset.itemId;if(i===void 0)return;const n=Zi(e,i),a=ai(n);if(t.dataset.metaKey=a,t.dataset.collection&&/__(ITEM|TEMPLATE)__/.test(t.dataset.collection)){const o=Zi(t.dataset.collection,i);t.dataset.collection=o}t.querySelectorAll('input[data-uploaded-ids], input[data-deleted-ids], input[data-media-props="true"]').forEach(o=>{o.name&&o.name.includes(e)&&(o.name=o.name.replace(e,a))}),delete t.dataset.initialized}function rs(){Ka.forEach(t=>{t.uploadedIdsInput&&(t.uploadedIdsInput.value=t.uploadedIds.join(",")),t.deletedIdsInput&&(t.deletedIdsInput.value=t.deletedIds.join(",")),ni(t)})}function ni(t){const{fieldValueInput:e,container:r,collection:i,uploadedIds:n}=t;if(!e||!r)return;const a=r.querySelector("[data-media-grid]"),s=(a?a.querySelectorAll(".media-item"):[]).length>0||(n??[]).length>0;e.value=s?i:""}function fr(t=document){t.querySelectorAll(".media-field-container").forEach(e=>{if(e.dataset.initialized==="true")return;e.dataset.initialized="true";const r=e.dataset.multiple==="true",i=parseInt(e.dataset.maxFiles)||null,n=parseInt(e.dataset.maxSize)||null;e.dataset.accept;const a=e.dataset.uploadUrl,o=e.dataset.modelType||"",s=e.dataset.modelId||"",l=e.dataset.customPath||"",c=e.dataset.pathPrefix||"",u=e.closest("[data-field-name]"),d=u?.dataset.fieldName||"media",h=u?.dataset.fieldId||d.replace(/[^A-Za-z0-9_-]+/g,"-");let f=ai(e.dataset.metaKey||d);e.dataset.metaKey=f;const m=JSON.parse(e.dataset.propNames||"[]"),g=e.dataset.collection||"default",y=e.querySelector("[data-media-dropzone]"),A=e.querySelector(".media-file-input"),b=e.querySelector("[data-media-grid]"),O=e.querySelector(".media-bulk-actions"),S=e.querySelector("[data-uploaded-ids]"),v=e.querySelector("[data-deleted-ids]"),p=e.querySelector("[data-media-value]"),x=[],M=[],I=new Set,U=f||d;Ka.set(U,{uploadedIds:x,deletedIds:M,uploadedIdsInput:S,deletedIdsInput:v,fieldValueInput:p,fieldName:d,metaKey:f,collection:g,container:e}),ni({fieldValueInput:p,container:e,collection:g,uploadedIds:x}),y?.addEventListener("click",E=>{E.target.closest(".media-item")||A?.click()}),A?.addEventListener("change",E=>{Z(E.target.files)}),y?.addEventListener("dragover",E=>{E.preventDefault(),y.classList.add("dragover")}),y?.addEventListener("dragleave",()=>{y.classList.remove("dragover")}),y?.addEventListener("drop",E=>{E.preventDefault(),y.classList.remove("dragover"),Z(E.dataTransfer.files)});let W=!1,le=0;b?.addEventListener("mousedown",E=>{E.target.closest("[data-action]")||(W=!1,le=Date.now())}),b?.addEventListener("mousemove",()=>{Date.now()-le>200&&(W=!0)}),b?.addEventListener("mouseup",E=>{if(W){W=!1;return}const T=E.target.closest(".media-item");if(!T||E.target.closest("[data-action]"))return;const L=T.dataset.mediaId;L&&(T.classList.contains("selected")?(T.classList.remove("selected"),I.delete(parseInt(L))):(T.classList.add("selected"),I.add(parseInt(L))),nt())}),O?.addEventListener("click",E=>{const T=E.target.closest("[data-action]");T&&(T.dataset.action==="select-all"?mn():T.dataset.action==="deselect-all"?gn():T.dataset.action==="delete-selected"&&vn())}),b?.addEventListener("click",E=>{const T=E.target.closest("[data-action]");if(!T)return;const L=T.closest(".media-item"),k=L?.dataset.mediaId;T.dataset.action==="delete"?(E.stopPropagation(),Ee(L,k)):T.dataset.action==="edit"?(E.stopPropagation(),wt(L,k)):T.dataset.action==="crop"&&(E.stopPropagation(),Se(L,k))}),r&&b&&_.create(b,{animation:hr.SORTABLE,easing:bi.SORTABLE,handle:".media-drag-handle",onEnd:()=>{De(),yr()}});function Z(E){const T=Array.from(E);if(r){if(i&&b.querySelectorAll(".media-item").length+T.length>i){P("warning",`Maximum ${i} files allowed`);return}}else{if(T.length>1){P("warning","You can only upload 1 file");return}b.querySelectorAll(".media-item").forEach(k=>{const C=k.dataset.mediaId;C?ne(C,k):k.remove()})}for(const L of T){if(n&&L.size>n*1024){P("warning",`File "${L.name}" is too large. Maximum size: ${(n/1024).toFixed(1)} MB`);continue}Q(L)}A&&(A.value="")}function Q(E){const T=new FormData;T.append("files[]",E),T.append("collection",g),o&&T.append("model_type",o),s&&T.append("model_id",s),n&&T.append("max_size",n),l&&T.append("customPath",l);const L=e.dataset.pathStrategy;L&&T.append("pathStrategy",L),c&&T.append("pathPrefix",c);const k=y?.querySelector(".upload-progress"),C=k?.querySelector(".progress-fill"),$=k?.querySelector(".progress-text"),D=y?.querySelector(".upload-prompt");D&&(D.style.display="none"),k&&(k.style.display="block",k.classList.add("active"));const N=document.querySelector('meta[name="csrf-token"]')?.content,H=new XMLHttpRequest;H.upload.addEventListener("progress",ae=>{if(ae.lengthComputable&&C&&$){const Le=ae.loaded/ae.total*100;C.style.width=Le+"%",$.textContent=`Uploading... ${Math.round(Le)}%`}}),H.addEventListener("load",()=>{if(H.status===es.OK)try{const ae=JSON.parse(H.responseText);ae.success&&ae.media?(ae.media.forEach(Le=>{G(Le),x.push(Le.id)}),ke(),P("success","File uploaded successfully.")):P("danger","Upload failed: "+(ae.message||"Unknown error"))}catch{P("danger","Upload failed: Invalid server response")}else P("danger","Upload failed: "+H.statusText);k&&(k.classList.remove("active"),k.style.display="none"),D&&(D.style.display="flex"),C&&(C.style.width="0%")}),H.addEventListener("error",()=>{P("danger","Upload failed. Please try again."),k&&(k.classList.remove("active"),k.style.display="none"),D&&(D.style.display="flex")}),H.open("POST",a,!0),N&&H.setRequestHeader("X-CSRF-TOKEN",N),H.send(T)}function G(E){const T=document.getElementById("media-item-template-"+h);if(!T){console.error("Media item template not found:","media-item-template-"+h);return}const L=T.content.cloneNode(!0).querySelector(".media-item");L.dataset.mediaId=E.id;const k=E.mime_type&&E.mime_type.startsWith("image/");if(k){const D=L.querySelector(".media-image");D.src=E.url||E.preview_url,D.alt=E.file_name,D.style.display="block";const N=L.querySelector('[data-action="crop"]');N&&(N.style.display="flex")}else{const D=L.querySelector(".media-file-icon"),N=D.querySelector(".media-file-name");N.textContent=E.file_name,D.style.display="flex"}const C=L.querySelector('input[type="hidden"]');C.value=E.id;const $=L.querySelector(".media-item-footer");if($){const D=$.querySelector(".media-filename");D&&(D.textContent=E.file_name);const N=$.querySelector(".media-size");N&&E.size&&(N.textContent=ts(E.size),E.size>1048576&&N.classList.add("media-large-file"));const H=$.querySelector(".media-title i");H&&E.title&&(H.textContent=E.title)}if(b?.appendChild(L),k){const D=L.querySelector(".media-image");D&&D.src&&(e.dataset.previewUrl=D.src)}Ie.emit("dom:updated",L),De()}function ne(E,T){if(!E){T?.remove(),De();return}const L=a.replace("/upload",`/${E}`),k=document.querySelector('meta[name="csrf-token"]')?.content;fetch(L,{method:"DELETE",headers:{"X-CSRF-TOKEN":k,Accept:"application/json","Content-Type":"application/json"}}).then(C=>C.json()).then(C=>{C.success?(T?.remove(),De()):console.error("Failed to delete file:",C.message)}).catch(C=>{console.error("Delete error:",C)})}async function Ee(E,T){const L=E?.querySelector(".media-filename")?.textContent||"this file";if(!await ii("You are going to remove:",{title:"Delete File",variant:"error",bodyParams:[L],confirmText:"Delete",cancelText:"Cancel"}))return;if(!T){E?.remove(),De(),ke(),P("success","File removed successfully.");return}const C=a.replace("/upload",`/${T}`),$=document.querySelector('meta[name="csrf-token"]')?.content;fetch(C,{method:"DELETE",headers:{"X-CSRF-TOKEN":$,Accept:"application/json","Content-Type":"application/json"}}).then(D=>D.json()).then(D=>{if(D.success){E?.remove(),De();const N=parseInt(T,10),H=x.indexOf(N);H!==-1&&x.splice(H,1),M.includes(N)||M.push(N),ke(),P("success","File deleted successfully.")}else P("danger","Failed to delete file: "+(D.message||"Unknown error"))}).catch(D=>{console.error("Delete error:",D),P("danger","Failed to delete file. Please try again.")})}function Se(E,T){const L=E?.querySelector(".media-filename")?.textContent||"Media",k=E?.querySelector("img");if(!k){P("danger","Could not load image for cropping");return}const C=k.src,$=`
                <div class="cropper-modal-content">
                    <div class="cropper-image-container">
                        <img id="cropper-image-${T}" src="${C}" alt="Crop image" class="cropper-image">
                    </div>
                    <div class="cropper-options">
                        <div class="row">
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Aspect Ratio:</label>
                                    <select id="cropper-ratio-${T}" class="form-control">
                                        <option value="">Free</option>
                                        <option value="16/9">16:9 (landscape)</option>
                                        <option value="9/16">9:16 (portrait)</option>
                                        <option value="4/3">4:3 (landscape)</option>
                                        <option value="3/4">3:4 (portrait)</option>
                                        <option value="1/1">1:1 (square)</option>
                                        <option value="3/2">3:2 (landscape)</option>
                                        <option value="2/3">2:3 (portrait)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Max Size (px):</label>
                                    <input type="number" id="cropper-max-size-${T}" class="form-control" placeholder="No limit" min="1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,D=Ve({title:`Crop: ${L}`,body:$,type:"form",confirmText:"Crop",cancelText:"Cancel",size:"large",autoClose:!1,onConfirm:N=>{Ge(N,T,E)}});setTimeout(()=>{const N=document.getElementById(`cropper-image-${T}`),H=document.getElementById(`cropper-ratio-${T}`);if(!N){console.error("Cropper image element not found");return}const ae=new ja(N,{aspectRatio:NaN,viewMode:1,autoCropArea:1,responsive:!0,guides:!0,grid:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0});D.cropper=ae,H?.addEventListener("change",Le=>{const br=Le.target.value;if(br==="")ae.setAspectRatio(NaN);else{const[wr,Er]=br.split("/").map(Number);ae.setAspectRatio(wr/Er)}})},100)}function Ge(E,T,L){const k=E.cropper;if(!k){P("danger","Cropper not initialized");return}k.getCanvasData();const C=k.getData(!0);if(C.width<=0||C.height<=0){P("danger","Invalid crop area");return}const $=Math.round(C.x),D=Math.round(C.y),N=Math.round(C.width),H=Math.round(C.height),ae=document.getElementById(`cropper-max-size-${T}`),Le=ae?.value?parseInt(ae.value,10):null,wr=document.getElementById(`cropper-ratio-${T}`)?.value||"",Er=document.querySelector('meta[name="csrf-token"]')?.content,yn=a.replace("/upload",""),wi={x:$,y:D,width:N,height:H,aspectRatio:wr};Le&&(wi.maxSize=Le),fetch(`${yn}/${T}/crop`,{method:"POST",headers:{"X-CSRF-TOKEN":Er,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(wi)}).then(ye=>ye.ok?ye.json():ye.json().then(Yt=>{throw new Error(Yt.message||`HTTP ${ye.status}`)})).then(ye=>{if(ye.success){const Yt=L.querySelector("img");if(Yt){const Wt=new Date().getTime();Yt.src=ye.media.url+"?t="+Wt}if(ye.media.size){const Wt=L.querySelector(".media-size");if(Wt){const Ei=["B","KB","MB","GB"];let Sr=ye.media.size,Tr=0;for(;Sr>=1024&&Tr<Ei.length-1;)Sr/=1024,Tr++;const bn=Sr.toFixed(1)+Ei[Tr];Wt.textContent=bn}}P("success","Image cropped successfully"),ur(E)}else throw new Error(ye.message||"Crop failed")}).catch(ye=>{P("danger","Failed to crop image: "+ye.message)})}function wt(E,T){const L=E?.querySelector(".media-filename")?.textContent||"Media",k=E.querySelector(`input[data-media-props="true"][data-props-id="${T}"]`),C=k?JSON.parse(k.value||"{}"):{},$=m.map(D=>{const N=D.charAt(0).toUpperCase()+D.slice(1).replace(/_/g," "),H=`media-prop-${D}`;return`
                    <div class="form-field">
                        <label for="${H}">${N}</label>
                        <input type="text" id="${H}" name="${D}" class="form-control" value="${C[D]||""}" placeholder="Enter ${N.toLowerCase()}">
                    </div>
                `}).join("");Ve({title:`Edit: ${L}`,body:$,type:"form",confirmText:"Save",cancelText:"Cancel",size:"default",autoClose:!1,onConfirm:D=>{Je(D,T,E)}})}function Je(E,T,L){const k=document.querySelector('meta[name="csrf-token"]')?.content,C={};E.querySelectorAll("input[name], textarea[name]").forEach(D=>{const N=D.getAttribute("name");N&&(C[N]=D.value||"")});const $=a.replace("/upload","");fetch(`${$}/${T}/props`,{method:"POST",headers:{"X-CSRF-TOKEN":k,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(C)}).then(D=>D.ok?D.json():D.json().then(N=>{throw new Error(N.message||`HTTP ${D.status}`)})).then(D=>{if(D.success){if(D.media?.props?.title){const ae=L.querySelector(".media-title i");ae&&(ae.textContent=D.media.props.title)}const N=e.dataset.metaKey||f||ai(d);let H=L.querySelector(`input[data-media-props="true"][data-props-id="${T}"]`);H?(H.name=`__media_props[${N}][${T}]`,H.setAttribute("data-media-props","true"),H.setAttribute("data-props-id",T)):(H=document.createElement("input"),H.type="hidden",H.name=`__media_props[${N}][${T}]`,H.setAttribute("data-media-props","true"),H.setAttribute("data-props-id",T),L.appendChild(H)),H.value=JSON.stringify(D.media.props),P("success",D.message||"Properties saved successfully"),ur(E)}else throw new Error(D.message||"Save failed")}).catch(D=>{P("danger","Failed to save: "+D.message)})}function ke(){S&&(S.value=x.join(",")),v&&(v.value=M.join(",")),ni({fieldValueInput:p,container:e,collection:g,uploadedIds:x})}function De(){b?.querySelectorAll(".media-item")?.forEach((T,L)=>{const k=T.querySelector(".media-order");k&&(k.textContent=L+1)})}function yr(){const E=b.querySelectorAll(".media-item"),T=[];if(E.forEach((C,$)=>{const D=C.dataset.mediaId;D&&T.push({id:parseInt(D),order:$})}),T.length===0)return;const L=document.querySelector('meta[name="csrf-token"]')?.content,k=a.replace("/upload","/reorder");fetch(k,{method:"POST",headers:{"X-CSRF-TOKEN":L,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({media:T,collection:g})}).then(C=>C.json()).then(C=>{C.success?P("success","Files reordered successfully."):(console.error("Order update failed:",C.message),P("danger","Failed to reorder files."))}).catch(C=>{console.error("Order update error:",C),P("danger","Failed to reorder files.")})}function nt(){const E=I.size;E>0?(O.style.display="block",O.querySelector(".selected-count").textContent=E):(O.style.display="none",I.clear())}function mn(){b.querySelectorAll(".media-item").forEach(T=>{const L=T.dataset.mediaId;L&&(I.add(parseInt(L)),T.classList.add("selected"))}),nt()}function gn(){b.querySelectorAll(".media-item").forEach(T=>{T.classList.remove("selected")}),I.clear(),nt()}async function vn(){const E=Array.from(I);if(E.length===0){P("warning","No files selected");return}if(!await ii(`You are going to remove ${E.length} file(s):`,{title:"Delete Files",variant:"error",confirmText:"Delete",cancelText:"Cancel"}))return;const L=document.querySelector('meta[name="csrf-token"]')?.content,k=a.replace("/upload","");fetch(`${k}/bulk-delete`,{method:"POST",headers:{"X-CSRF-TOKEN":L,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({ids:E})}).then(C=>C.ok?C.json():C.json().then($=>{throw new Error($.message||`HTTP ${C.status}`)})).then(C=>{if(C.success)E.forEach($=>{const D=b.querySelector(`[data-media-id="${$}"]`);D&&D.remove();const N=parseInt($,10),H=x.indexOf(N);H!==-1&&x.splice(H,1),M.includes(N)||M.push(N)}),I.clear(),nt(),De(),ke(),P("success",`${C.deleted} file(s) deleted successfully.`);else throw new Error(C.message||"Delete failed")}).catch(C=>{P("danger","Failed to delete files: "+C.message)})}Ie.on("dom:updated",E=>{if(E.classList?.contains("media-field-container"))Qi(E),fr(E);else{const T=E.querySelectorAll?.(".media-field-container")||[];T.forEach(L=>{Qi(L)}),T.length>0&&fr(E)}})})}const is="modulepreload",as=function(t,e){return new URL(t,e).href},ea={},ns=function(e,r,i){let n=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");n=c(r.map(u=>{if(u=as(u,i),u in ea)return;ea[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(i)for(let m=o.length-1;m>=0;m--){const g=o[m];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":is,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return n.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function Va(t=document){t.querySelectorAll("[data-ave-chips]").forEach(e=>{const r=e.querySelector("input");e.addEventListener("click",()=>{r?.focus()}),e.addEventListener("keydown",i=>{if(!r||i.key!=="Enter")return;const n=r.value.trim();if(!n)return;i.preventDefault();const a=document.createElement("span");a.className="chip",a.innerHTML=`${n} <span class="chip-remove" data-ave-chip-remove>&times;</span>`,e.insertBefore(a,r),r.value=""}),e.addEventListener("click",i=>{const n=i.target.closest("[data-ave-chip-remove]");if(!n)return;i.preventDefault(),n.closest(".chip")?.remove()})})}let oi=[],ta=!1;const pr=t=>{oi.forEach(e=>{e!==t&&e.classList.remove("is-open")})},os=(t,e,r,i,n)=>{const a=()=>{const o=n.filter(c=>c.querySelector("input")?.checked);if(!o.length){r.textContent=i,r.classList.add("select-dropdown__placeholder");return}const s=o.map(c=>c.getAttribute("data-label")||c.textContent.trim()),l=s.length>3?`${s.length} options selected`:s.join(", ");r.textContent=l,r.classList.remove("select-dropdown__placeholder")};n.forEach(o=>{const s=o.querySelector('input[type="checkbox"]');s&&(o.classList.toggle("is-selected",s.checked),s.addEventListener("change",()=>{o.classList.toggle("is-selected",s.checked),a()}),o.addEventListener("click",l=>{l.target!==s&&(s.checked=!s.checked,s.dispatchEvent(new Event("change",{bubbles:!0})))}))}),a(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");pr(t),t.classList.toggle("is-open",s)})},ss=(t,e,r,i,n)=>{const a=()=>{const o=n.find(s=>s.querySelector("input")?.checked);o?(r.textContent=o.getAttribute("data-label")||o.textContent.trim(),r.classList.remove("select-dropdown__placeholder")):(r.textContent=i,r.classList.add("select-dropdown__placeholder")),n.forEach(s=>{const l=s.querySelector("input");s.classList.toggle("is-selected",!!l?.checked)})};n.forEach(o=>{const s=o.querySelector('input[type="radio"]');if(!s)return;o.classList.toggle("is-selected",s.checked);const l=()=>{s.checked&&(a(),t.classList.remove("is-open"))};s.addEventListener("change",l),o.addEventListener("click",c=>{c.target!==s&&(s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})))})}),a(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");pr(t),t.classList.toggle("is-open",s)})},ls=(t,e)=>{const r=t.querySelector("[data-ave-select-dropdown-search]");r&&r.addEventListener("input",()=>{const i=r.value.trim().toLowerCase();e.forEach(n=>{const o=(n.getAttribute("data-label")||n.textContent||"").toLowerCase().includes(i);n.classList.toggle("is-hidden",!!i&&!o)})})};function Ga(t=document){const e=Array.from(t.querySelectorAll("[data-ave-select-dropdown]"));e.length&&(e.forEach(r=>{oi.includes(r)||oi.push(r)}),e.forEach(r=>{const i=r.querySelector("[data-ave-select-toggle]"),n=r.querySelector("[data-ave-select-label]"),a=r.querySelector("[data-ave-select-menu]");if(!i||!n||!a)return;const o=i.getAttribute("data-placeholder")||n.textContent.trim();n.classList.add("select-dropdown__placeholder");const s=Array.from(a.querySelectorAll("[data-ave-select-option]")),l=r.getAttribute("data-ave-select-dropdown")||"single";l==="multi"?os(r,i,n,o,s):ss(r,i,n,o,s),l==="search"&&ls(r,s)}),ta||(document.addEventListener("click",r=>{r.target.closest("[data-ave-select-dropdown]")||pr()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&pr()}),ta=!0))}function cs(t){const r=t.closest(".slug-input-wrapper")?.querySelector(".slug-loader");r&&(r.style.display="block"),t.classList.add("is-loading")}function ds(t){const r=t.closest(".slug-input-wrapper")?.querySelector(".slug-loader");r&&(r.style.display="none"),t.classList.remove("is-loading")}async function us(t,e,r,i){try{const n=document.querySelector('meta[name="csrf-token"]')?.content||"",a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json"},body:JSON.stringify({text:t,separator:e,locale:r})});return a.ok?(await a.json()).slug||null:(console.error(`Slug API returned status ${a.status}`),null)}catch(n){return console.error("Failed to generate slug:",n),null}}function hs(t){const e=t.dataset.slugSource;if(!e){console.warn("Slug field missing data-slug-source:",t);return}const r=document.querySelector(`[name="${e}"]`);if(!r){console.warn(`Source field not found: ${e}`);return}const i=t.dataset.slugSeparator||"-",n=t.dataset.slugLocale||null,a=t.dataset.slugApiUrl;if(!a){console.error("Slug field missing data-slug-api-url");return}let o=null;t.addEventListener("focus",async function(){if(!this.value.trim()){const l=r.value.trim();if(l){o&&(o.abort(),o=null),cs(this);const c=new AbortController;o=c;try{const u=await us(l,i,n,a);u!==null&&o===c&&(this.value=u)}finally{ds(this),o===c&&(o=null)}}}})}function Ja(t=document){t.querySelectorAll("[data-slug-field]").forEach(hs)}function Za(t=document){t.querySelectorAll("[data-password-toggle]").forEach(r=>{r.addEventListener("click",function(i){i.preventDefault(),i.stopImmediatePropagation();const n=this.closest(".password-input-wrapper"),a=n?.querySelector("[data-password-input]"),o=this.querySelector(".icon-eye"),s=this.querySelector(".icon-eye-off");!n||!a||(a.type==="password"?(a.type="text",n.classList.add("password-shown"),o&&o.classList.add("hidden"),s&&s.classList.remove("hidden")):(a.type="password",n.classList.remove("password-shown"),o&&o.classList.remove("hidden"),s&&s.classList.add("hidden")))},!0)})}function Qa(t=document){t.querySelectorAll("[data-ave-option-cards]").forEach(e=>{const r=e.querySelectorAll(".option-card"),i=()=>{r.forEach(n=>{const a=n.querySelector("input");n.classList.toggle("selected",!!a?.checked)})};r.forEach(n=>{const a=n.querySelector("input");a&&(a.addEventListener("change",()=>{if(a.type==="radio"){r.forEach(o=>{const s=o.querySelector("input");o.classList.toggle("selected",s===a)});return}n.classList.toggle("selected",a.checked)}),n.addEventListener("click",o=>{o.target!==a&&(a.type==="radio"?(a.checked=!0,a.dispatchEvent(new Event("change",{bubbles:!0}))):(a.checked=!a.checked,a.dispatchEvent(new Event("change",{bubbles:!0}))))}))}),i()})}let Nr=null;async function fs(){return Nr||(Nr=ns(()=>import("./editors.js"),[],import.meta.url)),Nr}function en(t){ga(t),Va(t),Qa(t),Ga(t),Za(t),Ja(t),fr(t)}async function tn(t){let e=null;try{e=await fs()}catch(n){console.error("Failed to load editors bundle",n);return}const{initCodeEditor:r,initRichEditor:i}=e;typeof r=="function"&&r(t),typeof i=="function"&&i(t)}function ps(){Ie.on("dom:updated",t=>{en(t),tn(t)})}function Re(t,e=null,r=null){if(t){if(!e||!r){const i=t.querySelector(".fieldset-item-header, [data-head-title-field], [data-head-preview-field]");if(!i)return;e=e||i.dataset.headTitleField,r=r||i.dataset.headPreviewField}e&&ms(t,e),r&&gs(t,r)}}function ms(t,e){if(!t||!e)return;const r=t.querySelector("[data-item-title]");if(!r)return;let i=t.querySelector(`[name$="[${e}]"]`);i||(i=t.querySelector(`[name*="[${e}]"]`)),i&&i.value?(r.textContent=i.value,r.style.display="block"):r.style.display="none",rn(t)}function rn(t){const e=t.querySelector("[data-item-placeholder]");if(!e)return;const r=t.querySelector("[data-item-title]"),i=t.querySelector("[data-item-preview]"),n=r&&r.style.display!=="none"&&r.textContent.trim(),a=i&&i.style.display!=="none"&&i.style.backgroundImage;!n&&!a?e.style.display="flex":e.style.display="none"}function gs(t,e){if(!t||!e)return;const r=t.querySelector("[data-item-preview]");if(!r)return;const i=t.querySelector(`[data-field-name*="${e}"]`);if(!i){r.style.backgroundImage="",r.style.display="none";return}let n=null;if(n=i.dataset.previewUrl,!n){const a=i.querySelector(".media-preview img");a&&a.src&&(n=a.src)}n&&n.length>0?(r.style.backgroundImage=`url('${n}')`,r.style.display="block"):(r.style.backgroundImage="",r.style.display="none"),rn(t)}const an=new WeakMap,si=new Map;function vs(t,e,r){if(!t){console.error("Cannot register sortable: container is null");return}an.set(t,r),si.set(e,t)}function Zt(t){const e=si.get(t);return e?document.contains(e)?an.get(e)||null:(si.delete(t),null):null}function ys(t=document){t.querySelectorAll("[data-fieldset]").forEach(e=>{const r=e.dataset.fieldName,i=e.querySelector("[data-fieldset-items]"),n=document.getElementById(`fieldset-template-${r}`),a=e.querySelector('[data-action="add"]'),o=e.dataset.sortable==="true",s=e.dataset.collapsible==="true",l=parseInt(e.dataset.minItems)||0,c=parseInt(e.dataset.maxItems)||null;if(!n){console.error(`FieldSet template not found: fieldset-template-${r}`);return}let u=null;const d=()=>Array.from(i.querySelectorAll("[data-field-id]")).map(S=>parseInt(S.value,10)).filter(Number.isInteger),h=()=>{const S=new Set(d());let v=0;for(;S.has(v);)v++;return v},f=(S,v)=>S.replace(/__INDEX__/g,v).replace(/__index__/g,v).replace(/__ITEM__/g,v).replace(/__item__/g,v).replace(/__TEMPLATE__/g,v).replace(/__template__/g,v),m=(S,v,p)=>{[S,...S.querySelectorAll("*")].forEach(M=>{Array.from(M.attributes||[]).forEach(I=>{const U=f(I.value,p);U!==I.value&&M.setAttribute(I.name,U)}),Object.entries(M.dataset||{}).forEach(([I,U])=>{const W=f(U,p);W!==U&&(M.dataset[I]=W)})}),S.dataset.itemIndex=v,S.dataset.itemId=p};if(o){const S=e.classList.contains("fieldset-cards-view"),v={animation:hr.SORTABLE,easing:bi.SORTABLE,ghostClass:"sortable-ghost",dragClass:"sortable-drag",disabled:!S,onEnd:()=>{b()}};S||(v.handle=".fieldset-drag-handle"),u=_.create(i,v),vs(e,r,u)}a&&a.addEventListener("click",()=>{const S=i.querySelectorAll(".fieldset-item").length;if(c&&S>=c){alert(`Maximum ${c} items allowed`);return}const v=n.content.cloneNode(!0);i.appendChild(v);const p=i.lastElementChild;if(!p){console.error("Failed to add fieldset item");return}const x=h();m(p,S,x);const M=p.querySelector("[data-field-id]");M&&(M.value=x),p.querySelectorAll(".media-field-container").forEach(I=>{I.dataset.initialized="false"}),en(p),tn(p),Ie.emit("dom:updated",p),b(),Re(p)}),i.addEventListener("click",async S=>{const v=S.target.closest('[data-action="delete"]');if(!v)return;const p=v.closest(".fieldset-item");if(!p)return;const x=i.querySelectorAll(".fieldset-item").length;if(l>0&&x<=l){Jo(`Minimum ${l} items required`,{title:"Deletion Blocked",variant:"warning",confirmText:"OK"});return}await ii("Are you sure you want to delete this item?",{title:"Delete Item",variant:"error",confirmText:"Delete",cancelText:"Cancel"})&&(p.remove(),b())}),s&&i.addEventListener("click",S=>{const v=S.target.closest('[data-action="collapse"]');if(!v)return;const p=v.closest(".fieldset-item");if(!p)return;const x=p.querySelector(".fieldset-item-fields");if(!x)return;p.classList.contains("collapsed")?(p.classList.remove("collapsed"),x.style.maxHeight=x.scrollHeight+"px",setTimeout(()=>{x.style.maxHeight=""},hr.COLLAPSE)):(x.style.maxHeight=x.scrollHeight+"px",x.offsetHeight,x.style.maxHeight="0",p.classList.add("collapsed"))});const g=e.querySelector('[data-action="collapse-all"]');g&&g.addEventListener("click",()=>{i.querySelectorAll(".fieldset-item").forEach(v=>{if(!v.classList.contains("collapsed")){const p=v.querySelector(".fieldset-item-fields");p&&(p.style.maxHeight=p.scrollHeight+"px",p.offsetHeight,p.style.maxHeight="0",v.classList.add("collapsed"))}})});const y=e.querySelector('[data-action="expand-all"]');y&&y.addEventListener("click",()=>{i.querySelectorAll(".fieldset-item").forEach(v=>{if(v.classList.contains("collapsed")){const p=v.querySelector(".fieldset-item-fields");p&&(v.classList.remove("collapsed"),p.style.maxHeight=p.scrollHeight+"px",setTimeout(()=>{p.style.maxHeight=""},300))}})});const A=e.querySelector('[data-action="toggle-sort"]');if(A&&u){const S=v=>{[g,y].forEach(p=>{p&&(p.disabled=!v,p.classList.toggle("is-disabled",!v))})};S(!A.checked),A.addEventListener("change",v=>{v.target.checked?(e.classList.add("sort-mode"),u.option("disabled",!1),S(!1),i.querySelectorAll(".fieldset-item").forEach(M=>{const I=M.querySelector(".fieldset-item-fields");I&&(I.style.maxHeight="0",M.classList.add("collapsed"))})):(e.classList.remove("sort-mode"),u.option("disabled",!0),S(!0),i.querySelectorAll(".fieldset-item").forEach(M=>{const I=M.querySelector(".fieldset-item-fields");I&&(M.classList.remove("collapsed"),I.style.maxHeight="")}))})}function b(){i.querySelectorAll(".fieldset-item").forEach((v,p)=>{v.dataset.itemIndex=p;const x=v.querySelector(".fieldset-item-number");x&&(x.textContent=p+1);const M=v.querySelector(".fieldset-item-order");M&&(M.textContent=p+1)})}b(),O(),i.addEventListener("input",S=>{const v=S.target.closest(".fieldset-item");v&&Re(v)}),i.addEventListener("mediaChanged",S=>{const v=S.target.closest(".fieldset-item");v&&Re(v)});function O(){i.querySelectorAll(".fieldset-item").forEach(v=>Re(v))}})}let it=0;const nn="fieldset-editing";function bs(t="default"){return it++,it===1&&document.body.classList.add(nn),it}function Hr(t="default"){return it>0&&it--,it===0&&document.body.classList.remove(nn),it}function ws(t=document){t.querySelectorAll("[data-fieldset].fieldset-cards-view").forEach(e=>{if(!e.querySelector("[data-head-title-field], [data-head-preview-field]"))return;const i=e.querySelector("[data-fieldset-items]"),n=e.dataset.fieldName;e.addEventListener("input",a,!0),e.addEventListener("change",a,!0),e.addEventListener("mediaChanged",o,!0),e.addEventListener("click",s=>{const l=s.target.closest('[data-action="close-sidebar"]');if(l){const d=l.closest("[data-item-index]");if(d){s.stopPropagation(),d.classList.remove("is-editing"),Hr(),Re(d);const h=Zt(n);h&&h.option("disabled",!1),i.classList.remove("sortable-disabled")}return}if(s.target.closest('[data-action="delete"]'))return;const u=s.target.closest(".fieldset-card-header");if(u){const d=u.closest("[data-item-index]");if(d){d.classList.add("is-editing"),bs();const h=Zt(n);h&&h.option("disabled",!0),i.classList.add("sortable-disabled")}return}}),document.addEventListener("keydown",s=>{if(s.key==="Escape"){const l=e.querySelector(".fieldset-item.is-editing");if(l){Re(l),l.classList.remove("is-editing"),Hr();const c=Zt(n);c&&c.option("disabled",!1),i.classList.remove("sortable-disabled")}}}),document.addEventListener("click",s=>{if(s.target===document.body||s.target.tagName==="HTML"){const l=e.querySelector(".fieldset-item.is-editing");if(l){Re(l),l.classList.remove("is-editing"),Hr();const c=Zt(n);c&&c.option("disabled",!1),i.classList.remove("sortable-disabled")}}});function a(s){const l=s.target.closest("[data-item-index]");l&&Re(l)}function o(s){const l=s.target.closest("[data-item-index]");l&&Re(l)}})}function Es(t=document){t.querySelectorAll('.toggle[data-toggle="toggle"]').forEach(r=>{if(r.dataset.initialized==="true")return;r.dataset.initialized="true";const i=r.querySelector('input[type="checkbox"]'),n=r.querySelector(".toggle-on"),a=r.querySelector(".toggle-off");if(!i||!n||!a)return;const o=()=>{r.classList.toggle("off",!i.checked),n.classList.toggle("active",i.checked),a.classList.toggle("active",!i.checked)};o(),on(r),i.addEventListener("change",o),r.addEventListener("click",()=>{i.checked=!i.checked,i.dispatchEvent(new Event("change"))})}),Ss()}function on(t){const e=t.querySelector(".toggle-on"),r=t.querySelector(".toggle-off");if(!e||!r)return;const i=e.offsetWidth,n=r.offsetWidth,a=Math.max(i,n);a>0&&(t.style.minWidth=a+5+"px",e.style.width=a+"px",e.style.minWidth=a+"px",r.style.width=a+"px",r.style.minWidth=a+"px")}let ra=!1;function Ss(){ra||(ra=!0,Ie.on("tab:activated",({pane:t})=>{requestAnimationFrame(()=>{t.querySelectorAll('.toggle[data-toggle="toggle"]').forEach(r=>{on(r)})})}))}function Ts(t=document){t.querySelectorAll("[data-tags-field]").forEach(r=>{r.dataset.tagsField;const i=r.querySelector(".tags-input"),n=r.parentElement.querySelector(".tags-hidden-input"),a=i?.dataset.tagsSeparator||",";i&&(i.addEventListener("keydown",o=>{if(o.key==="Enter"||o.key===a){o.preventDefault();const s=i.value.trim();s&&(Br(r,s,n,a),i.value="")}if(o.key==="Tab"){const s=i.value.trim();s&&(o.preventDefault(),Br(r,s,n,a),i.value="")}}),i.addEventListener("blur",()=>{const o=i.value.trim();o&&(Br(r,o,n,a),i.value="")}),r.addEventListener("click",o=>{o.target.classList.contains("chip-remove")&&(o.target.closest(".chip").remove(),sn(r,n,a))}))})}function Br(t,e,r,i){const n=t.querySelectorAll(".chip-text"),a=e.toLowerCase();for(const l of n)if(l.textContent.toLowerCase()===a)return;const o=document.createElement("div");o.className="chip",o.tabIndex=0,o.innerHTML=`
        <span class="chip-text">${xs(e)}</span>
        <span class="chip-remove" data-tag-remove>&times;</span>
    `;const s=t.querySelector(".tags-input");s.parentElement.insertBefore(o,s),sn(t,r,i)}function sn(t,e,r){const i=t.querySelectorAll(".chip-text"),n=Array.from(i).map(a=>a.textContent.trim());e.value=n.join(r.trim()+" ")}function xs(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,r=>e[r])}function As(t=document){t.querySelectorAll("[data-file-field]").forEach(r=>{const i=r.dataset.fileField,n=r.dataset.customPath||"",a=r.dataset.pathPrefix||"",o=r.querySelector("[data-file-input]"),s=r.querySelector("[data-file-delete]"),l=r.querySelector(".file-path-input"),c=r.querySelector("[data-file-progress]"),u=r.querySelector("[data-file-input-area]"),d=r.querySelector(".file-preview");if(!o||!l){console.error("[Ave] File upload: missing required elements for field",i);return}o.addEventListener("change",h=>{const f=h.target.files[0];if(!f)return;c.style.display="block";const m=c.querySelector(".progress-fill");m.style.width="0%";const g=new FormData;g.append("file",f),g.append("field",i);const y=r.closest("form"),A=y?.dataset.modelType||"",b=y?.dataset.modelId||"";A&&g.append("model_type",A),b&&g.append("model_id",b),n&&g.append("customPath",n),a&&g.append("pathPrefix",a);const O=document.querySelector('meta[name="csrf-token"]')?.content,S=new XMLHttpRequest;S.upload.addEventListener("progress",v=>{if(v.lengthComputable){const p=v.loaded/v.total*100;m.style.width=p+"%"}}),S.addEventListener("load",()=>{if(c.style.display="none",S.status===200)try{const v=JSON.parse(S.responseText);v.success&&v.path?(l.value=v.path,Ds(r,f.name,v.path),u.classList.add("hidden"),o.value=""):alert("Upload failed: "+(v.message||"Unknown error"))}catch(v){console.error("[Ave] Error parsing upload response:",v),alert("Error processing upload response")}else console.error("[Ave] Upload failed with status:",S.status),alert("Upload failed with status: "+S.status)}),S.addEventListener("error",()=>{c.style.display="none",console.error("[Ave] Upload error occurred"),alert("Upload error occurred")}),S.open("POST","/admin/api/file-upload"),S.setRequestHeader("X-Requested-With","XMLHttpRequest"),O&&S.setRequestHeader("X-CSRF-TOKEN",O),S.send(g)}),s&&s.addEventListener("click",h=>{h.preventDefault(),h.stopPropagation(),l.value="",d&&d.remove(),u.classList.remove("hidden"),o.value=""})})}function Ds(t,e,r){const i=t.querySelector(".file-preview");i&&i.remove();const n=document.createElement("div");n.className="file-preview",n.innerHTML=`
        <div class="file-item">
            <div class="file-info">
                <span class="file-name">${ia(e)}</span>
                <span class="file-size" data-file-path="${ia(r)}"></span>
            </div>
            <button type="button" class="file-delete-btn" data-file-delete style="cursor: pointer;">
                <i class="voyager-trash"></i> Remove
            </button>
        </div>
    `;const a=t.querySelector("[data-file-input-area]");a.parentElement.insertBefore(n,a);const o=n.querySelector("[data-file-delete]");o&&o.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const l=t.querySelector(".file-path-input");l.value="",n.remove(),t.querySelector("[data-file-input-area]").classList.remove("hidden");const u=t.querySelector("[data-file-input]");u.value=""})}function ia(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,r=>e[r])}function Ls(t=document){ga(t),Va(t),Qa(t),Ga(t),Za(t),Es(t),Ja(t),Ts(t),As(t),fr(t),ys(t),ws(t),t.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",()=>{rs()})})}function Cs(){document.querySelectorAll('[data-ave-tabs="nav"]').forEach(e=>{const r=e.closest("[data-ave-tabs-root]"),i=r?Array.from(r.querySelectorAll("[data-ave-tab-pane]")):[],n=Array.from(e.querySelectorAll("[data-ave-tab-target]"));n.length===0||i.length===0||(_s(n,i,r),n.forEach(a=>{a.addEventListener("click",o=>{o.preventDefault();const s=a.getAttribute("data-ave-tab-target");if(!s)return;const l=i.find(c=>c.matches(s));l&&ln(n,i,a,l,r)})}))})}function ln(t,e,r,i,n){t.forEach(a=>{a.classList.toggle("active",a===r);const o=a.querySelector("a");o&&o.setAttribute("aria-selected",String(a===r))}),e.forEach(a=>{a.classList.toggle("active",a===i)}),Ie.emit("tab:activated",{pane:i,tabsRoot:n})}function _s(t,e,r){const i=document.querySelector(".form-field.has-error");if(!i)return;const n=e.find(s=>s.contains(i));if(!n)return;const a=n.getAttribute("id"),o=t.find(s=>s.getAttribute("data-ave-tab-target")===`#${a}`);o&&ln(t,e,o,n,r)}function Ms(){document.querySelectorAll(".alert-dismissible .close").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const r=t.closest(".alert");r&&r.remove()})})}function Os(){document.querySelectorAll("[data-ave-accordion-toggle]").forEach(t=>{const e=t.getAttribute("data-ave-accordion-toggle");if(!e)return;const r=e.startsWith("#")?e:`#${e}`,i=document.querySelector(r);i&&t.addEventListener("click",n=>{n.preventDefault();const o=!(t.getAttribute("aria-expanded")==="true");t.setAttribute("aria-expanded",String(o)),i.classList.toggle("show",o)})})}const Is=t=>{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();let r=!1;try{r=document.execCommand("copy")}catch{r=!1}return document.body.removeChild(e),r};function qs(){document.querySelectorAll("[data-ave-copy]").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();const r=t.getAttribute("data-ave-copy");if(!r)return;const i=document.querySelector(r);if(!i)return;const n=i.value??i.textContent??"";try{await navigator.clipboard.writeText(n),P("success","Copied to clipboard.")}catch{Is(n)?P("success","Copied to clipboard."):P("danger","Copy failed. Please try again.")}})})}function Ps(){Qo(),Cs(),Ms(),Zo(),Os(),qs()}function ks(){if(!document.body.classList.contains("ave-login"))return;const t=document.forms[0],e=t?.querySelector('button[type="submit"]'),r=t?.querySelector('[name="email"]'),i=t?.querySelector('[name="password"]');if(!t||!e||!r||!i)return;e.addEventListener("click",a=>{if(t.checkValidity()){const o=e.querySelector(".signingin"),s=e.querySelector(".signin");o&&s&&(o.classList.remove("hidden"),s.classList.add("hidden"))}else a.preventDefault()}),r.focus();const n=document.getElementById("emailGroup");n&&n.classList.add("focused")}function Rs(t){const{title:e,fetchUrl:r,saveUrl:i,fetchParams:n={},onSuccess:a=null,onError:o=null,confirmText:s="Save",cancelText:l="Cancel",size:c="default"}=t,u=Ve({title:"Loading...",body:'<div class="spinner">Loading form...</div>',type:"alert",size:"small"});Ns(r,n).then(({formHtml:d,currentData:h})=>{Ke(u);const f=Ve({title:e,body:d,type:"form",size:c,confirmText:s,cancelText:l,onConfirm:m=>{Hs(m,i,a,o)}});Ie.emit("dom:updated",f)}).catch(d=>{Ke(u),P("danger","Failed to load form: "+d.message),o&&o(d)})}function Ns(t,e={}){const r=document.querySelector('meta[name="csrf-token"]')?.content,i=new URLSearchParams(e).toString(),n=i?`${t}?${i}`:t;return fetch(n,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":r}}).then(a=>{if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);return a.json()}).then(a=>{if(!a.success)throw new Error(a.message||"Failed to load form");return{formHtml:a.formHtml||"",currentData:a.currentData||{}}})}function Hs(t,e,r=null,i=null){const n=document.querySelector('meta[name="csrf-token"]')?.content,a=new FormData;t.querySelectorAll("input, textarea, select").forEach(o=>{o.name&&(o.type==="checkbox"?a.append(o.name,o.checked?"1":"0"):o.type==="radio"?o.checked&&a.append(o.name,o.value):a.append(o.name,o.value))}),fetch(e,{method:"POST",headers:{"X-CSRF-TOKEN":n,Accept:"application/json"},body:a}).then(o=>o.ok?o.json():o.json().then(s=>{throw new Error(s.message||`HTTP ${o.status}`)})).then(o=>{if(o.success)P("success",o.message||"Saved successfully"),r&&r(o),Ke(t);else throw new Error(o.message||"Save failed")}).catch(o=>{P("danger","Failed to save: "+o.message),i&&i(o)})}const Bs="[data-ave-action]",aa=document.querySelector('meta[name="csrf-token"]'),Xr=aa?aa.content:"",mr="     .";function Xs(t){t.dataset.actionLoading="true",t.classList.add("is-loading"),t.setAttribute("aria-busy","true"),(t.tagName==="BUTTON"||t.tagName==="INPUT")&&(t.disabled=!0)}function Ys(t){t.dataset.actionLoading="false",t.classList.remove("is-loading"),t.removeAttribute("aria-busy"),(t.tagName==="BUTTON"||t.tagName==="INPUT")&&(t.disabled=!1)}function Ws(){Qs(),document.addEventListener("click",$s,!0)}function $s(t){const e=t.target.closest(Bs);if(!e||(t.preventDefault(),e.dataset.actionLoading==="true"))return;const r=e.dataset.aveAction,i=e.dataset.actionEndpoint;if(!i){console.warn("Ave action missing endpoint",e);return}if(r==="bulk"&&dn().length===0){P("warning","    .");return}const n=zs(e.dataset.actionConfig),a=e.dataset.actionConfirmMessage,o=async(s={},l={})=>{Xs(e);try{await Fs(e,i,s,l)}finally{Ys(e)}};if(Array.isArray(n.form)&&n.form.length>0){el(e,n,o);return}if(e.dataset.actionConfirm==="true"){Ve({title:n.label||" ",body:a||" ,    ?",type:"confirm",variant:e.dataset.variant||"primary",confirmText:n.label||"",onConfirm:()=>o()});return}o()}async function Fs(t,e,r={},i={}){const n=t.dataset.aveAction,a=new FormData,o=t.dataset.actionMethod||"POST",s=t.dataset.actionAccept||"application/json";Xr&&!a.has("_token")&&a.append("_token",Xr),a.append("_action",t.dataset.aveActionKey||""),n==="bulk"&&dn().forEach(h=>a.append("ids[]",h)),n==="form"&&js(a,t.dataset.actionFormSelector||"#ave-resource-form"),n==="global"&&new URLSearchParams(window.location.search).forEach((f,m)=>{a.append(m,f)}),Us(a,r);const l=await fetch(e,{method:o,headers:{"X-Requested-With":"XMLHttpRequest",Accept:s,"X-CSRF-TOKEN":Xr},body:a}),c=await Ks(l);if(!l.ok){const h=Vs(l,c);throw i&&i.modal&&Js(i.modal,c?.errors??{},h),P("danger",h),new Error(h)}if(i&&i.modal&&cn(i.modal),c.modal_form===!0){Rs({title:c.title||"Form",fetchUrl:c.fetch_url,saveUrl:c.save_url,size:c.size||"large",onSuccess:h=>{h.reload&&setTimeout(()=>{window.location.reload()},500)}});return}const u=c.message||" .";P("success",u);const d=c.redirect??null;if(d){window.location.href=d;return}c.reload!==!1&&(window.dispatchEvent(new CustomEvent("ave:action:completed",{detail:{type:n,key:t.dataset.aveActionKey,result:c.result??null}})),setTimeout(()=>{window.location.reload()},500))}function zs(t){if(!t)return{};try{return JSON.parse(t)}catch(e){return console.warn("Failed to parse action config",e),{}}}function js(t,e){const r=document.querySelector(e);if(!r)return;new FormData(r).forEach((n,a)=>{t.append(a,n)})}function Us(t,e){!e||typeof e!="object"||Object.entries(e).forEach(([r,i])=>{if(i!=null){if(Array.isArray(i)){i.forEach(n=>t.append(`${r}[]`,n));return}t.append(r,i)}})}async function Ks(t){const e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():{message:await t.text()}}function Vs(t,e){return t.status===422&&e?.errors?Gs(e.errors):e&&typeof e.message=="string"&&e.message.trim()!==""?e.message:t.statusText||mr}function Gs(t){if(!t||typeof t!="object")return mr;const e=Object.values(t).flatMap(i=>Array.isArray(i)?i:[i]).map(i=>(i??"").toString().trim()).filter(i=>i.length>0);if(e.length===0)return mr;const r=e.slice(0,3);return e.length>r.length&&r.push(` +${e.length-r.length} `),r.join(`
`)}function cn(t){const e=t.querySelector("[data-ave-action-form]");e&&(e.querySelectorAll(".form-error").forEach(r=>r.remove()),e.querySelectorAll(".form-group.has-error").forEach(r=>{r.classList.remove("has-error")}))}function Js(t,e={},r=""){const i=t.querySelector("[data-ave-action-form]");if(!i)return;cn(t);const n=Object.entries(e);if(n.length===0){if(r){const o=document.createElement("div");o.className="form-error text-danger small",o.textContent=r,i.prepend(o)}return}n.forEach(([o,s])=>{const l=`[name="${Zs(o)}"]`,c=i.querySelectorAll(l);if(c.length===0)return;const d=(Array.isArray(s)?s:[s]).map(h=>(h??"").toString().trim()).filter(Boolean).join(" ")||mr;c.forEach(h=>{const f=h.closest(".form-group")||h.parentElement;if(!f)return;f.classList.add("has-error");const m=document.createElement("div");m.className="form-error text-danger small",m.textContent=d,f.appendChild(m)})});const a=i.querySelector(".form-group.has-error input, .form-group.has-error select, .form-group.has-error textarea");a&&a.focus()}function Zs(t){return window.CSS&&typeof window.CSS.escape=="function"?window.CSS.escape(t):t.replace(/([ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\\\$1")}function Qs(){const t=document.getElementById("bulk-actions-toolbar"),e=document.getElementById("select-all"),r=Array.from(document.querySelectorAll(".row-selector")),i=document.getElementById("selected-count");if(!t||r.length===0)return;const n=()=>{const a=r.filter(o=>o.checked);if(i&&(i.textContent=a.length),t.classList.toggle("is-visible",a.length>0),e){const o=a.length===r.length;e.checked=o,e.indeterminate=a.length>0&&!o}};e&&e.addEventListener("change",a=>{r.forEach(o=>{o.checked=a.target.checked,Yr(o)}),n()}),r.forEach(a=>{a.addEventListener("change",()=>{Yr(a),n()}),Yr(a)}),n()}function dn(){return Array.from(document.querySelectorAll(".row-selector:checked")).map(t=>t.value)}function Yr(t){const e=t.closest(".resource-row");e&&e.classList.toggle("is-selected",t.checked)}function el(t,e,r){const i=Array.isArray(e.form)?e.form:[],n=Ve({title:e.label||" ",body:tl(i),type:"form",variant:t.dataset.variant||"primary",confirmText:e.label||"",autoClose:!1,onConfirm:async()=>{const a=n.querySelector("[data-ave-action-form]"),o=rl(a);try{await r(o,{modal:n}),ur(n)}catch(s){console.warn("Ave action failed",s)}},onCancel:()=>ur(n)});return n}function tl(t){return`
        <form data-ave-action-form>
            ${t.map(r=>{const i=r.name||r.key||"";if(!i)return"";const n=r.label||i,a=(r.type||"text").toLowerCase(),o=r.required?"required":"",s=r.placeholder||"",l=r.help?`<small class="help-block">${r.help}</small>`:"";if(a==="textarea")return`
                    <div class="form-group">
                        <label class="control-label">${n}</label>
                        <textarea class="form-control" name="${i}" ${o} placeholder="${s}"></textarea>
                        ${l}
                    </div>
                `;if(a==="select"&&Array.isArray(r.options)){const c=r.options.map(u=>`<option value="${u.value}">${u.label}</option>`).join("");return`
                    <div class="form-group">
                        <label class="control-label">${n}</label>
                        <select class="form-control" name="${i}" ${o}>
                            ${c}
                        </select>
                        ${l}
                    </div>
                `}return a==="checkbox"?`
                    <div class="form-group">
                        <label class="control-label">
                            <input type="checkbox" name="${i}" value="1" />
                            ${n}
                        </label>
                        ${l}
                    </div>
                `:`
                <div class="form-group">
                    <label class="control-label">${n}</label>
                    <input type="${a}" class="form-control" name="${i}" ${o} placeholder="${s}" />
                    ${l}
                </div>
            `}).join("")}
        </form>
    `}function rl(t){if(!t)return{};const e=new FormData(t),r={};return e.forEach((i,n)=>{r[n]!==void 0?(Array.isArray(r[n])||(r[n]=[r[n]]),r[n].push(i)):r[n]=i}),r}const na=document.querySelector('meta[name="csrf-token"]'),il=na?na.content:"";let oa=!1;function al(){sa(),window.Ave?.events&&!window.Ave.inlineEditingBound&&(window.Ave.events.on("dom:updated",sa),window.Ave.inlineEditingBound=!0)}function sa(){oa||(document.addEventListener("click",nl,!0),oa=!0)}function nl(t){const e=t.target.closest("[data-ave-inline-toggle]");if(!e||(t.preventDefault(),e.dataset.loading==="true"))return;const r=e.dataset.endpoint,i=e.dataset.field;if(!r||!i){console.warn("Inline toggle missing endpoint or field",e);return}const n=e.dataset.trueValue??"1",a=e.dataset.falseValue??"0",s=(e.dataset.currentValue??a)===String(n)?a:n;la(e,!0),ol(r,i,s).then(l=>{const c=l.canonical??l.value,u=String(c)===String(n);e.dataset.currentValue=String(c),e.classList.toggle("is-on",u),e.classList.toggle("is-off",!u);const d=e.querySelector(".toggle-dot"),h=u?e.dataset.onColor||"#16a34a":e.dataset.offColor||"#d1d5db";d&&(d.style.backgroundColor=h),P("success"," ")}).catch(l=>{console.error("Inline toggle failed",l),P("danger",l.message||"   ")}).finally(()=>la(e,!1))}async function ol(t,e,r){const i=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":il,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({field:e,value:r})});if(!i.ok){const n=await i.json().catch(()=>({}));throw new Error(n.message||" ")}return i.json()}function la(t,e){t.dataset.loading=e?"true":"false",t.classList.toggle("is-loading",e),t.setAttribute("aria-busy",e?"true":"false")}function sl(){ll(),cl()}function ll(){document.querySelectorAll(".per-page-select").forEach(e=>{e.addEventListener("change",function(){const r=parseInt(this.value,10);if(!r||r<1)return;const i=new URL(window.location.href);i.searchParams.set("per_page",r.toString()),i.searchParams.delete("page"),window.location.href=i.toString()})})}function cl(){document.querySelectorAll(".pagination-jump-input").forEach(e=>{e.addEventListener("keypress",function(r){r.key==="Enter"&&(r.preventDefault(),dl(this))}),e.addEventListener("blur",function(){const r=li();(this.value===""||parseInt(this.value,10)<1)&&(this.value=r)})})}function dl(t){const e=parseInt(t.value,10),r=parseInt(t.dataset.lastPage,10),i=t.dataset.baseUrl;if(!e||e<1||e>r){t.value=li();return}if(e===li())return;const n=new URL(window.location.href);new URL(i,window.location.origin),e===1?n.searchParams.delete("page"):n.searchParams.set("page",e),window.location.href=n.toString()}function li(){const t=new URLSearchParams(window.location.search);return parseInt(t.get("page")||"1",10)}const ca=document.querySelector('meta[name="csrf-token"]'),ul=ca?ca.content:"";function hl(t=document){t.querySelectorAll('[data-tree="true"]').forEach(e=>{fl(e)})}function fl(t){const e=t.dataset.slug,r=t.dataset.parentColumn,i=t.dataset.orderColumn,n=parseInt(t.dataset.maxDepth||"5"),a=t.dataset.updateEndpoint;pl(t),un(t,n,e,r,i,a)}function pl(t){const e=document.querySelector(".tree-expand-all"),r=document.querySelector(".tree-collapse-all");e&&e.addEventListener("click",()=>{t.querySelectorAll(".tree-list").forEach(i=>{i.style.display=""}),t.querySelectorAll('[data-action="collapse"]').forEach(i=>{i.classList.remove("hidden")}),t.querySelectorAll('[data-action="expand"]').forEach(i=>{i.classList.add("hidden")})}),r&&r.addEventListener("click",()=>{t.querySelectorAll(".tree-item > .tree-list").forEach(i=>{i.style.display="none"}),t.querySelectorAll('[data-action="collapse"]').forEach(i=>{i.classList.add("hidden")}),t.querySelectorAll('[data-action="expand"]').forEach(i=>{i.classList.remove("hidden")})}),t.querySelectorAll(".dd-item-btns button").forEach(i=>{i.addEventListener("click",n=>{n.preventDefault();const a=i.dataset.action,o=i.closest(".tree-item"),s=o.querySelector(":scope > .tree-list");s&&(a==="collapse"?(s.style.display="none",i.classList.add("hidden"),o.querySelector('[data-action="expand"]')?.classList.remove("hidden")):(s.style.display="",i.classList.add("hidden"),o.querySelector('[data-action="collapse"]')?.classList.remove("hidden")))})})}let da=new Map;function un(t,e,r,i,n,a){t.querySelectorAll(".tree-list").forEach(s=>{if(da.has(s))return;const l=_.create(s,{group:{name:"tree-nested",pull:!0,put:!0},animation:hr.SORTABLE,easing:bi.SORTABLE,handle:".tree-drag-handle",fallbackOnBody:!0,swapThreshold:5,direction:"vertical",emptyInsertThreshold:1,ghostClass:"sortable-ghost",dragClass:"sortable-drag",onMove:c=>{const u=c.dragged,d=c.to,h=gl(d),f=hn(u);if(h+f>e)return!1},onEnd:c=>{ml(t),setTimeout(()=>{un(t,e,r,i,n,a)},50),yl(t,r,i,n,a)}});da.set(s,l)})}function ml(t){t.querySelectorAll(".tree-item").forEach(e=>{const r=e.querySelector(":scope > .tree-list"),i=e.querySelector(".dd-item-btns");if(r&&r.querySelectorAll(":scope > .tree-item").length>0)if(r&&r.classList.remove("tree-list-empty"),i)i.style.display="";else{const a=e.querySelector(".dd-handle");if(a){const o=document.createElement("div");o.className="dd-item-btns",o.innerHTML=`
                        <button type="button" data-action="expand" class="hidden" aria-label="Expand">
                            <i class="voyager-angle-down"></i>
                        </button>
                        <button type="button" data-action="collapse" aria-label="Collapse">
                            <i class="voyager-angle-up"></i>
                        </button>
                    `,a.insertBefore(o,a.querySelector(".dd-content")),o.querySelectorAll("button").forEach(s=>{s.addEventListener("click",l=>{l.preventDefault();const c=s.dataset.action,u=s.closest(".tree-item"),d=u.querySelector(":scope > .tree-list");d&&(c==="collapse"?(d.style.display="none",s.classList.add("hidden"),u.querySelector('[data-action="expand"]')?.classList.remove("hidden")):(d.style.display="",s.classList.add("hidden"),u.querySelector('[data-action="collapse"]')?.classList.remove("hidden")))})})}}else r&&r.classList.add("tree-list-empty"),i&&(i.style.display="none")})}function gl(t){let e=0,r=t;for(;r&&!r.matches('[data-tree="true"]');)r.matches(".tree-list")&&e++,r=r.parentElement;return e}function hn(t){let e=1;const r=t.querySelector(":scope > .tree-list");return r&&r.querySelectorAll(":scope > .tree-item").forEach(n=>{const a=hn(n);e=Math.max(e,1+a)}),e}function vl(t){const e=t.querySelector(":scope > .tree-list");return e?fn(e):[]}function fn(t){const e=[];return t.querySelectorAll(":scope > .tree-item").forEach(i=>{const n=parseInt(i.dataset.id),a=i.querySelector(":scope > .tree-list"),o={id:n};if(a){const s=fn(a);s.length>0&&(o.children=s)}e.push(o)}),e}function yl(t,e,r,i,n){const a=vl(t);fetch(n,{method:"POST",headers:{"X-CSRF-TOKEN":ul,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tree:a,parent_column:r,order_column:i})}).then(o=>o.json()).then(o=>{o.success?P("success",o.message||"Tree structure updated"):P("danger",o.message||"Failed to update tree")}).catch(o=>{console.error("Tree update error:",o),P("danger","Failed to update tree structure")})}const ua=document.querySelector('meta[name="csrf-token"]'),bl=ua?ua.content:"";function wl(t=document){t.querySelectorAll('[data-sortable="true"]').forEach(e=>{El(e)})}function El(t){const e=t.dataset.slug,r=t.dataset.orderColumn||"order",i=t.dataset.updateEndpoint;if(t.sortableInstance)return;const n=_.create(t,{animation:150,handle:".sortable-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",onStart:function(a){console.log("Drag started:",a.item)},onEnd:function(a){console.log("Drag ended. Old index:",a.oldIndex,"New index:",a.newIndex),a.oldIndex!==a.newIndex&&Tl(t,e,r,i)}});t.sortableInstance=n}function Sl(t,e){const r=t.querySelectorAll("tr[data-id]"),i=[];return r.forEach((n,a)=>{const o=parseInt(n.dataset.id);i.push({id:o,[e]:a})}),i}function Tl(t,e,r,i){const n=Sl(t,r);fetch(i,{method:"POST",headers:{"X-CSRF-TOKEN":bl,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({items:n})}).then(a=>a.json()).then(a=>{a.success?P("success",a.message||"Order updated successfully"):(P("danger",a.message||"Failed to update order"),window.location.reload())}).catch(a=>{console.error("Sortable table update error:",a),P("danger","Failed to update table order"),setTimeout(()=>window.location.reload(),1500)})}async function pn(t,e){const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"},body:JSON.stringify(e)});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.message||"Request failed")}return r.json()}function xl(){const t=document.querySelectorAll("tbody.group-items-tbody[data-group-id]");t.length!==0&&t.forEach(e=>{const r={slug:e.dataset.slug,groupId:e.dataset.groupId,groupColumn:e.dataset.groupColumn,orderColumn:e.dataset.orderColumn,updateEndpoint:e.dataset.updateEndpoint,groupUpdateEndpoint:e.dataset.groupUpdateEndpoint};_.create(e,{animation:150,handle:".sortable-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",group:{name:"shared-groups",pull:!0,put:!0},onEnd:i=>Al(i,r)})})}function Al(t,e){const r=t.item.dataset.id,i=t.to,n=t.from,a=i.dataset.groupId,o=n.dataset.groupId;a!==o?Dl(r,i,n,a,o,e,t):t.oldIndex!==t.newIndex&&Ll(i,a,e)}function Dl(t,e,r,i,n,a,o){Cl(t,i,a.groupColumn,a.groupUpdateEndpoint).then(()=>ci(e,i,a.orderColumn,a.updateEndpoint)).then(()=>{if(r.querySelectorAll(".sortable-row").length>0)return ci(r,n,a.orderColumn,a.updateEndpoint)}).then(()=>{P("success","Item moved to new group successfully")}).catch(s=>{console.error("Error updating groups:",s),P("danger","Error updating item group"),r.insertBefore(o.item,r.children[o.oldIndex])})}function Ll(t,e,r){ci(t,e,r.orderColumn,r.updateEndpoint).then(()=>{P("success","Order updated successfully")}).catch(i=>{console.error("Error saving order:",i),P("danger","Error saving order")})}async function Cl(t,e,r,i){return pn(i,{item_id:t,group_column:r,group_id:e})}async function ci(t,e,r,i){const n=t.querySelectorAll(".sortable-row"),a={};return n.forEach((o,s)=>{a[o.dataset.id]=s+1}),pn(i,{order:a,order_column:r,group_id:e})}function _l(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function Ml(t){t.hasAttribute("required")&&(t.dataset.hadRequired="true",t.removeAttribute("required")),t.hasAttribute("minlength")&&(t.dataset.hadMinlength=t.getAttribute("minlength"),t.removeAttribute("minlength")),t.hasAttribute("maxlength")&&(t.dataset.hadMaxlength=t.getAttribute("maxlength"),t.removeAttribute("maxlength")),t.hasAttribute("pattern")&&(t.dataset.hadPattern=t.getAttribute("pattern"),t.removeAttribute("pattern")),t.hasAttribute("min")&&(t.dataset.hadMin=t.getAttribute("min"),t.removeAttribute("min")),t.hasAttribute("max")&&(t.dataset.hadMax=t.getAttribute("max"),t.removeAttribute("max")),t.hasAttribute("step")&&(t.dataset.hadStep=t.getAttribute("step"),t.removeAttribute("step"))}function Ol(){Wr(),new MutationObserver(()=>{Wr()}).observe(document.documentElement,{attributes:!0,attributeFilter:["style","class"],subtree:!0,characterData:!1}),document.addEventListener("submit",e=>{const r=e.target;r&&r.tagName==="FORM"&&Wr(r)})}function Wr(t=document){const e=t.querySelectorAll("input[required], input[minlength], input[maxlength], input[pattern], input[min], input[max], input[step], textarea[required], textarea[minlength], textarea[maxlength], textarea[pattern], select[required]");Array.from(e).forEach(r=>{_l(r)||Ml(r)})}window.Ave=window.Ave||{};window.Ave.events=Ie;document.addEventListener("DOMContentLoaded",()=>{Ol(),ps(),Pn(),kn(),Ps(),Ls(),ks(),Ws(),al(),sl(),xl(),hl(),wl(),Ie.emit("dom:updated",document)});window.addEventListener("load",()=>{const t=document.getElementById("ave-loader");t&&setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},300)},200)});
