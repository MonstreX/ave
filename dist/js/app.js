class xi{constructor(){this.listeners={}}on(e,n){typeof e=="string"&&(e=[e]),e.forEach(r=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)})}once(e,n){typeof e=="string"&&(e=[e]);const r=(...a)=>{n(...a),this.off(e,r)};this.on(e,r)}off(e,n){typeof e=="string"&&(e=[e]),e.forEach(r=>{this.listeners[r]&&(this.listeners[r]=this.listeners[r].filter(a=>a!==n))})}emit(e,n){this.listeners[e]&&this.listeners[e].forEach(r=>{try{r(n)}catch(a){console.error(`Error in event listener for '${e}':`,a)}})}listeners(e){return this.listeners[e]||[]}hasListeners(e){return(this.listeners[e]||[]).length>0}flush(e){e?this.listeners[e]=[]:this.listeners={}}}const xe=new xi;/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Ie(t){return getComputedStyle(t)}function ve(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function Ut(t){var e=document.createElement("div");return e.className=t,e}var Ar=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Ke(t,e){if(!Ar)throw new Error("No element matching method supported");return Ar.call(t,e)}function pt(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function _r(t,e){return Array.prototype.filter.call(t.children,function(n){return Ke(n,e)})}var ne={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},ma={x:null,y:null};function ga(t,e){var n=t.element.classList,r=ne.state.scrolling(e);n.contains(r)?clearTimeout(ma[e]):n.add(r)}function va(t,e){ma[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(ne.state.scrolling(e))},t.settings.scrollingThreshold)}function Ai(t,e){ga(t,e),va(t,e)}var Yt=function(e){this.element=e,this.handlers={}},ya={isEmpty:{configurable:!0}};Yt.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n),this.element.addEventListener(e,n,!1)};Yt.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(a){return n&&a!==n?!0:(r.element.removeEventListener(e,a,!1),!1)})};Yt.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};ya.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(Yt.prototype,ya);var St=function(){this.eventElements=[]};St.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new Yt(e),this.eventElements.push(n)),n};St.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};St.prototype.unbind=function(e,n,r){var a=this.eventElement(e);a.unbind(n,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};St.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};St.prototype.once=function(e,n,r){var a=this.eventElement(e),i=function(o){a.unbind(n,i),r(o)};a.bind(n,i)};function Kt(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function cn(t,e,n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var i;if(e==="top")i=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")i=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");_i(t,n,i,r,a)}function _i(t,e,n,r,a){var i=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=t.element;t.reach[l]=null,d[s]<1&&(t.reach[l]="start"),d[s]>t[i]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(Kt("ps-scroll-"+l)),e<0?d.dispatchEvent(Kt("ps-scroll-"+c)):e>0&&d.dispatchEvent(Kt("ps-scroll-"+u)),r&&Ai(t,l)),t.reach[l]&&(e||a)&&d.dispatchEvent(Kt("ps-"+l+"-reach-"+t.reach[l]))}function G(t){return parseInt(t,10)||0}function Li(t){return Ke(t,"input,[contenteditable]")||Ke(t,"select,[contenteditable]")||Ke(t,"textarea,[contenteditable]")||Ke(t,"button,[contenteditable]")}function Ci(t){var e=Ie(t);return G(e.width)+G(e.paddingLeft)+G(e.paddingRight)+G(e.borderLeftWidth)+G(e.borderRightWidth)}var ft={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function We(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.floor(r.width),t.containerHeight=Math.floor(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(_r(e,ne.element.rail("x")).forEach(function(a){return pt(a)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(_r(e,ne.element.rail("y")).forEach(function(a){return pt(a)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=Lr(t,G(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=G((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=Lr(t,G(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=G(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),Di(e,t),t.scrollbarXActive?e.classList.add(ne.state.active("x")):(e.classList.remove(ne.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(ne.state.active("y")):(e.classList.remove(ne.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function Lr(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function Di(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,ve(e.scrollbarXRail,n);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,ve(e.scrollbarYRail,a),ve(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),ve(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function Mi(t){t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,We(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,We(t),e.stopPropagation()})}var Vt=null;function Oi(t){Cr(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),Cr(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function Cr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=t.element,f=null,h=null,g=null;function v(w){w.touches&&w.touches[0]&&(w[a]=w.touches[0]["page"+c.toUpperCase()]),Vt===o&&(d[l]=f+g*(w[a]-h),ga(t,c),We(t),w.stopPropagation(),w.preventDefault())}function b(){va(t,c),t[u].classList.remove(ne.state.clicking),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",b),Vt=null}function L(w){Vt===null&&(Vt=o,f=d[l],w.touches&&(w[a]=w.touches[0]["page"+c.toUpperCase()]),h=w[a],g=(t[r]-t[n])/(t[i]-t[s]),w.touches?(document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("touchend",b)):(document.addEventListener("mousemove",v),document.addEventListener("mouseup",b)),t[u].classList.add(ne.state.clicking)),w.stopPropagation(),w.cancelable&&w.preventDefault()}t[o].addEventListener("mousedown",L),t[o].addEventListener("touchstart",L)}function Ii(t){var e=t.element,n=function(){return Ke(e,":hover")},r=function(){return Ke(t.scrollbarX,":focus")||Ke(t.scrollbarY,":focus")};function a(i,o){var s=Math.floor(e.scrollTop);if(i===0){if(!t.scrollbarYActive)return!1;if(s===0&&o>0||s>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(l===0&&i<0||l>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!n()&&!r())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(Li(o))return}var s=0,l=0;switch(i.which){case 37:i.metaKey?s=-t.contentWidth:i.altKey?s=-t.containerWidth:s=-30;break;case 38:i.metaKey?l=t.contentHeight:i.altKey?l=t.containerHeight:l=30;break;case 39:i.metaKey?s=t.contentWidth:i.altKey?s=t.containerWidth:s=30;break;case 40:i.metaKey?l=-t.contentHeight:i.altKey?l=-t.containerHeight:l=-30;break;case 32:i.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&s!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=s,We(t),a(s,l)&&i.preventDefault())}})}function ki(t){var e=t.element;function n(o,s){var l=Math.floor(e.scrollTop),c=e.scrollTop===0,u=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,f=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(s)>Math.abs(o)?h=c||u:h=d||f,h?!t.settings.wheelPropagation:!0}function r(o){var s=o.deltaX,l=-1*o.deltaY;return(typeof s>"u"||typeof l>"u")&&(s=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(s*=10,l*=10),s!==s&&l!==l&&(s=0,l=o.wheelDelta),o.shiftKey?[-l,-s]:[s,l]}function a(o,s,l){if(!ft.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var c=o;c&&c!==e;){if(c.classList.contains(ne.element.consuming))return!0;var u=Ie(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(s&&u.overflowX.match(/(scroll|auto)/)){var f=c.scrollWidth-c.clientWidth;if(f>0&&(c.scrollLeft>0&&s<0||c.scrollLeft<f&&s>0))return!0}c=c.parentNode}return!1}function i(o){var s=r(o),l=s[0],c=s[1];if(!a(o.target,l,c)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?e.scrollTop-=c*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=c*t.settings.wheelSpeed,u=!0):(e.scrollTop-=c*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),We(t),u=u||n(l,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",i):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",i)}function qi(t){if(!ft.supportsTouch&&!ft.supportsIePointer)return;var e=t.element,n={startOffset:{},startTime:0,speed:{},easingLoop:null};function r(d,f){var h=Math.floor(e.scrollTop),g=e.scrollLeft,v=Math.abs(d),b=Math.abs(f);if(b>v){if(f<0&&h===t.contentHeight-t.containerHeight||f>0&&h===0)return window.scrollY===0&&f>0&&ft.isChrome}else if(v>b&&(d<0&&g===t.contentWidth-t.containerWidth||d>0&&g===0))return!0;return!0}function a(d,f){e.scrollTop-=f,e.scrollLeft-=d,We(t)}function i(d){return d.targetTouches?d.targetTouches[0]:d}function o(d){return d.target===t.scrollbarX||d.target===t.scrollbarY||d.pointerType&&d.pointerType==="pen"&&d.buttons===0?!1:!!(d.targetTouches&&d.targetTouches.length===1||d.pointerType&&d.pointerType!=="mouse"&&d.pointerType!==d.MSPOINTER_TYPE_MOUSE)}function s(d){if(o(d)){var f=i(d);n.startOffset.pageX=f.pageX,n.startOffset.pageY=f.pageY,n.startTime=new Date().getTime(),n.easingLoop!==null&&clearInterval(n.easingLoop)}}function l(d,f,h){if(!e.contains(d))return!1;for(var g=d;g&&g!==e;){if(g.classList.contains(ne.element.consuming))return!0;var v=Ie(g);if(h&&v.overflowY.match(/(scroll|auto)/)){var b=g.scrollHeight-g.clientHeight;if(b>0&&(g.scrollTop>0&&h<0||g.scrollTop<b&&h>0))return!0}if(f&&v.overflowX.match(/(scroll|auto)/)){var L=g.scrollWidth-g.clientWidth;if(L>0&&(g.scrollLeft>0&&f<0||g.scrollLeft<L&&f>0))return!0}g=g.parentNode}return!1}function c(d){if(o(d)){var f=i(d),h={pageX:f.pageX,pageY:f.pageY},g=h.pageX-n.startOffset.pageX,v=h.pageY-n.startOffset.pageY;if(l(d.target,g,v))return;a(g,v),n.startOffset=h;var b=new Date().getTime(),L=b-n.startTime;L>0&&(n.speed.x=g/L,n.speed.y=v/L,n.startTime=b),r(g,v)&&d.cancelable&&d.preventDefault()}}function u(){t.settings.swipeEasing&&(clearInterval(n.easingLoop),n.easingLoop=setInterval(function(){if(t.isInitialized){clearInterval(n.easingLoop);return}if(!n.speed.x&&!n.speed.y){clearInterval(n.easingLoop);return}if(Math.abs(n.speed.x)<.01&&Math.abs(n.speed.y)<.01){clearInterval(n.easingLoop);return}a(n.speed.x*30,n.speed.y*30),n.speed.x*=.8,n.speed.y*=.8},10))}ft.supportsTouch?(t.event.bind(e,"touchstart",s),t.event.bind(e,"touchmove",c),t.event.bind(e,"touchend",u)):ft.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",s),t.event.bind(e,"pointermove",c),t.event.bind(e,"pointerup",u)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",s),t.event.bind(e,"MSPointerMove",c),t.event.bind(e,"MSPointerUp",u)))}var Pi=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Ri={"click-rail":Mi,"drag-thumb":Oi,keyboard:Ii,wheel:ki,touch:qi},Wt=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(ne.main),this.settings=Pi();for(var a in n)this.settings[a]=n[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return e.classList.add(ne.state.focus)},o=function(){return e.classList.remove(ne.state.focus)};this.isRtl=Ie(e).direction==="rtl",this.isRtl===!0&&e.classList.add(ne.rtl),this.isNegativeScroll=(function(){var c=e.scrollLeft,u=null;return e.scrollLeft=-1,u=e.scrollLeft<0,e.scrollLeft=c,u})(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new St,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Ut(ne.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Ut(ne.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var s=Ie(this.scrollbarXRail);this.scrollbarXBottom=parseInt(s.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=G(s.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=G(s.borderLeftWidth)+G(s.borderRightWidth),ve(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=G(s.marginLeft)+G(s.marginRight),ve(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Ut(ne.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Ut(ne.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=Ie(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=G(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Ci(this.scrollbarY):null,this.railBorderYWidth=G(l.borderTopWidth)+G(l.borderBottomWidth),ve(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=G(l.marginTop)+G(l.marginBottom),ve(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return Ri[c](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(c){return r.onScroll(c)}),We(this)};Wt.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,ve(this.scrollbarXRail,{display:"block"}),ve(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=G(Ie(this.scrollbarXRail).marginLeft)+G(Ie(this.scrollbarXRail).marginRight),this.railYMarginHeight=G(Ie(this.scrollbarYRail).marginTop)+G(Ie(this.scrollbarYRail).marginBottom),ve(this.scrollbarXRail,{display:"none"}),ve(this.scrollbarYRail,{display:"none"}),We(this),cn(this,"top",0,!1,!0),cn(this,"left",0,!1,!0),ve(this.scrollbarXRail,{display:""}),ve(this.scrollbarYRail,{display:""}))};Wt.prototype.onScroll=function(e){this.isAlive&&(We(this),cn(this,"top",this.element.scrollTop-this.lastScrollTop),cn(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Wt.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),pt(this.scrollbarX),pt(this.scrollbarY),pt(this.scrollbarXRail),pt(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Wt.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const Ln="ave.stickySidebar",Dr=()=>{try{return window.localStorage}catch{return null}},Ni=(t,e)=>{const n=t.map(r=>({element:r,transition:r?.style.transition,webkit:r?.style.WebkitTransition,moz:r?.style.MozTransition}));n.forEach(({element:r})=>{r&&(r.style.WebkitTransition="none",r.style.MozTransition="none",r.style.transition="none")}),e(),n.forEach(({element:r,transition:a,webkit:i,moz:o})=>{r&&(r.style.WebkitTransition=i||"",r.style.MozTransition=o||"",r.style.transition=a||"")})};function Bi(){const t=document.querySelector(".app"),e=document.querySelector(".side-menu"),n=document.querySelector(".ave-navbar"),r=document.getElementById("ave-loader"),a=document.querySelector(".hamburger"),i=document.querySelector(".fadetoblack"),o=e?.querySelector('[data-ave-menu="container"]')||document.querySelector(".ave-sidebar__menu");if(!t||!e||!n||!a)return;let s=null;const l=()=>{s&&window.requestAnimationFrame(()=>{s?.update()})},c=h=>{const g=Dr();if(g){if(h){g.setItem(Ln,"true");return}g.removeItem(Ln)}},u=(h,g={suppressPersist:!1})=>{t.classList.toggle("expanded",h),a.classList.toggle("is-active",h),g.suppressPersist||c(h),l()};Ni([e,t,n],()=>{if(!(window.innerWidth>768&&Dr()?.getItem(Ln)==="true")){u(!1,{suppressPersist:!0});return}t.classList.add("expanded","no-animation"),a.classList.add("is-active","no-animation"),r&&(r.style.left=`${e.clientWidth/2}px`)}),i&&i.addEventListener("click",()=>{u(!1)}),a.addEventListener("click",h=>{h.preventDefault();const g=!t.classList.contains("expanded");u(g)}),o&&(s=new Wt(o,{wheelPropagation:!1,suppressScrollX:!0}),window.addEventListener("resize",()=>{l()},{passive:!0}));const d=document.querySelectorAll(".ave-sidebar__toggle"),f=(h,g)=>{if(!h)return;if(h.removeAttribute("data-ave-animating"),g){h.classList.add("ave-sidebar__submenu--open"),h.style.maxHeight="0px",requestAnimationFrame(()=>{const w=h.scrollHeight;h.style.maxHeight=`${w}px`,l()});const L=w=>{w.propertyName==="max-height"&&(h.style.maxHeight="none",h.removeEventListener("transitionend",L),l())};h.addEventListener("transitionend",L);return}const v=h.scrollHeight;h.style.maxHeight=`${v}px`,requestAnimationFrame(()=>{h.classList.remove("ave-sidebar__submenu--open"),h.style.maxHeight="0px",l()});const b=L=>{L.propertyName==="max-height"&&(h.style.maxHeight="0px",h.removeEventListener("transitionend",b),l())};h.addEventListener("transitionend",b)};d.forEach(h=>{const g=h.closest('[data-ave-menu="item"]'),v=h.getAttribute("data-ave-submenu"),b=v?document.getElementById(v):null;if(!g||!b)return;const L=h.getAttribute("aria-expanded")==="true";g.classList.toggle("ave-sidebar__item--expanded",L),b.classList.toggle("ave-sidebar__submenu--open",L),b.style.maxHeight=L?"none":"0px",h.setAttribute("aria-expanded",String(L)),l(),h.addEventListener("click",w=>{w.preventDefault();const k=h.getAttribute("aria-expanded")!=="true";h.setAttribute("aria-expanded",String(k)),g.classList.toggle("ave-sidebar__item--expanded",k),f(b,k)})})}function Xi(){const t=document.querySelector(".ave-navbar__right .dropdown.profile"),e=t?.querySelector(".dropdown-toggle"),n=t?.querySelector(".dropdown-menu");if(!t||!e||!n)return;const r=()=>{t.classList.remove("open"),e.setAttribute("aria-expanded","false")};e.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();const i=t.classList.toggle("open");e.setAttribute("aria-expanded",String(i))}),document.addEventListener("click",a=>{t.contains(a.target)||r()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&r()})}function ba(t=document){t.querySelectorAll(".form-field-default").forEach(e=>{const n=e.querySelector("input");n&&(n.addEventListener("focus",()=>e.classList.add("focused")),n.addEventListener("blur",()=>e.classList.remove("focused")))})}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Mr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mr(Object(n),!0).forEach(function(r){Hi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rn=function(e){return typeof e}:rn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(t)}function Hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $e(){return $e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$e.apply(this,arguments)}function Yi(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function Wi(t,e){if(t==null)return{};var n=Yi(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var $i="1.15.6";function Ye(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Fe=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),$t=Ye(/Edge/i),Or=Ye(/firefox/i),It=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),fr=Ye(/iP(ad|od|hone)/i),wa=Ye(/chrome/i)&&Ye(/android/i),Ea={capture:!1,passive:!1};function W(t,e,n){t.addEventListener(e,n,!Fe&&Ea)}function H(t,e,n){t.removeEventListener(e,n,!Fe&&Ea)}function dn(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Sa(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function De(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&dn(t,e):dn(t,e))||r&&t===n)return t;if(t===n)break}while(t=Sa(t))}return null}var Ir=/\s+/g;function be(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Ir," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Ir," ")}}function P(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function yt(t,e){var n="";if(typeof t=="string")n=t;else do{var r=P(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function Ta(t,e,n){if(t){var r=t.getElementsByTagName(e),a=0,i=r.length;if(n)for(;a<i;a++)n(r[a],a);return r}return[]}function qe(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,n,r,a){if(!(!t.getBoundingClientRect&&t!==window)){var i,o,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==qe()?(i=t.getBoundingClientRect(),o=i.top,s=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!Fe))do if(a&&a.getBoundingClientRect&&(P(a,"transform")!=="none"||n&&P(a,"position")!=="static")){var f=a.getBoundingClientRect();o-=f.top+parseInt(P(a,"border-top-width")),s-=f.left+parseInt(P(a,"border-left-width")),l=o+i.height,c=s+i.width;break}while(a=a.parentNode);if(r&&t!==window){var h=yt(a||t),g=h&&h.a,v=h&&h.d;h&&(o/=v,s/=g,d/=g,u/=v,l=o+u,c=s+d)}return{top:o,left:s,bottom:l,right:c,width:d,height:u}}}function kr(t,e,n){for(var r=Ve(t,!0),a=re(t)[e];r;){var i=re(r)[n],o=void 0;if(o=a>=i,!o)return r;if(r===qe())break;r=Ve(r,!1)}return!1}function Et(t,e,n,r){for(var a=0,i=0,o=t.children;i<o.length;){if(o[i].style.display!=="none"&&o[i]!==O.ghost&&(r||o[i]!==O.dragged)&&De(o[i],n.draggable,t,!1)){if(a===e)return o[i];a++}i++}return null}function hr(t,e){for(var n=t.lastElementChild;n&&(n===O.ghost||P(n,"display")==="none"||e&&!dn(n,e));)n=n.previousElementSibling;return n||null}function Te(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==O.clone&&(!e||dn(t,e))&&n++;return n}function qr(t){var e=0,n=0,r=qe();if(t)do{var a=yt(t),i=a.a,o=a.d;e+=t.scrollLeft*i,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function Fi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ve(t,e){if(!t||!t.getBoundingClientRect)return qe();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=P(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return qe();if(r||e)return n;r=!0}}while(n=n.parentNode);return qe()}function ji(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Cn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var kt;function xa(t,e){return function(){if(!kt){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),kt=setTimeout(function(){kt=void 0},e)}}}function zi(){clearTimeout(kt),kt=void 0}function Aa(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _a(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function La(t,e,n){var r={};return Array.from(t.children).forEach(function(a){var i,o,s,l;if(!(!De(a,e.draggable,t,!1)||a.animated||a===n)){var c=re(a);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var ye="Sortable"+new Date().getTime();function Ui(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(P(a,"display")==="none"||a===O.ghost)){t.push({target:a,rect:re(a)});var i=Re({},t[t.length-1].rect);if(a.thisAnimationDuration){var o=yt(a,!0);o&&(i.top-=o.f,i.left-=o.e)}a.fromRect=i}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Fi(t,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,o=0;t.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=re(c),f=c.prevFromRect,h=c.prevToRect,g=s.rect,v=yt(c,!0);v&&(d.top-=v.f,d.left-=v.e),c.toRect=d,c.thisAnimationDuration&&Cn(f,d)&&!Cn(u,d)&&(g.top-d.top)/(g.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Vi(g,f,h,a.options)),Cn(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=a.options.animation),a.animate(c,g,d,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,a,i,o){if(o){P(r,"transition",""),P(r,"transform","");var s=yt(this.el),l=s&&s.a,c=s&&s.d,u=(a.left-i.left)/(l||1),d=(a.top-i.top)/(c||1);r.animatingX=!!u,r.animatingY=!!d,P(r,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Ki(r),P(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),P(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){P(r,"transition",""),P(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Ki(t){return t.offsetWidth}function Vi(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ct=[],Dn={initializeByDefault:!0},Ft={mount:function(e){for(var n in Dn)Dn.hasOwnProperty(n)&&!(n in e)&&(e[n]=Dn[n]);ct.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ct.push(e)},pluginEvent:function(e,n,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var i=e+"Global";ct.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][i]&&n[o.pluginName][i](Re({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Re({sortable:n},r)))})},initializePlugins:function(e,n,r,a){ct.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,$e(r,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);typeof o<"u"&&(e.options[i]=o)}},getEventProperties:function(e,n){var r={};return ct.forEach(function(a){typeof a.eventProperties=="function"&&$e(r,a.eventProperties.call(n[a.pluginName],e))}),r},modifyOption:function(e,n,r){var a;return ct.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(a=i.optionListeners[n].call(e[i.pluginName],r))}),a}};function Gi(t){var e=t.sortable,n=t.rootEl,r=t.name,a=t.targetEl,i=t.cloneEl,o=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[ye],!!e){var v,b=e.options,L="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Fe&&!$t?v=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(r,!0,!0)),v.to=o||n,v.from=s||n,v.item=a||n,v.clone=i,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=d,v.originalEvent=f,v.pullMode=h?h.lastPutMode:void 0;var w=Re(Re({},g),Ft.getEventProperties(r,e));for(var k in w)v[k]=w[k];n&&n.dispatchEvent(v),b[L]&&b[L].call(e,v)}}var Ji=["evt"],pe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,i=Wi(r,Ji);Ft.pluginEvent.bind(O)(e,n,Re({dragEl:E,parentEl:Z,ghostEl:N,rootEl:j,nextEl:at,lastDownEl:an,cloneEl:V,cloneHidden:Ue,dragStarted:Ct,putSortable:le,activeSortable:O.active,originalEvent:a,oldIndex:mt,oldDraggableIndex:qt,newIndex:we,newDraggableIndex:ze,hideGhostForTarget:Oa,unhideGhostForTarget:Ia,cloneNowHidden:function(){Ue=!0},cloneNowShown:function(){Ue=!1},dispatchSortableEvent:function(s){fe({sortable:n,name:s,originalEvent:a})}},i))};function fe(t){Gi(Re({putSortable:le,cloneEl:V,targetEl:E,rootEl:j,oldIndex:mt,oldDraggableIndex:qt,newIndex:we,newDraggableIndex:ze},t))}var E,Z,N,j,at,an,V,Ue,mt,we,qt,ze,Gt,le,ht=!1,un=!1,fn=[],et,Le,Mn,On,Pr,Rr,Ct,dt,Pt,Rt=!1,Jt=!1,on,ue,In=[],zn=!1,hn=[],bn=typeof document<"u",Zt=fr,Nr=$t||Fe?"cssFloat":"float",Zi=bn&&!wa&&!fr&&"draggable"in document.createElement("div"),Ca=(function(){if(bn){if(Fe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),Da=function(e,n){var r=P(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=Et(e,0,n),o=Et(e,1,n),s=i&&P(i),l=o&&P(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+re(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&r[Nr]==="none"||o&&r[Nr]==="none"&&c+u>a)?"vertical":"horizontal"},Qi=function(e,n,r){var a=r?e.left:e.top,i=r?e.right:e.bottom,o=r?e.width:e.height,s=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return a===s||i===l||a+o/2===s+c/2},eo=function(e,n){var r;return fn.some(function(a){var i=a[ye].options.emptyInsertThreshold;if(!(!i||hr(a))){var o=re(a),s=e>=o.left-i&&e<=o.right+i,l=n>=o.top-i&&n<=o.bottom+i;if(s&&l)return r=a}}),r},Ma=function(e){function n(i,o){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(o||d))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,c,u),o)(s,l,c,u);var f=(o?s:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var r={},a=e.group;(!a||rn(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=n(a.pull,!0),r.checkPut=n(a.put),r.revertClone=a.revertClone,e.group=r},Oa=function(){!Ca&&N&&P(N,"display","none")},Ia=function(){!Ca&&N&&P(N,"display","")};bn&&!wa&&document.addEventListener("click",function(t){if(un)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),un=!1,!1},!0);var tt=function(e){if(E){e=e.touches?e.touches[0]:e;var n=eo(e.clientX,e.clientY);if(n){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[ye]._onDragOver(r)}}},to=function(e){E&&E.parentNode[ye]._isOutsideThisEl(e.target)};function O(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=$e({},e),t[ye]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Da(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&(!It||fr),emptyInsertThreshold:5};Ft.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);Ma(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Zi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?W(t,"pointerdown",this._onTapStart):(W(t,"mousedown",this._onTapStart),W(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(W(t,"dragover",this),W(t,"dragenter",this)),fn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),$e(this,Ui())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(dt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,E):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,a=this.options,i=a.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=a.filter;if(co(r),!E&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&It&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=De(l,a.draggable,r,!1),!(l&&l.animated)&&an!==l)){if(mt=Te(l),qt=Te(l,a.draggable),typeof u=="function"){if(u.call(this,e,l,this)){fe({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),pe("filter",n,{evt:e}),i&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=De(c,d.trim(),r,!1),d)return fe({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),pe("filter",n,{evt:e}),!0}),u)){i&&e.preventDefault();return}a.handle&&!De(c,a.handle,r,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,r){var a=this,i=a.el,o=a.options,s=i.ownerDocument,l;if(r&&!E&&r.parentNode===i){var c=re(r);if(j=i,E=r,Z=E.parentNode,at=E.nextSibling,an=r,Gt=o.group,O.dragged=E,et={target:E,clientX:(n||e).clientX,clientY:(n||e).clientY},Pr=et.clientX-c.left,Rr=et.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,E.style["will-change"]="all",l=function(){if(pe("delayEnded",a,{evt:e}),O.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Or&&a.nativeDraggable&&(E.draggable=!0),a._triggerDragStart(e,n),fe({sortable:a,name:"choose",originalEvent:e}),be(E,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Ta(E,u.trim(),kn)}),W(s,"dragover",tt),W(s,"mousemove",tt),W(s,"touchmove",tt),o.supportPointer?(W(s,"pointerup",a._onDrop),!this.nativeDraggable&&W(s,"pointercancel",a._onDrop)):(W(s,"mouseup",a._onDrop),W(s,"touchend",a._onDrop),W(s,"touchcancel",a._onDrop)),Or&&this.nativeDraggable&&(this.options.touchStartThreshold=4,E.draggable=!0),pe("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!($t||Fe))){if(O.eventCanceled){this._onDrop();return}o.supportPointer?(W(s,"pointerup",a._disableDelayedDrag),W(s,"pointercancel",a._disableDelayedDrag)):(W(s,"mouseup",a._disableDelayedDrag),W(s,"touchend",a._disableDelayedDrag),W(s,"touchcancel",a._disableDelayedDrag)),W(s,"mousemove",a._delayedDragTouchMoveHandler),W(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&W(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){E&&kn(E),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;H(e,"mouseup",this._disableDelayedDrag),H(e,"touchend",this._disableDelayedDrag),H(e,"touchcancel",this._disableDelayedDrag),H(e,"pointerup",this._disableDelayedDrag),H(e,"pointercancel",this._disableDelayedDrag),H(e,"mousemove",this._delayedDragTouchMoveHandler),H(e,"touchmove",this._delayedDragTouchMoveHandler),H(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?W(document,"pointermove",this._onTouchMove):n?W(document,"touchmove",this._onTouchMove):W(document,"mousemove",this._onTouchMove):(W(E,"dragend",this),W(j,"dragstart",this._onDragStart));try{document.selection?sn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ht=!1,j&&E){pe("dragStarted",this,{evt:n}),this.nativeDraggable&&W(document,"dragover",to);var r=this.options;!e&&be(E,r.dragClass,!1),be(E,r.ghostClass,!0),O.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Le){this._lastX=Le.clientX,this._lastY=Le.clientY,Oa();for(var e=document.elementFromPoint(Le.clientX,Le.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Le.clientX,Le.clientY),e!==n);)n=e;if(E.parentNode[ye]._isOutsideThisEl(e),n)do{if(n[ye]){var r=void 0;if(r=n[ye]._onDragOver({clientX:Le.clientX,clientY:Le.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=Sa(n));Ia()}},_onTouchMove:function(e){if(et){var n=this.options,r=n.fallbackTolerance,a=n.fallbackOffset,i=e.touches?e.touches[0]:e,o=N&&yt(N,!0),s=N&&o&&o.a,l=N&&o&&o.d,c=Zt&&ue&&qr(ue),u=(i.clientX-et.clientX+a.x)/(s||1)+(c?c[0]-In[0]:0)/(s||1),d=(i.clientY-et.clientY+a.y)/(l||1)+(c?c[1]-In[1]:0)/(l||1);if(!O.active&&!ht){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(N){o?(o.e+=u-(Mn||0),o.f+=d-(On||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");P(N,"webkitTransform",f),P(N,"mozTransform",f),P(N,"msTransform",f),P(N,"transform",f),Mn=u,On=d,Le=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:j,n=re(E,!0,Zt,!0,e),r=this.options;if(Zt){for(ue=e;P(ue,"position")==="static"&&P(ue,"transform")==="none"&&ue!==document;)ue=ue.parentNode;ue!==document.body&&ue!==document.documentElement?(ue===document&&(ue=qe()),n.top+=ue.scrollTop,n.left+=ue.scrollLeft):ue=qe(),In=qr(ue)}N=E.cloneNode(!0),be(N,r.ghostClass,!1),be(N,r.fallbackClass,!0),be(N,r.dragClass,!0),P(N,"transition",""),P(N,"transform",""),P(N,"box-sizing","border-box"),P(N,"margin",0),P(N,"top",n.top),P(N,"left",n.left),P(N,"width",n.width),P(N,"height",n.height),P(N,"opacity","0.8"),P(N,"position",Zt?"absolute":"fixed"),P(N,"zIndex","100000"),P(N,"pointerEvents","none"),O.ghost=N,e.appendChild(N),P(N,"transform-origin",Pr/parseInt(N.style.width)*100+"% "+Rr/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,a=e.dataTransfer,i=r.options;if(pe("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}pe("setupClone",this),O.eventCanceled||(V=_a(E),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),be(V,this.options.chosenClass,!1),O.clone=V),r.cloneId=sn(function(){pe("clone",r),!O.eventCanceled&&(r.options.removeCloneOnHide||j.insertBefore(V,E),r._hideClone(),fe({sortable:r,name:"clone"}))}),!n&&be(E,i.dragClass,!0),n?(un=!0,r._loopId=setInterval(r._emulateDragOver,50)):(H(document,"mouseup",r._onDrop),H(document,"touchend",r._onDrop),H(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(r,a,E)),W(document,"drop",r),P(E,"transform","translateZ(0)")),ht=!0,r._dragStartId=sn(r._dragStarted.bind(r,n,e)),W(document,"selectstart",r),Ct=!0,window.getSelection().removeAllRanges(),It&&P(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,a,i,o,s=this.options,l=s.group,c=O.active,u=Gt===l,d=s.sort,f=le||c,h,g=this,v=!1;if(zn)return;function b(_e,Ze){pe(_e,g,Re({evt:e,isOwner:u,axis:h?"vertical":"horizontal",revert:o,dragRect:a,targetRect:i,canSort:d,fromSortable:f,target:r,completed:w,onMove:function(Qe,Xe){return Qt(j,n,E,a,Qe,re(Qe),e,Xe)},changed:k},Ze))}function L(){b("dragOverAnimationCapture"),g.captureAnimationState(),g!==f&&f.captureAnimationState()}function w(_e){return b("dragOverCompleted",{insertion:_e}),_e&&(u?c._hideClone():c._showClone(g),g!==f&&(be(E,le?le.options.ghostClass:c.options.ghostClass,!1),be(E,s.ghostClass,!0)),le!==g&&g!==O.active?le=g:g===O.active&&le&&(le=null),f===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){b("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===E&&!E.animated||r===n&&!r.animated)&&(dt=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(E.parentNode[ye]._isOutsideThisEl(e.target),!_e&&tt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function k(){we=Te(E),ze=Te(E,s.draggable),fe({sortable:g,name:"change",toEl:n,newIndex:we,newDraggableIndex:ze,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=De(r,s.draggable,n,!0),b("dragOver"),O.eventCanceled)return v;if(E.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return w(!1);if(un=!1,c&&!s.disabled&&(u?d||(o=Z!==j):le===this||(this.lastPutMode=Gt.checkPull(this,c,E,e))&&l.checkPut(this,c,E,e))){if(h=this._getDirection(e,r)==="vertical",a=re(E),b("dragOverValid"),O.eventCanceled)return v;if(o)return Z=j,L(),this._hideClone(),b("revert"),O.eventCanceled||(at?j.insertBefore(E,at):j.appendChild(E)),w(!0);var T=hr(n,s.draggable);if(!T||io(e,h,this)&&!T.animated){if(T===E)return w(!1);if(T&&n===e.target&&(r=T),r&&(i=re(r)),Qt(j,n,E,a,r,i,e,!!r)!==!1)return L(),T&&T.nextSibling?n.insertBefore(E,T.nextSibling):n.appendChild(E),Z=n,k(),w(!0)}else if(T&&ao(e,h,this)){var y=Et(n,0,s,!0);if(y===E)return w(!1);if(r=y,i=re(r),Qt(j,n,E,a,r,i,e,!1)!==!1)return L(),n.insertBefore(E,y),Z=n,k(),w(!0)}else if(r.parentNode===n){i=re(r);var p=0,A,I=E.parentNode!==n,q=!Qi(E.animated&&E.toRect||a,r.animated&&r.toRect||i,h),K=h?"top":"left",$=kr(r,"top","top")||kr(E,"top","top"),de=$?$.scrollTop:void 0;dt!==r&&(A=i[K],Rt=!1,Jt=!q&&s.invertSwap||I),p=oo(e,r,i,h,q?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Jt,dt===r);var Q;if(p!==0){var ee=Te(E);do ee-=p,Q=Z.children[ee];while(Q&&(P(Q,"display")==="none"||Q===N))}if(p===0||Q===r)return w(!1);dt=r,Pt=p;var J=r.nextElementSibling,oe=!1;oe=p===1;var Ae=Qt(j,n,E,a,r,i,e,oe);if(Ae!==!1)return(Ae===1||Ae===-1)&&(oe=Ae===1),zn=!0,setTimeout(ro,30),L(),oe&&!J?n.appendChild(E):r.parentNode.insertBefore(E,oe?J:r),$&&Aa($,0,de-$.scrollTop),Z=E.parentNode,A!==void 0&&!Jt&&(on=Math.abs(A-re(r)[K])),k(),w(!0)}if(n.contains(E))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){H(document,"mousemove",this._onTouchMove),H(document,"touchmove",this._onTouchMove),H(document,"pointermove",this._onTouchMove),H(document,"dragover",tt),H(document,"mousemove",tt),H(document,"touchmove",tt)},_offUpEvents:function(){var e=this.el.ownerDocument;H(e,"mouseup",this._onDrop),H(e,"touchend",this._onDrop),H(e,"pointerup",this._onDrop),H(e,"pointercancel",this._onDrop),H(e,"touchcancel",this._onDrop),H(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(we=Te(E),ze=Te(E,r.draggable),pe("drop",this,{evt:e}),Z=E&&E.parentNode,we=Te(E),ze=Te(E,r.draggable),O.eventCanceled){this._nulling();return}ht=!1,Jt=!1,Rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Un(this.cloneId),Un(this._dragStartId),this.nativeDraggable&&(H(document,"drop",this),H(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),It&&P(document.body,"user-select",""),P(E,"transform",""),e&&(Ct&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(j===Z||le&&le.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),E&&(this.nativeDraggable&&H(E,"dragend",this),kn(E),E.style["will-change"]="",Ct&&!ht&&be(E,le?le.options.ghostClass:this.options.ghostClass,!1),be(E,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),j!==Z?(we>=0&&(fe({rootEl:Z,name:"add",toEl:Z,fromEl:j,originalEvent:e}),fe({sortable:this,name:"remove",toEl:Z,originalEvent:e}),fe({rootEl:Z,name:"sort",toEl:Z,fromEl:j,originalEvent:e}),fe({sortable:this,name:"sort",toEl:Z,originalEvent:e})),le&&le.save()):we!==mt&&we>=0&&(fe({sortable:this,name:"update",toEl:Z,originalEvent:e}),fe({sortable:this,name:"sort",toEl:Z,originalEvent:e})),O.active&&((we==null||we===-1)&&(we=mt,ze=qt),fe({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pe("nulling",this),j=E=Z=N=at=V=an=Ue=et=Le=Ct=we=ze=mt=qt=dt=Pt=le=Gt=O.dragged=O.ghost=O.clone=O.active=null,hn.forEach(function(e){e.checked=!0}),hn.length=Mn=On=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":E&&(this._onDragOver(e),no(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,a=0,i=r.length,o=this.options;a<i;a++)n=r[a],De(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||lo(n));return e},sort:function(e,n){var r={},a=this.el;this.toArray().forEach(function(i,o){var s=a.children[o];De(s,this.options.draggable,a,!1)&&(r[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(a.removeChild(r[i]),a.appendChild(r[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return De(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var a=Ft.modifyOption(this,e,n);typeof a<"u"?r[e]=a:r[e]=n,e==="group"&&Ma(r)},destroy:function(){pe("destroy",this);var e=this.el;e[ye]=null,H(e,"mousedown",this._onTapStart),H(e,"touchstart",this._onTapStart),H(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(H(e,"dragover",this),H(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fn.splice(fn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ue){if(pe("hideClone",this),O.eventCanceled)return;P(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),Ue=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ue){if(pe("showClone",this),O.eventCanceled)return;E.parentNode==j&&!this.options.group.revertClone?j.insertBefore(V,E):at?j.insertBefore(V,at):j.appendChild(V),this.options.group.revertClone&&this.animate(E,V),P(V,"display",""),Ue=!1}}};function no(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Qt(t,e,n,r,a,i,o,s){var l,c=t[ye],u=c.options.onMove,d;return window.CustomEvent&&!Fe&&!$t?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=a||e,l.relatedRect=i||re(e),l.willInsertAfter=s,l.originalEvent=o,t.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function kn(t){t.draggable=!1}function ro(){zn=!1}function ao(t,e,n){var r=re(Et(n.el,0,n.options,!0)),a=La(n.el,n.options,N),i=10;return e?t.clientX<a.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<a.top-i||t.clientY<r.bottom&&t.clientX<r.left}function io(t,e,n){var r=re(hr(n.el,n.options.draggable)),a=La(n.el,n.options,N),i=10;return e?t.clientX>a.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>a.bottom+i||t.clientX>r.right&&t.clientY>r.top}function oo(t,e,n,r,a,i,o,s){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!o){if(s&&on<c*a){if(!Rt&&(Pt===1?l>u+c*i/2:l<d-c*i/2)&&(Rt=!0),Rt)f=!0;else if(Pt===1?l<u+on:l>d-on)return-Pt}else if(l>u+c*(1-a)/2&&l<d-c*(1-a)/2)return so(e)}return f=f||o,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function so(t){return Te(E)<Te(t)?1:-1}function lo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function co(t){hn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&hn.push(r)}}function sn(t){return setTimeout(t,0)}function Un(t){return clearTimeout(t)}bn&&W(document,"touchmove",function(t){(O.active||ht)&&t.cancelable&&t.preventDefault()});O.utils={on:W,off:H,css:P,find:Ta,is:function(e,n){return!!De(e,n,e,!1)},extend:ji,throttle:xa,closest:De,toggleClass:be,clone:_a,index:Te,nextTick:sn,cancelNextTick:Un,detectDirection:Da,getChild:Et,expando:ye};O.get=function(t){return t[ye]};O.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(O.utils=Re(Re({},O.utils),r.utils)),Ft.mount(r)})};O.create=function(t,e){return new O(t,e)};O.version=$i;var te=[],Dt,Kn,Vn=!1,qn,Pn,pn,Mt;function uo(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?W(document,"dragover",this._handleAutoScroll):this.options.supportPointer?W(document,"pointermove",this._handleFallbackAutoScroll):r.touches?W(document,"touchmove",this._handleFallbackAutoScroll):W(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?H(document,"dragover",this._handleAutoScroll):(H(document,"pointermove",this._handleFallbackAutoScroll),H(document,"touchmove",this._handleFallbackAutoScroll),H(document,"mousemove",this._handleFallbackAutoScroll)),Br(),ln(),zi()},nulling:function(){pn=Kn=Dt=Vn=Mt=qn=Pn=null,te.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var a=this,i=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,o);if(pn=n,r||this.options.forceAutoScrollFallback||$t||Fe||It){Rn(n,this.options,s,r);var l=Ve(s,!0);Vn&&(!Mt||i!==qn||o!==Pn)&&(Mt&&Br(),Mt=setInterval(function(){var c=Ve(document.elementFromPoint(i,o),!0);c!==l&&(l=c,ln()),Rn(n,a.options,c,r)},10),qn=i,Pn=o)}else{if(!this.options.bubbleScroll||Ve(s,!0)===qe()){ln();return}Rn(n,this.options,Ve(s,!1),!1)}}},$e(t,{pluginName:"scroll",initializeByDefault:!0})}function ln(){te.forEach(function(t){clearInterval(t.pid)}),te=[]}function Br(){clearInterval(Mt)}var Rn=xa(function(t,e,n,r){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,l=qe(),c=!1,u;Kn!==n&&(Kn=n,ln(),Dt=e.scroll,u=e.scrollFn,Dt===!0&&(Dt=Ve(n,!0)));var d=0,f=Dt;do{var h=f,g=re(h),v=g.top,b=g.bottom,L=g.left,w=g.right,k=g.width,T=g.height,y=void 0,p=void 0,A=h.scrollWidth,I=h.scrollHeight,q=P(h),K=h.scrollLeft,$=h.scrollTop;h===l?(y=k<A&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),p=T<I&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible")):(y=k<A&&(q.overflowX==="auto"||q.overflowX==="scroll"),p=T<I&&(q.overflowY==="auto"||q.overflowY==="scroll"));var de=y&&(Math.abs(w-a)<=o&&K+k<A)-(Math.abs(L-a)<=o&&!!K),Q=p&&(Math.abs(b-i)<=o&&$+T<I)-(Math.abs(v-i)<=o&&!!$);if(!te[d])for(var ee=0;ee<=d;ee++)te[ee]||(te[ee]={});(te[d].vx!=de||te[d].vy!=Q||te[d].el!==h)&&(te[d].el=h,te[d].vx=de,te[d].vy=Q,clearInterval(te[d].pid),(de!=0||Q!=0)&&(c=!0,te[d].pid=setInterval((function(){r&&this.layer===0&&O.active._onTouchMove(pn);var J=te[this.layer].vy?te[this.layer].vy*s:0,oe=te[this.layer].vx?te[this.layer].vx*s:0;typeof u=="function"&&u.call(O.dragged.parentNode[ye],oe,J,t,pn,te[this.layer].el)!=="continue"||Aa(te[this.layer].el,oe,J)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=Ve(f,!1)));Vn=c}},30),ka=function(e){var n=e.originalEvent,r=e.putSortable,a=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||i;s();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function pr(){}pr.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=Et(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:ka};$e(pr,{pluginName:"revertOnSpill"});function mr(){}mr.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,a=r||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:ka};$e(mr,{pluginName:"removeOnSpill"});O.mount(new uo);O.mount(mr,pr);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xr(Object(n),!0).forEach(function(r){mo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fo(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Pa(t){var e=fo(t,"string");return typeof e=="symbol"?e:e+""}function Gn(t){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(t)}function ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pa(r.key),r)}}function po(t,e,n){return e&&Hr(t.prototype,e),n&&Hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mo(t,e,n){return e=Pa(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ra(t){return go(t)||vo(t)||yo(t)||bo()}function go(t){if(Array.isArray(t))return Jn(t)}function vo(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yo(t,e){if(t){if(typeof t=="string")return Jn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(t,e)}}function Jn(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wn=typeof window<"u"&&typeof window.document<"u",Ne=wn?window:{},gr=wn&&Ne.document.documentElement?"ontouchstart"in Ne.document.documentElement:!1,vr=wn?"PointerEvent"in Ne:!1,z="cropper",yr="all",Na="crop",Ba="move",Xa="zoom",nt="e",rt="w",ut="s",je="n",xt="ne",At="nw",_t="se",Lt="sw",Zn="".concat(z,"-crop"),Yr="".concat(z,"-disabled"),ge="".concat(z,"-hidden"),Wr="".concat(z,"-hide"),wo="".concat(z,"-invisible"),mn="".concat(z,"-modal"),Qn="".concat(z,"-move"),Bt="".concat(z,"Action"),en="".concat(z,"Preview"),br="crop",Ha="move",Ya="none",er="crop",tr="cropend",nr="cropmove",rr="cropstart",$r="dblclick",Eo=gr?"touchstart":"mousedown",So=gr?"touchmove":"mousemove",To=gr?"touchend touchcancel":"mouseup",Fr=vr?"pointerdown":Eo,jr=vr?"pointermove":So,zr=vr?"pointerup pointercancel":To,Ur="ready",Kr="resize",Vr="wheel",ar="zoom",Gr="image/jpeg",xo=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ao=/^data:/,_o=/^data:image\/jpeg;base64,/,Lo=/^img|canvas$/i,Wa=200,$a=100,Jr={viewMode:0,dragMode:br,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Wa,minContainerHeight:$a,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Co='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Do=Number.isNaN||Ne.isNaN;function Y(t){return typeof t=="number"&&!Do(t)}var Zr=function(e){return e>0&&e<1/0};function Nn(t){return typeof t>"u"}function ot(t){return Gn(t)==="object"&&t!==null}var Mo=Object.prototype.hasOwnProperty;function gt(t){if(!ot(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&Mo.call(n,"isPrototypeOf")}catch{return!1}}function me(t){return typeof t=="function"}var Oo=Array.prototype.slice;function Fa(t){return Array.from?Array.from(t):Oo.call(t)}function ae(t,e){return t&&me(e)&&(Array.isArray(t)||Y(t.length)?Fa(t).forEach(function(n,r){e.call(t,n,r,t)}):ot(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var U=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ot(e)&&r.length>0&&r.forEach(function(i){ot(i)&&Object.keys(i).forEach(function(o){e[o]=i[o]})}),e},Io=/\.\d*(?:0|9){12}\d*$/;function bt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Io.test(t)?Math.round(t*e)/e:t}var ko=/^width|height|left|top|marginLeft|marginTop$/;function Ge(t,e){var n=t.style;ae(e,function(r,a){ko.test(a)&&Y(r)&&(r="".concat(r,"px")),n[a]=r})}function qo(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function se(t,e){if(e){if(Y(t.length)){ae(t,function(r){se(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Pe(t,e){if(e){if(Y(t.length)){ae(t,function(n){Pe(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function vt(t,e,n){if(e){if(Y(t.length)){ae(t,function(r){vt(r,e,n)});return}n?se(t,e):Pe(t,e)}}var Po=/([a-z\d])([A-Z])/g;function wr(t){return t.replace(Po,"$1-$2").toLowerCase()}function ir(t,e){return ot(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(wr(e)))}function Xt(t,e,n){ot(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(wr(e)),n)}function Ro(t,e){if(ot(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(wr(e)))}var ja=/\s\s*/,za=(function(){var t=!1;if(wn){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(i){e=i}});Ne.addEventListener("test",n,r),Ne.removeEventListener("test",n,r)}return t})();function Ce(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n;e.trim().split(ja).forEach(function(i){if(!za){var o=t.listeners;o&&o[i]&&o[i][n]&&(a=o[i][n],delete o[i][n],Object.keys(o[i]).length===0&&delete o[i],Object.keys(o).length===0&&delete t.listeners)}t.removeEventListener(i,a,r)})}function Se(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n;e.trim().split(ja).forEach(function(i){if(r.once&&!za){var o=t.listeners,s=o===void 0?{}:o;a=function(){delete s[i][n],t.removeEventListener(i,a,r);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];n.apply(t,u)},s[i]||(s[i]={}),s[i][n]&&t.removeEventListener(i,s[i][n],r),s[i][n]=a,t.listeners=s}t.addEventListener(i,a,r)})}function wt(t,e,n){var r;return me(Event)&&me(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function Ua(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Bn=Ne.location,No=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Qr(t){var e=t.match(No);return e!==null&&(e[1]!==Bn.protocol||e[2]!==Bn.hostname||e[3]!==Bn.port)}function ea(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Nt(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,a=t.translateX,i=t.translateY,o=[];Y(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),Y(i)&&i!==0&&o.push("translateY(".concat(i,"px)")),Y(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),Y(n)&&n!==1&&o.push("scaleX(".concat(n,")")),Y(r)&&r!==1&&o.push("scaleY(".concat(r,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Bo(t){var e=qa({},t),n=0;return ae(t,function(r,a){delete e[a],ae(e,function(i){var o=Math.abs(r.startX-i.startX),s=Math.abs(r.startY-i.startY),l=Math.abs(r.endX-i.endX),c=Math.abs(r.endY-i.endY),u=Math.sqrt(o*o+s*s),d=Math.sqrt(l*l+c*c),f=(d-u)/u;Math.abs(f)>Math.abs(n)&&(n=f)})}),n}function tn(t,e){var n=t.pageX,r=t.pageY,a={endX:n,endY:r};return e?a:qa({startX:n,startY:r},a)}function Xo(t){var e=0,n=0,r=0;return ae(t,function(a){var i=a.startX,o=a.startY;e+=i,n+=o,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Je(t){var e=t.aspectRatio,n=t.height,r=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",i=Zr(r),o=Zr(n);if(i&&o){var s=n*e;a==="contain"&&s>r||a==="cover"&&s<r?n=r/e:r=n*e}else i?n=r/e:o&&(r=n*e);return{width:r,height:n}}function Ho(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var a=r%90*Math.PI/180,i=Math.sin(a),o=Math.cos(a),s=e*o+n*i,l=e*i+n*o;return r>90?{width:l,height:s}:{width:s,height:l}}function Yo(t,e,n,r){var a=e.aspectRatio,i=e.naturalWidth,o=e.naturalHeight,s=e.rotate,l=s===void 0?0:s,c=e.scaleX,u=c===void 0?1:c,d=e.scaleY,f=d===void 0?1:d,h=n.aspectRatio,g=n.naturalWidth,v=n.naturalHeight,b=r.fillColor,L=b===void 0?"transparent":b,w=r.imageSmoothingEnabled,k=w===void 0?!0:w,T=r.imageSmoothingQuality,y=T===void 0?"low":T,p=r.maxWidth,A=p===void 0?1/0:p,I=r.maxHeight,q=I===void 0?1/0:I,K=r.minWidth,$=K===void 0?0:K,de=r.minHeight,Q=de===void 0?0:de,ee=document.createElement("canvas"),J=ee.getContext("2d"),oe=Je({aspectRatio:h,width:A,height:q}),Ae=Je({aspectRatio:h,width:$,height:Q},"cover"),_e=Math.min(oe.width,Math.max(Ae.width,g)),Ze=Math.min(oe.height,Math.max(Ae.height,v)),Tt=Je({aspectRatio:a,width:A,height:q}),Qe=Je({aspectRatio:a,width:$,height:Q},"cover"),Xe=Math.min(Tt.width,Math.max(Qe.width,i)),Me=Math.min(Tt.height,Math.max(Qe.height,o)),En=[-Xe/2,-Me/2,Xe,Me];return ee.width=bt(_e),ee.height=bt(Ze),J.fillStyle=L,J.fillRect(0,0,_e,Ze),J.save(),J.translate(_e/2,Ze/2),J.rotate(l*Math.PI/180),J.scale(u,f),J.imageSmoothingEnabled=k,J.imageSmoothingQuality=y,J.drawImage.apply(J,[t].concat(Ra(En.map(function(lt){return Math.floor(bt(lt))})))),J.restore(),ee}var Ka=String.fromCharCode;function Wo(t,e,n){var r="";n+=e;for(var a=e;a<n;a+=1)r+=Ka(t.getUint8(a));return r}var $o=/^data:.*,/;function Fo(t){var e=t.replace($o,""),n=atob(e),r=new ArrayBuffer(n.length),a=new Uint8Array(r);return ae(a,function(i,o){a[o]=n.charCodeAt(o)}),r}function jo(t,e){for(var n=[],r=8192,a=new Uint8Array(t);a.length>0;)n.push(Ka.apply(null,Fa(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function zo(t){var e=new DataView(t),n;try{var r,a,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var o=e.byteLength,s=2;s+1<o;){if(e.getUint8(s)===255&&e.getUint8(s+1)===225){a=s;break}s+=1}if(a){var l=a+4,c=a+10;if(Wo(e,l,4)==="Exif"){var u=e.getUint16(c);if(r=u===18761,(r||u===19789)&&e.getUint16(c+2,r)===42){var d=e.getUint32(c+4,r);d>=8&&(i=c+d)}}}if(i){var f=e.getUint16(i,r),h,g;for(g=0;g<f;g+=1)if(h=i+g*12+2,e.getUint16(h,r)===274){h+=8,n=e.getUint16(h,r),e.setUint16(h,1,r);break}}}catch{n=1}return n}function Uo(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var Ko={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,a=this.cropper,i=Number(n.minContainerWidth),o=Number(n.minContainerHeight);se(a,ge),Pe(e,ge);var s={width:Math.max(r.offsetWidth,i>=0?i:Wa),height:Math.max(r.offsetHeight,o>=0?o:$a)};this.containerData=s,Ge(a,{width:s.width,height:s.height}),se(e,ge),Pe(a,ge)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,a=Math.abs(n.rotate)%180===90,i=a?n.naturalHeight:n.naturalWidth,o=a?n.naturalWidth:n.naturalHeight,s=i/o,l=e.width,c=e.height;e.height*s>e.width?r===3?l=e.height*s:c=e.width/s:r===3?c=e.width/s:l=e.height*s;var u={aspectRatio:s,naturalWidth:i,naturalHeight:o,width:l,height:c};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=U({},u)},limitCanvas:function(e,n){var r=this.options,a=this.containerData,i=this.canvasData,o=this.cropBoxData,s=r.viewMode,l=i.aspectRatio,c=this.cropped&&o;if(e){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;s>1?(u=Math.max(u,a.width),d=Math.max(d,a.height),s===3&&(d*l>u?u=d*l:d=u/l)):s>0&&(u?u=Math.max(u,c?o.width:0):d?d=Math.max(d,c?o.height:0):c&&(u=o.width,d=o.height,d*l>u?u=d*l:d=u/l));var f=Je({aspectRatio:l,width:u,height:d});u=f.width,d=f.height,i.minWidth=u,i.minHeight=d,i.maxWidth=1/0,i.maxHeight=1/0}if(n)if(s>(c?0:1)){var h=a.width-i.width,g=a.height-i.height;i.minLeft=Math.min(0,h),i.minTop=Math.min(0,g),i.maxLeft=Math.max(0,h),i.maxTop=Math.max(0,g),c&&this.limited&&(i.minLeft=Math.min(o.left,o.left+(o.width-i.width)),i.minTop=Math.min(o.top,o.top+(o.height-i.height)),i.maxLeft=o.left,i.maxTop=o.top,s===2&&(i.width>=a.width&&(i.minLeft=Math.min(0,h),i.maxLeft=Math.max(0,h)),i.height>=a.height&&(i.minTop=Math.min(0,g),i.maxTop=Math.max(0,g))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=a.width,i.maxTop=a.height},renderCanvas:function(e,n){var r=this.canvasData,a=this.imageData;if(n){var i=Ho({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=i.width,s=i.height,l=r.width*(o/r.naturalWidth),c=r.height*(s/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(c-r.height)/2,r.width=l,r.height=c,r.aspectRatio=o/s,r.naturalWidth=o,r.naturalHeight=s,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Ge(this.canvas,U({width:r.width,height:r.height},Nt({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,a=r.naturalWidth*(n.width/n.naturalWidth),i=r.naturalHeight*(n.height/n.naturalHeight);U(r,{width:a,height:i,left:(n.width-a)/2,top:(n.height-i)/2}),Ge(this.image,U({width:r.width,height:r.height},Nt(U({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,a=Number(e.autoCropArea)||.8,i={width:n.width,height:n.height};r&&(n.height*r>n.width?i.height=i.width/r:i.width=i.height*r),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*a),i.height=Math.max(i.minHeight,i.height*a),i.left=n.left+(n.width-i.width)/2,i.top=n.top+(n.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=U({},i)},limitCropBox:function(e,n){var r=this.options,a=this.containerData,i=this.canvasData,o=this.cropBoxData,s=this.limited,l=r.aspectRatio;if(e){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=s?Math.min(a.width,i.width,i.width+i.left,a.width-i.left):a.width,f=s?Math.min(a.height,i.height,i.height+i.top,a.height-i.top):a.height;c=Math.min(c,a.width),u=Math.min(u,a.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),f*l>d?f=d/l:d=f*l),o.minWidth=Math.min(c,d),o.minHeight=Math.min(u,f),o.maxWidth=d,o.maxHeight=f}n&&(s?(o.minLeft=Math.max(0,i.left),o.minTop=Math.max(0,i.top),o.maxLeft=Math.min(a.width,i.left+i.width)-o.width,o.maxTop=Math.min(a.height,i.top+i.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&Xt(this.face,Bt,r.width>=n.width&&r.height>=n.height?Ba:yr),Ge(this.cropBox,U({width:r.width,height:r.height},Nt({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),wt(this.element,er,this.getData())}},Vo={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,a=n?this.crossOriginUrl:this.url,i=e.alt||"The image to preview",o=document.createElement("img");if(n&&(o.crossOrigin=n),o.src=a,o.alt=i,this.viewBox.appendChild(o),this.viewBoxImage=o,!!r){var s=r;typeof r=="string"?s=e.ownerDocument.querySelectorAll(r):r.querySelector&&(s=[r]),this.previews=s,ae(s,function(l){var c=document.createElement("img");Xt(l,en,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),n&&(c.crossOrigin=n),c.src=a,c.alt=i,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){ae(this.previews,function(e){var n=ir(e,en);Ge(e,{width:n.width,height:n.height}),e.innerHTML=n.html,Ro(e,en)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,a=r.width,i=r.height,o=e.width,s=e.height,l=r.left-n.left-e.left,c=r.top-n.top-e.top;!this.cropped||this.disabled||(Ge(this.viewBoxImage,U({width:o,height:s},Nt(U({translateX:-l,translateY:-c},e)))),ae(this.previews,function(u){var d=ir(u,en),f=d.width,h=d.height,g=f,v=h,b=1;a&&(b=f/a,v=i*b),i&&v>h&&(b=h/i,g=a*b,v=h),Ge(u,{width:g,height:v}),Ge(u.getElementsByTagName("img")[0],U({width:o*b,height:s*b},Nt(U({translateX:-l*b,translateY:-c*b},e))))}))}},Go={bind:function(){var e=this.element,n=this.options,r=this.cropper;me(n.cropstart)&&Se(e,rr,n.cropstart),me(n.cropmove)&&Se(e,nr,n.cropmove),me(n.cropend)&&Se(e,tr,n.cropend),me(n.crop)&&Se(e,er,n.crop),me(n.zoom)&&Se(e,ar,n.zoom),Se(r,Fr,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Se(r,Vr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Se(r,$r,this.onDblclick=this.dblclick.bind(this)),Se(e.ownerDocument,jr,this.onCropMove=this.cropMove.bind(this)),Se(e.ownerDocument,zr,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Se(window,Kr,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;me(n.cropstart)&&Ce(e,rr,n.cropstart),me(n.cropmove)&&Ce(e,nr,n.cropmove),me(n.cropend)&&Ce(e,tr,n.cropend),me(n.crop)&&Ce(e,er,n.crop),me(n.zoom)&&Ce(e,ar,n.zoom),Ce(r,Fr,this.onCropStart),n.zoomable&&n.zoomOnWheel&&Ce(r,Vr,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Ce(r,$r,this.onDblclick),Ce(e.ownerDocument,jr,this.onCropMove),Ce(e.ownerDocument,zr,this.onCropEnd),n.responsive&&Ce(window,Kr,this.onResize)}},Jo={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,a=n.offsetWidth/r.width,i=n.offsetHeight/r.height,o=Math.abs(a-1)>Math.abs(i-1)?a:i;if(o!==1){var s,l;e.restore&&(s=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(ae(s,function(c,u){s[u]=c*o})),this.setCropBoxData(ae(l,function(c,u){l[u]=c*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ya||this.setDragMode(qo(this.dragBox,Zn)?Ha:br)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Y(n)&&n!==1||Y(r)&&r!==0||e.ctrlKey))){var a=this.options,i=this.pointers,o;e.changedTouches?ae(e.changedTouches,function(s){i[s.identifier]=tn(s)}):i[e.pointerId||0]=tn(e),Object.keys(i).length>1&&a.zoomable&&a.zoomOnTouch?o=Xa:o=ir(e.target,Bt),xo.test(o)&&wt(this.element,rr,{originalEvent:e,action:o})!==!1&&(e.preventDefault(),this.action=o,this.cropping=!1,o===Na&&(this.cropping=!0,se(this.dragBox,mn)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),wt(this.element,nr,{originalEvent:e,action:n})!==!1&&(e.changedTouches?ae(e.changedTouches,function(a){U(r[a.identifier]||{},tn(a,!0))}):U(r[e.pointerId||0]||{},tn(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?ae(e.changedTouches,function(a){delete r[a.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,vt(this.dragBox,mn,this.cropped&&this.options.modal)),wt(this.element,tr,{originalEvent:e,action:n}))}}},Zo={change:function(e){var n=this.options,r=this.canvasData,a=this.containerData,i=this.cropBoxData,o=this.pointers,s=this.action,l=n.aspectRatio,c=i.left,u=i.top,d=i.width,f=i.height,h=c+d,g=u+f,v=0,b=0,L=a.width,w=a.height,k=!0,T;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(v=i.minLeft,b=i.minTop,L=v+Math.min(a.width,r.width,r.left+r.width),w=b+Math.min(a.height,r.height,r.top+r.height));var y=o[Object.keys(o)[0]],p={x:y.endX-y.startX,y:y.endY-y.startY},A=function(q){switch(q){case nt:h+p.x>L&&(p.x=L-h);break;case rt:c+p.x<v&&(p.x=v-c);break;case je:u+p.y<b&&(p.y=b-u);break;case ut:g+p.y>w&&(p.y=w-g);break}};switch(s){case yr:c+=p.x,u+=p.y;break;case nt:if(p.x>=0&&(h>=L||l&&(u<=b||g>=w))){k=!1;break}A(nt),d+=p.x,d<0&&(s=rt,d=-d,c-=d),l&&(f=d/l,u+=(i.height-f)/2);break;case je:if(p.y<=0&&(u<=b||l&&(c<=v||h>=L))){k=!1;break}A(je),f-=p.y,u+=p.y,f<0&&(s=ut,f=-f,u-=f),l&&(d=f*l,c+=(i.width-d)/2);break;case rt:if(p.x<=0&&(c<=v||l&&(u<=b||g>=w))){k=!1;break}A(rt),d-=p.x,c+=p.x,d<0&&(s=nt,d=-d,c-=d),l&&(f=d/l,u+=(i.height-f)/2);break;case ut:if(p.y>=0&&(g>=w||l&&(c<=v||h>=L))){k=!1;break}A(ut),f+=p.y,f<0&&(s=je,f=-f,u-=f),l&&(d=f*l,c+=(i.width-d)/2);break;case xt:if(l){if(p.y<=0&&(u<=b||h>=L)){k=!1;break}A(je),f-=p.y,u+=p.y,d=f*l}else A(je),A(nt),p.x>=0?h<L?d+=p.x:p.y<=0&&u<=b&&(k=!1):d+=p.x,p.y<=0?u>b&&(f-=p.y,u+=p.y):(f-=p.y,u+=p.y);d<0&&f<0?(s=Lt,f=-f,d=-d,u-=f,c-=d):d<0?(s=At,d=-d,c-=d):f<0&&(s=_t,f=-f,u-=f);break;case At:if(l){if(p.y<=0&&(u<=b||c<=v)){k=!1;break}A(je),f-=p.y,u+=p.y,d=f*l,c+=i.width-d}else A(je),A(rt),p.x<=0?c>v?(d-=p.x,c+=p.x):p.y<=0&&u<=b&&(k=!1):(d-=p.x,c+=p.x),p.y<=0?u>b&&(f-=p.y,u+=p.y):(f-=p.y,u+=p.y);d<0&&f<0?(s=_t,f=-f,d=-d,u-=f,c-=d):d<0?(s=xt,d=-d,c-=d):f<0&&(s=Lt,f=-f,u-=f);break;case Lt:if(l){if(p.x<=0&&(c<=v||g>=w)){k=!1;break}A(rt),d-=p.x,c+=p.x,f=d/l}else A(ut),A(rt),p.x<=0?c>v?(d-=p.x,c+=p.x):p.y>=0&&g>=w&&(k=!1):(d-=p.x,c+=p.x),p.y>=0?g<w&&(f+=p.y):f+=p.y;d<0&&f<0?(s=xt,f=-f,d=-d,u-=f,c-=d):d<0?(s=_t,d=-d,c-=d):f<0&&(s=At,f=-f,u-=f);break;case _t:if(l){if(p.x>=0&&(h>=L||g>=w)){k=!1;break}A(nt),d+=p.x,f=d/l}else A(ut),A(nt),p.x>=0?h<L?d+=p.x:p.y>=0&&g>=w&&(k=!1):d+=p.x,p.y>=0?g<w&&(f+=p.y):f+=p.y;d<0&&f<0?(s=At,f=-f,d=-d,u-=f,c-=d):d<0?(s=Lt,d=-d,c-=d):f<0&&(s=xt,f=-f,u-=f);break;case Ba:this.move(p.x,p.y),k=!1;break;case Xa:this.zoom(Bo(o),e),k=!1;break;case Na:if(!p.x||!p.y){k=!1;break}T=Ua(this.cropper),c=y.startX-T.left,u=y.startY-T.top,d=i.minWidth,f=i.minHeight,p.x>0?s=p.y>0?_t:xt:p.x<0&&(c-=d,s=p.y>0?Lt:At),p.y<0&&(u-=f),this.cropped||(Pe(this.cropBox,ge),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}k&&(i.width=d,i.height=f,i.left=c,i.top=u,this.action=s,this.renderCropBox()),ae(o,function(I){I.startX=I.endX,I.startY=I.endY})}},Qo={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&se(this.dragBox,mn),Pe(this.cropBox,ge),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=U({},this.initialImageData),this.canvasData=U({},this.initialCanvasData),this.cropBoxData=U({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(U(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Pe(this.dragBox,mn),se(this.cropBox,ge)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ae(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Pe(this.cropper,Yr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,se(this.cropper,Yr)),this},destroy:function(){var e=this.element;return e[z]?(e[z]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,a=r.left,i=r.top;return this.moveTo(Nn(e)?e:a+Number(e),Nn(n)?n:i+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,a=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Y(e)&&(r.left=e,a=!0),Y(n)&&(r.top=n,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var a=this.options,i=this.canvasData,o=i.width,s=i.height,l=i.naturalWidth,c=i.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&a.zoomable){var u=l*e,d=c*e;if(wt(this.element,ar,{ratio:e,oldRatio:o/l,originalEvent:r})===!1)return this;if(r){var f=this.pointers,h=Ua(this.cropper),g=f&&Object.keys(f).length?Xo(f):{pageX:r.pageX,pageY:r.pageY};i.left-=(u-o)*((g.pageX-h.left-i.left)/o),i.top-=(d-s)*((g.pageY-h.top-i.top)/s)}else gt(n)&&Y(n.x)&&Y(n.y)?(i.left-=(u-o)*((n.x-i.left)/o),i.top-=(d-s)*((n.y-i.top)/s)):(i.left-=(u-o)/2,i.top-=(d-s)/2);i.width=u,i.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Y(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Y(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Y(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,a=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Y(e)&&(r.scaleX=e,a=!0),Y(n)&&(r.scaleY=n,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,a=this.canvasData,i=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:i.left-a.left,y:i.top-a.top,width:i.width,height:i.height};var s=r.width/r.naturalWidth;if(ae(o,function(u,d){o[d]=u/s}),e){var l=Math.round(o.y+o.height),c=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=c-o.x,o.height=l-o.y}}else o={x:0,y:0,width:0,height:0};return n.rotatable&&(o.rotate=r.rotate||0),n.scalable&&(o.scaleX=r.scaleX||1,o.scaleY=r.scaleY||1),o},setData:function(e){var n=this.options,r=this.imageData,a=this.canvasData,i={};if(this.ready&&!this.disabled&&gt(e)){var o=!1;n.rotatable&&Y(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,o=!0),n.scalable&&(Y(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,o=!0),Y(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=r.width/r.naturalWidth;Y(e.x)&&(i.left=e.x*s+a.left),Y(e.y)&&(i.top=e.y*s+a.top),Y(e.width)&&(i.width=e.width*s),Y(e.height)&&(i.height=e.height*s),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?U({},this.containerData):{}},getImageData:function(){return this.sized?U({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&ae(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&gt(e)&&(Y(e.left)&&(n.left=e.left),Y(e.top)&&(n.top=e.top),Y(e.width)?(n.width=e.width,n.height=e.width/r):Y(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,a,i;return this.ready&&this.cropped&&!this.disabled&&gt(e)&&(Y(e.left)&&(n.left=e.left),Y(e.top)&&(n.top=e.top),Y(e.width)&&e.width!==n.width&&(a=!0,n.width=e.width),Y(e.height)&&e.height!==n.height&&(i=!0,n.height=e.height),r&&(a?n.height=n.width/r:i&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=Yo(this.image,this.imageData,n,e);if(!this.cropped)return r;var a=this.getData(e.rounded),i=a.x,o=a.y,s=a.width,l=a.height,c=r.width/Math.floor(n.naturalWidth);c!==1&&(i*=c,o*=c,s*=c,l*=c);var u=s/l,d=Je({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Je({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),h=Je({aspectRatio:u,width:e.width||(c!==1?r.width:s),height:e.height||(c!==1?r.height:l)}),g=h.width,v=h.height;g=Math.min(d.width,Math.max(f.width,g)),v=Math.min(d.height,Math.max(f.height,v));var b=document.createElement("canvas"),L=b.getContext("2d");b.width=bt(g),b.height=bt(v),L.fillStyle=e.fillColor||"transparent",L.fillRect(0,0,g,v);var w=e.imageSmoothingEnabled,k=w===void 0?!0:w,T=e.imageSmoothingQuality;L.imageSmoothingEnabled=k,T&&(L.imageSmoothingQuality=T);var y=r.width,p=r.height,A=i,I=o,q,K,$,de,Q,ee;A<=-s||A>y?(A=0,q=0,$=0,Q=0):A<=0?($=-A,A=0,q=Math.min(y,s+A),Q=q):A<=y&&($=0,q=Math.min(s,y-A),Q=q),q<=0||I<=-l||I>p?(I=0,K=0,de=0,ee=0):I<=0?(de=-I,I=0,K=Math.min(p,l+I),ee=K):I<=p&&(de=0,K=Math.min(l,p-I),ee=K);var J=[A,I,q,K];if(Q>0&&ee>0){var oe=g/s;J.push($*oe,de*oe,Q*oe,ee*oe)}return L.drawImage.apply(L,[r].concat(Ra(J.map(function(Ae){return Math.floor(bt(Ae))})))),b},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!Nn(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var i=e===br,o=n.movable&&e===Ha;e=i||o?e:Ya,n.dragMode=e,Xt(r,Bt,e),vt(r,Zn,i),vt(r,Qn,o),n.cropBoxMovable||(Xt(a,Bt,e),vt(a,Zn,i),vt(a,Qn,o))}return this}},es=Ne.Cropper,Va=(function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ho(this,t),!e||!Lo.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=U({},Jr,gt(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return po(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),a;if(!n[z]){if(n[z]=this,r==="img"){if(this.isImg=!0,a=n.getAttribute("src")||"",this.originalUrl=a,!a)return;a=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(a=n.toDataURL());this.load(a)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var a=this.element,i=this.options;if(!i.rotatable&&!i.scalable&&(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ao.test(n)){_o.test(n)?this.read(Fo(n)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==Gr&&o.abort()},o.onload=function(){r.read(o.response)},o.onloadend=function(){r.reloading=!1,r.xhr=null},i.checkCrossOrigin&&Qr(n)&&a.crossOrigin&&(n=ea(n)),o.open("GET",n,!0),o.responseType="arraybuffer",o.withCredentials=a.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(n){var r=this.options,a=this.imageData,i=zo(n),o=0,s=1,l=1;if(i>1){this.url=jo(n,Gr);var c=Uo(i);o=c.rotate,s=c.scaleX,l=c.scaleY}r.rotatable&&(a.rotate=o),r.scalable&&(a.scaleX=s,a.scaleY=l),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,a=n.crossOrigin,i=r;this.options.checkCrossOrigin&&Qr(r)&&(a||(a="anonymous"),i=ea(r)),this.crossOrigin=a,this.crossOriginUrl=i;var o=document.createElement("img");a&&(o.crossOrigin=a),o.src=i||r,o.alt=n.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),se(o,Wr),n.parentNode.insertBefore(o,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var a=Ne.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ne.navigator.userAgent),i=function(c,u){U(n.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),n.initialImageData=U({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!a){i(r.naturalWidth,r.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){i(o.width,o.height),a||s.removeChild(o)},o.src=r.src,a||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,a=this.image,i=n.parentNode,o=document.createElement("div");o.innerHTML=Co;var s=o.querySelector(".".concat(z,"-container")),l=s.querySelector(".".concat(z,"-canvas")),c=s.querySelector(".".concat(z,"-drag-box")),u=s.querySelector(".".concat(z,"-crop-box")),d=u.querySelector(".".concat(z,"-face"));this.container=i,this.cropper=s,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=s.querySelector(".".concat(z,"-view-box")),this.face=d,l.appendChild(a),se(n,ge),i.insertBefore(s,n.nextSibling),Pe(a,Wr),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,se(u,ge),r.guides||se(u.getElementsByClassName("".concat(z,"-dashed")),ge),r.center||se(u.getElementsByClassName("".concat(z,"-center")),ge),r.background&&se(s,"".concat(z,"-bg")),r.highlight||se(d,wo),r.cropBoxMovable&&(se(d,Qn),Xt(d,Bt,yr)),r.cropBoxResizable||(se(u.getElementsByClassName("".concat(z,"-line")),ge),se(u.getElementsByClassName("".concat(z,"-point")),ge)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),me(r.ready)&&Se(n,Ur,r.ready,{once:!0}),wt(n,Ur)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),Pe(this.element,ge)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=es,t}},{key:"setDefaults",value:function(n){U(Jr,gt(n)&&n)}}])})();U(Va.prototype,Ko,Vo,Go,Jo,Zo,Qo);function m(t,e={}){if(!window.AveTranslations)return console.warn("AveTranslations not loaded"),t;const n=t.split(".");let r=window.AveTranslations;for(const i of n)if(r&&typeof r=="object"&&i in r)r=r[i];else return console.warn(`Translation key not found: ${t}`),t;if(typeof r!="string")return console.warn(`Translation value is not a string: ${t}`),t;let a=r;for(const[i,o]of Object.entries(e))a=a.replace(`:${i}`,o);return a}const Ga=t=>{if(!t)return;t.classList.add("is-active"),t.setAttribute("aria-hidden","false"),t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},ke=t=>{t&&(t.classList.remove("is-active"),t.setAttribute("aria-hidden","true"))},Be=t=>{t&&(ke(t),setTimeout(()=>t.remove(),300))},he=t=>{const{title:e="Modal",body:n="",bodyParams:r=null,type:a="default",variant:i="default",confirmText:o="OK",cancelText:s="Cancel",onConfirm:l=null,onCancel:c=null,size:u="default",autoClose:d=!0}=t,f=document.createElement("div");f.className="modal",f.setAttribute("data-ave-modal",""),f.setAttribute("data-modal-dynamic","true");const h=u==="small"?"modal-sm":u==="large"?"modal-lg":"",g=i!=="default"?`modal-${i}`:"";let v=n;if(r&&Array.isArray(r)&&r.length>0){const y=r.map(p=>`<span class="modal-param">"${p}"</span>`).join(", ");v=`<p class="modal-message">${n} ${y}</p>`}else n&&!n.startsWith("<")&&(v=`<p>${n}</p>`);f.innerHTML=`
        <div class="modal-background" data-ave-modal-close></div>
        <div class="modal-dialog ${h} ${g}">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">${e}</h4>
                    <button class="close" data-ave-modal-dismiss type="button">&times;</button>
                </div>
                <div class="modal-body">
                    ${v}
                </div>
                <div class="modal-footer">
                    ${a==="alert"?`
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="confirm"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="form"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:""}
                </div>
            </div>
        </div>
    `;const b=f.querySelector("[data-modal-confirm]"),L=f.querySelector("[data-modal-cancel]"),w=f.querySelector("[data-ave-modal-dismiss]"),k=f.querySelector("[data-ave-modal-close]"),T=()=>{ke(f),setTimeout(()=>f.remove(),300)};return b&&b.addEventListener("click",()=>{l&&l(f),d&&setTimeout(()=>T(),0)}),L&&L.addEventListener("click",()=>{c&&c(),T()}),w&&w.addEventListener("click",T),k&&k.addEventListener("click",()=>{c&&c(),T()}),document.body.appendChild(f),requestAnimationFrame(()=>{Ga(f),xe.emit("dom:updated",f)}),f},Ht=(t,e={})=>new Promise(n=>{he({title:e.title||m("common.confirm"),body:t,bodyParams:e.bodyParams||null,type:"confirm",variant:e.variant||"default",confirmText:e.confirmText||m("common.yes"),cancelText:e.cancelText||m("common.cancel"),size:e.size||"small",onConfirm:()=>n(!0),onCancel:()=>n(!1)})}),ts=(t,e={})=>{he({title:e.title||m("common.alert"),body:t,bodyParams:e.bodyParams||null,type:"alert",variant:e.variant||"default",confirmText:e.confirmText||m("common.ok"),size:e.size||"small"})};function ns(){window.Ave=window.Ave||{},window.Ave.confirm=Ht,window.Ave.createModal=he,window.Ave.closeModal=ke,window.Ave.destroyModal=Be,document.querySelectorAll("[data-ave-modal-trigger]").forEach(t=>{const e=t.getAttribute("data-ave-modal-trigger"),n=e?document.querySelector(e):null;n&&t.addEventListener("click",r=>{r.preventDefault(),Ga(n)})}),document.querySelectorAll("[data-ave-modal]").forEach(t=>{t.addEventListener("click",e=>{e.target.hasAttribute("data-ave-modal-close")&&ke(t)}),t.querySelectorAll("[data-ave-modal-dismiss]").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),ke(t)})})}),document.addEventListener("keydown",t=>{if(t.key==="Escape"){const e=document.querySelector("[data-ave-modal].is-active");e&&ke(e)}})}let Ot=null;const _=(t="success",e="",n=4e3)=>{if(!Ot&&(Ot=document.getElementById("toast-container"),!Ot)){console.error(m("toast.container_not_found"));return}const r={success:m("toast.defaults.success"),danger:m("toast.defaults.error"),warning:m("toast.defaults.warning"),info:m("toast.defaults.info")},a={success:m("toast.titles.success"),danger:m("toast.titles.error"),warning:m("toast.titles.warning"),info:m("toast.titles.info")},i=document.createElement("div");i.className=`toast toast-${t}`;const s=(e||r[t]||r.info).split(`
`).map(c=>`<p>${c}</p>`).join("");i.innerHTML=`
        <div class="toast-title">${a[t]||a.info}</div>
        <div class="toast-message">${s}</div>
    `,Ot.appendChild(i),requestAnimationFrame(()=>{i.classList.add("show")});const l=t==="danger"?Math.max(n,6e3):n;window.setTimeout(()=>{i.classList.remove("show"),window.setTimeout(()=>i.remove(),200)},l)};function rs(){Ot=document.getElementById("toast-container");const t=document.getElementById("ave-toast-data");if(t)try{const e=JSON.parse(t.textContent);e.type&&e.message&&_(e.type,e.message)}catch(e){console.error(m("toast.parse_error"),e)}document.querySelectorAll("[data-ave-toast-trigger]").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const r=e.getAttribute("data-ave-toast-trigger")||"success",a=e.getAttribute("data-ave-toast-message")||"";_(r,a)})})}const gn={SORTABLE:400,COLLAPSE:300},Er={SORTABLE:"cubic-bezier(0.25, 0.8, 0.25, 1)"},as={OK:200},Xn={BYTE_FACTOR:1024,DECIMAL_PLACES:1};function is(t,e=Xn.DECIMAL_PLACES){const n=["B","KB","MB","GB","TB"];if(t<=0)return"0B";const r=Math.floor(Math.log(t)/Math.log(Xn.BYTE_FACTOR));return(t/Math.pow(Xn.BYTE_FACTOR,r)).toFixed(e)+n[r]}const Ja=new Map,or=(t="")=>t?t.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"",ta=(t,e)=>t.replace(/__INDEX__/g,e).replace(/__index__/g,e).replace(/__ITEM__/g,e).replace(/__item__/g,e).replace(/__TEMPLATE__/g,e).replace(/__template__/g,e);function na(t){if(!t||!t.classList.contains("media-field-container"))return;const e=t.dataset.metaKey;if(!e||!e.includes("__item__")&&!e.includes("__template__"))return;const n=t.closest("[data-fieldset-item]");if(!n)return;const r=n.dataset.itemId;if(r===void 0)return;const a=ta(e,r),i=or(a);if(t.dataset.metaKey=i,t.dataset.collection&&/__(ITEM|TEMPLATE)__/.test(t.dataset.collection)){const o=ta(t.dataset.collection,r);t.dataset.collection=o}t.querySelectorAll('input[data-uploaded-ids], input[data-deleted-ids], input[data-media-props="true"]').forEach(o=>{o.name&&o.name.includes(e)&&(o.name=o.name.replace(e,i))}),delete t.dataset.initialized}function os(){Ja.forEach(t=>{t.uploadedIdsInput&&(t.uploadedIdsInput.value=t.uploadedIds.join(",")),t.deletedIdsInput&&(t.deletedIdsInput.value=t.deletedIds.join(",")),sr(t)})}function sr(t){const{fieldValueInput:e,container:n,collection:r,uploadedIds:a}=t;if(!e||!n)return;const i=n.querySelector("[data-media-grid]"),s=(i?i.querySelectorAll(".media-item"):[]).length>0||(a??[]).length>0;e.value=s?r:""}function vn(t=document){t.querySelectorAll(".media-field-container").forEach(e=>{if(e.dataset.initialized==="true")return;e.dataset.initialized="true";const n=e.dataset.multiple==="true",r=parseInt(e.dataset.maxFiles)||null,a=parseInt(e.dataset.maxSize)||null;e.dataset.accept;const i=e.dataset.uploadUrl,o=e.dataset.modelType||"",s=e.dataset.modelId||"",l=e.dataset.customPath||"",c=e.dataset.pathPrefix||"",u=e.closest("[data-field-name]"),d=u?.dataset.fieldName||"media",f=u?.dataset.fieldId||d.replace(/[^A-Za-z0-9_-]+/g,"-");let h=or(e.dataset.metaKey||d);e.dataset.metaKey=h;const g=JSON.parse(e.dataset.propNames||"[]"),v=e.dataset.collection||"default",b=e.querySelector("[data-media-dropzone]"),L=e.querySelector(".media-file-input"),w=e.querySelector("[data-media-grid]"),k=e.querySelector(".media-bulk-actions"),T=e.querySelector("[data-uploaded-ids]"),y=e.querySelector("[data-deleted-ids]"),p=e.querySelector("[data-media-value]"),A=[],I=[],q=new Set,K=h||d;Ja.set(K,{uploadedIds:A,deletedIds:I,uploadedIdsInput:T,deletedIdsInput:y,fieldValueInput:p,fieldName:d,metaKey:h,collection:v,container:e}),sr({fieldValueInput:p,container:e,collection:v,uploadedIds:A}),b?.addEventListener("click",S=>{S.target.closest(".media-item")||L?.click()}),L?.addEventListener("change",S=>{Q(S.target.files)}),b?.addEventListener("dragover",S=>{S.preventDefault(),b.classList.add("dragover")}),b?.addEventListener("dragleave",()=>{b.classList.remove("dragover")}),b?.addEventListener("drop",S=>{S.preventDefault(),b.classList.remove("dragover"),Q(S.dataTransfer.files)});let $=!1,de=0;w?.addEventListener("mousedown",S=>{S.target.closest("[data-action]")||($=!1,de=Date.now())}),w?.addEventListener("mousemove",()=>{Date.now()-de>200&&($=!0)}),w?.addEventListener("mouseup",S=>{if($){$=!1;return}const x=S.target.closest(".media-item");if(!x||S.target.closest("[data-action]"))return;const D=x.dataset.mediaId;D&&(x.classList.contains("selected")?(x.classList.remove("selected"),q.delete(parseInt(D))):(x.classList.add("selected"),q.add(parseInt(D))),lt())}),k?.addEventListener("click",S=>{const x=S.target.closest("[data-action]");x&&(x.dataset.action==="select-all"?bi():x.dataset.action==="deselect-all"?wi():x.dataset.action==="delete-selected"&&Ei())}),w?.addEventListener("click",S=>{const x=S.target.closest("[data-action]");if(!x)return;const D=x.closest(".media-item"),R=D?.dataset.mediaId;x.dataset.action==="delete"?(S.stopPropagation(),Ae(D,R)):x.dataset.action==="edit"?(S.stopPropagation(),Tt(D,R)):x.dataset.action==="crop"&&(S.stopPropagation(),_e(D,R))}),n&&w&&O.create(w,{animation:gn.SORTABLE,easing:Er.SORTABLE,handle:".media-drag-handle",onEnd:()=>{Me(),En()}});function Q(S){const x=Array.from(S);if(n){if(r&&w.querySelectorAll(".media-item").length+x.length>r){_("warning",m("media.max_files_reached",{count:r}));return}}else{if(x.length>1){_("warning",m("media.only_one_file"));return}w.querySelectorAll(".media-item").forEach(R=>{const M=R.dataset.mediaId;M?oe(M,R):R.remove()})}for(const D of x){if(a&&D.size>a*1024){_("warning",m("media.file_too_large",{name:D.name,size:(a/1024).toFixed(1)}));continue}ee(D)}L&&(L.value="")}function ee(S){const x=new FormData;x.append("files[]",S),x.append("collection",v),o&&x.append("model_type",o),s&&x.append("model_id",s),a&&x.append("max_size",a),l&&x.append("customPath",l);const D=e.dataset.pathStrategy;D&&x.append("pathStrategy",D),c&&x.append("pathPrefix",c);const R=b?.querySelector(".upload-progress"),M=R?.querySelector(".progress-fill"),F=R?.querySelector(".progress-text"),C=b?.querySelector(".upload-prompt");C&&(C.style.display="none"),R&&(R.style.display="block",R.classList.add("active"));const B=document.querySelector('meta[name="csrf-token"]')?.content,X=new XMLHttpRequest;X.upload.addEventListener("progress",ie=>{if(ie.lengthComputable&&M&&F){const Oe=ie.loaded/ie.total*100;M.style.width=Oe+"%",F.textContent=`Uploading... ${Math.round(Oe)}%`}}),X.addEventListener("load",()=>{if(X.status===as.OK)try{const ie=JSON.parse(X.responseText);ie.success&&ie.media?(ie.media.forEach(Oe=>{J(Oe),A.push(Oe.id)}),Xe(),_("success",m("media.upload_success"))):_("danger",m("media.upload_failed",{error:ie.message||m("media.upload_failed_unknown")}))}catch{_("danger",m("media.upload_failed_response"))}else _("danger",m("media.upload_failed",{error:X.statusText}));R&&(R.classList.remove("active"),R.style.display="none"),C&&(C.style.display="flex"),M&&(M.style.width="0%")}),X.addEventListener("error",()=>{_("danger",m("media.upload_failed_network")),R&&(R.classList.remove("active"),R.style.display="none"),C&&(C.style.display="flex")}),X.open("POST",i,!0),B&&X.setRequestHeader("X-CSRF-TOKEN",B),X.send(x)}function J(S){const x=document.getElementById("media-item-template-"+f);if(!x){console.error("Media item template not found:","media-item-template-"+f);return}const D=x.content.cloneNode(!0).querySelector(".media-item");D.dataset.mediaId=S.id;const R=S.mime_type&&S.mime_type.startsWith("image/");if(R){const C=D.querySelector(".media-image");C.src=S.url||S.preview_url,C.alt=S.file_name,C.style.display="block";const B=D.querySelector('[data-action="crop"]');B&&(B.style.display="flex")}else{const C=D.querySelector(".media-file-icon"),B=C.querySelector(".media-file-name");B.textContent=S.file_name,C.style.display="flex"}const M=D.querySelector('input[type="hidden"]');M.value=S.id;const F=D.querySelector(".media-item-footer");if(F){const C=F.querySelector(".media-filename");C&&(C.textContent=S.file_name);const B=F.querySelector(".media-size");B&&S.size&&(B.textContent=is(S.size),S.size>1048576&&B.classList.add("media-large-file"));const X=F.querySelector(".media-title i");X&&S.title&&(X.textContent=S.title)}if(w?.appendChild(D),R){const C=D.querySelector(".media-image");C&&C.src&&(e.dataset.previewUrl=C.src)}xe.emit("dom:updated",D),Me()}function oe(S,x){if(!S){x?.remove(),Me();return}const D=i.replace("/upload",`/${S}`),R=document.querySelector('meta[name="csrf-token"]')?.content;fetch(D,{method:"DELETE",headers:{"X-CSRF-TOKEN":R,Accept:"application/json","Content-Type":"application/json"}}).then(M=>M.json()).then(M=>{M.success?(x?.remove(),Me()):console.error("Failed to delete file:",M.message)}).catch(M=>{console.error("Delete error:",M)})}async function Ae(S,x){const D=S?.querySelector(".media-filename")?.textContent||"this file";if(!await Ht(m("media.confirm_remove"),{title:m("common.delete"),variant:"error",bodyParams:[D],confirmText:m("common.delete"),cancelText:m("common.cancel")}))return;if(!x){S?.remove(),Me(),Xe(),_("success",m("media.remove_success"));return}const M=i.replace("/upload",`/${x}`),F=document.querySelector('meta[name="csrf-token"]')?.content;fetch(M,{method:"DELETE",headers:{"X-CSRF-TOKEN":F,Accept:"application/json","Content-Type":"application/json"}}).then(C=>C.json()).then(C=>{if(C.success){S?.remove(),Me();const B=parseInt(x,10),X=A.indexOf(B);X!==-1&&A.splice(X,1),I.includes(B)||I.push(B),Xe(),_("success",m("media.delete_success"))}else _("danger",m("media.delete_failed",{error:C.message||m("media.delete_failed_unknown")}))}).catch(C=>{console.error("Delete error:",C),_("danger",m("media.delete_failed_network"))})}function _e(S,x){const D=S?.querySelector(".media-filename")?.textContent||"Media",R=S?.querySelector("img");if(!R){_("danger",m("media.crop_load_failed"));return}const M=R.src,F=`
                <div class="cropper-modal-content">
                    <div class="cropper-image-container">
                        <img id="cropper-image-${x}" src="${M}" alt="Crop image" class="cropper-image">
                    </div>
                    <div class="cropper-options">
                        <div class="row">
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Aspect Ratio:</label>
                                    <select id="cropper-ratio-${x}" class="form-control">
                                        <option value="">Free</option>
                                        <option value="16/9">16:9 (landscape)</option>
                                        <option value="9/16">9:16 (portrait)</option>
                                        <option value="4/3">4:3 (landscape)</option>
                                        <option value="3/4">3:4 (portrait)</option>
                                        <option value="1/1">1:1 (square)</option>
                                        <option value="3/2">3:2 (landscape)</option>
                                        <option value="2/3">2:3 (portrait)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-field">
                                    <label>Max Size (px):</label>
                                    <input type="number" id="cropper-max-size-${x}" class="form-control" placeholder="No limit" min="1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,C=he({title:`Crop: ${D}`,body:F,type:"form",confirmText:m("media.crop_button"),cancelText:m("common.cancel"),size:"large",autoClose:!1,onConfirm:B=>{Ze(B,x,S)}});setTimeout(()=>{const B=document.getElementById(`cropper-image-${x}`),X=document.getElementById(`cropper-ratio-${x}`);if(!B){console.error("Cropper image element not found");return}const ie=new Va(B,{aspectRatio:NaN,viewMode:1,autoCropArea:1,responsive:!0,guides:!0,grid:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0});C.cropper=ie,X?.addEventListener("change",Oe=>{const Sn=Oe.target.value;if(Sn==="")ie.setAspectRatio(NaN);else{const[Tn,xn]=Sn.split("/").map(Number);ie.setAspectRatio(Tn/xn)}})},100)}function Ze(S,x,D){const R=S.cropper;if(!R){_("danger",m("media.cropper_not_initialized"));return}R.getCanvasData();const M=R.getData(!0);if(M.width<=0||M.height<=0){_("danger",m("media.invalid_crop_area"));return}const F=Math.round(M.x),C=Math.round(M.y),B=Math.round(M.width),X=Math.round(M.height),ie=document.getElementById(`cropper-max-size-${x}`),Oe=ie?.value?parseInt(ie.value,10):null,Tn=document.getElementById(`cropper-ratio-${x}`)?.value||"",xn=document.querySelector('meta[name="csrf-token"]')?.content,Si=i.replace("/upload",""),Tr={x:F,y:C,width:B,height:X,aspectRatio:Tn};Oe&&(Tr.maxSize=Oe),fetch(`${Si}/${x}/crop`,{method:"POST",headers:{"X-CSRF-TOKEN":xn,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Tr)}).then(Ee=>Ee.ok?Ee.json():Ee.json().then(jt=>{throw new Error(jt.message||`HTTP ${Ee.status}`)})).then(Ee=>{if(Ee.success){const jt=D.querySelector("img");if(jt){const zt=new Date().getTime();jt.src=Ee.media.url+"?t="+zt}if(Ee.media.size){const zt=D.querySelector(".media-size");if(zt){const xr=["B","KB","MB","GB"];let An=Ee.media.size,_n=0;for(;An>=1024&&_n<xr.length-1;)An/=1024,_n++;const Ti=An.toFixed(1)+xr[_n];zt.textContent=Ti}}_("success",m("media.crop_success")),Be(S)}else throw new Error(Ee.message||"Crop failed")}).catch(Ee=>{_("danger",m("media.crop_failed",{error:Ee.message}))})}function Tt(S,x){const D=S?.querySelector(".media-filename")?.textContent||"Media",R=S.querySelector(`input[data-media-props="true"][data-props-id="${x}"]`),M=R?JSON.parse(R.value||"{}"):{},F=g.map(C=>{const B=C.charAt(0).toUpperCase()+C.slice(1).replace(/_/g," "),X=`media-prop-${C}`;return`
                    <div class="form-field">
                        <label for="${X}">${B}</label>
                        <input type="text" id="${X}" name="${C}" class="form-control" value="${M[C]||""}" placeholder="Enter ${B.toLowerCase()}">
                    </div>
                `}).join("");he({title:`Edit: ${D}`,body:F,type:"form",confirmText:m("common.save"),cancelText:m("common.cancel"),size:"default",autoClose:!1,onConfirm:C=>{Qe(C,x,S)}})}function Qe(S,x,D){const R=document.querySelector('meta[name="csrf-token"]')?.content,M={};S.querySelectorAll("input[name], textarea[name]").forEach(C=>{const B=C.getAttribute("name");B&&(M[B]=C.value||"")});const F=i.replace("/upload","");fetch(`${F}/${x}/props`,{method:"POST",headers:{"X-CSRF-TOKEN":R,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(M)}).then(C=>C.ok?C.json():C.json().then(B=>{throw new Error(B.message||`HTTP ${C.status}`)})).then(C=>{if(C.success){if(C.media?.props?.title){const ie=D.querySelector(".media-title i");ie&&(ie.textContent=C.media.props.title)}const B=e.dataset.metaKey||h||or(d);let X=D.querySelector(`input[data-media-props="true"][data-props-id="${x}"]`);X?(X.name=`__media_props[${B}][${x}]`,X.setAttribute("data-media-props","true"),X.setAttribute("data-props-id",x)):(X=document.createElement("input"),X.type="hidden",X.name=`__media_props[${B}][${x}]`,X.setAttribute("data-media-props","true"),X.setAttribute("data-props-id",x),D.appendChild(X)),X.value=JSON.stringify(C.media.props),_("success",C.message||m("media.properties_saved")),Be(S)}else throw new Error(C.message||"Save failed")}).catch(C=>{_("danger",m("media.save_failed",{error:C.message}))})}function Xe(){T&&(T.value=A.join(",")),y&&(y.value=I.join(",")),sr({fieldValueInput:p,container:e,collection:v,uploadedIds:A})}function Me(){w?.querySelectorAll(".media-item")?.forEach((x,D)=>{const R=x.querySelector(".media-order");R&&(R.textContent=D+1)})}function En(){const S=w.querySelectorAll(".media-item"),x=[];if(S.forEach((M,F)=>{const C=M.dataset.mediaId;C&&x.push({id:parseInt(C),order:F})}),x.length===0)return;const D=document.querySelector('meta[name="csrf-token"]')?.content,R=i.replace("/upload","/reorder");fetch(R,{method:"POST",headers:{"X-CSRF-TOKEN":D,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({media:x,collection:v})}).then(M=>M.json()).then(M=>{M.success?_("success",m("media.reorder_success")):(console.error("Order update failed:",M.message),_("danger",m("media.reorder_failed")))}).catch(M=>{console.error("Order update error:",M),_("danger",m("media.reorder_failed"))})}function lt(){const S=q.size;S>0?(k.style.display="block",k.querySelector(".selected-count").textContent=S):(k.style.display="none",q.clear())}function bi(){w.querySelectorAll(".media-item").forEach(x=>{const D=x.dataset.mediaId;D&&(q.add(parseInt(D)),x.classList.add("selected"))}),lt()}function wi(){w.querySelectorAll(".media-item").forEach(x=>{x.classList.remove("selected")}),q.clear(),lt()}async function Ei(){const S=Array.from(q);if(S.length===0){_("warning",m("media.no_files_selected"));return}if(!await Ht(`You are going to remove ${S.length} file(s):`,{title:m("common.delete"),variant:"error",confirmText:m("common.delete"),cancelText:m("common.cancel")}))return;const D=document.querySelector('meta[name="csrf-token"]')?.content,R=i.replace("/upload","");fetch(`${R}/bulk-delete`,{method:"POST",headers:{"X-CSRF-TOKEN":D,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({ids:S})}).then(M=>M.ok?M.json():M.json().then(F=>{throw new Error(F.message||`HTTP ${M.status}`)})).then(M=>{if(M.success)S.forEach(F=>{const C=w.querySelector(`[data-media-id="${F}"]`);C&&C.remove();const B=parseInt(F,10),X=A.indexOf(B);X!==-1&&A.splice(X,1),I.includes(B)||I.push(B)}),q.clear(),lt(),Me(),Xe(),_("success",m("media.bulk_delete_success",{count:M.deleted}));else throw new Error(M.message||"Delete failed")}).catch(M=>{_("danger",m("media.bulk_delete_failed",{error:M.message}))})}xe.on("dom:updated",S=>{if(S.classList?.contains("media-field-container"))na(S),vn(S);else{const x=S.querySelectorAll?.(".media-field-container")||[];x.forEach(D=>{na(D)}),x.length>0&&vn(S)}})})}const ss="modulepreload",ls=function(t,e){return new URL(t,e).href},ra={},cs=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");a=c(n.map(u=>{if(u=ls(u,r),u in ra)return;ra[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(r)for(let g=o.length-1;g>=0;g--){const v=o[g];if(v.href===u&&(!d||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ss,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return e().catch(i)})};function Za(t=document){t.querySelectorAll("[data-ave-chips]").forEach(e=>{const n=e.querySelector("input");e.addEventListener("click",()=>{n?.focus()}),e.addEventListener("keydown",r=>{if(!n||r.key!=="Enter")return;const a=n.value.trim();if(!a)return;r.preventDefault();const i=document.createElement("span");i.className="chip",i.innerHTML=`${a} <span class="chip-remove" data-ave-chip-remove>&times;</span>`,e.insertBefore(i,n),n.value=""}),e.addEventListener("click",r=>{const a=r.target.closest("[data-ave-chip-remove]");if(!a)return;r.preventDefault(),a.closest(".chip")?.remove()})})}let lr=[],aa=!1;const yn=t=>{lr.forEach(e=>{e!==t&&e.classList.remove("is-open")})},ds=(t,e,n,r,a)=>{const i=()=>{const o=a.filter(c=>c.querySelector("input")?.checked);if(!o.length){n.textContent=r,n.classList.add("select-dropdown__placeholder");return}const s=o.map(c=>c.getAttribute("data-label")||c.textContent.trim()),l=s.length>3?`${s.length} options selected`:s.join(", ");n.textContent=l,n.classList.remove("select-dropdown__placeholder")};a.forEach(o=>{const s=o.querySelector('input[type="checkbox"]');s&&(o.classList.toggle("is-selected",s.checked),s.addEventListener("change",()=>{o.classList.toggle("is-selected",s.checked),i()}),o.addEventListener("click",l=>{l.target!==s&&(s.checked=!s.checked,s.dispatchEvent(new Event("change",{bubbles:!0})))}))}),i(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");yn(t),t.classList.toggle("is-open",s)})},us=(t,e,n,r,a)=>{const i=()=>{const o=a.find(s=>s.querySelector("input")?.checked);o?(n.textContent=o.getAttribute("data-label")||o.textContent.trim(),n.classList.remove("select-dropdown__placeholder")):(n.textContent=r,n.classList.add("select-dropdown__placeholder")),a.forEach(s=>{const l=s.querySelector("input");s.classList.toggle("is-selected",!!l?.checked)})};a.forEach(o=>{const s=o.querySelector('input[type="radio"]');if(!s)return;o.classList.toggle("is-selected",s.checked);const l=()=>{s.checked&&(i(),t.classList.remove("is-open"))};s.addEventListener("change",l),o.addEventListener("click",c=>{c.target!==s&&(s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})))})}),i(),e.addEventListener("click",o=>{o.preventDefault();const s=!t.classList.contains("is-open");yn(t),t.classList.toggle("is-open",s)})},fs=(t,e)=>{const n=t.querySelector("[data-ave-select-dropdown-search]");n&&n.addEventListener("input",()=>{const r=n.value.trim().toLowerCase();e.forEach(a=>{const o=(a.getAttribute("data-label")||a.textContent||"").toLowerCase().includes(r);a.classList.toggle("is-hidden",!!r&&!o)})})};function Qa(t=document){const e=Array.from(t.querySelectorAll("[data-ave-select-dropdown]"));e.length&&(e.forEach(n=>{lr.includes(n)||lr.push(n)}),e.forEach(n=>{const r=n.querySelector("[data-ave-select-toggle]"),a=n.querySelector("[data-ave-select-label]"),i=n.querySelector("[data-ave-select-menu]");if(!r||!a||!i)return;const o=r.getAttribute("data-placeholder")||a.textContent.trim();a.classList.add("select-dropdown__placeholder");const s=Array.from(i.querySelectorAll("[data-ave-select-option]")),l=n.getAttribute("data-ave-select-dropdown")||"single";l==="multi"?ds(n,r,a,o,s):us(n,r,a,o,s),l==="search"&&fs(n,s)}),aa||(document.addEventListener("click",n=>{n.target.closest("[data-ave-select-dropdown]")||yn()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&yn()}),aa=!0))}function hs(t){const n=t.closest(".slug-input-wrapper")?.querySelector(".slug-loader");n&&(n.style.display="block"),t.classList.add("is-loading")}function ps(t){const n=t.closest(".slug-input-wrapper")?.querySelector(".slug-loader");n&&(n.style.display="none"),t.classList.remove("is-loading")}async function ms(t,e,n,r){try{const a=document.querySelector('meta[name="csrf-token"]')?.content||"",i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json"},body:JSON.stringify({text:t,separator:e,locale:n})});return i.ok?(await i.json()).slug||null:(console.error(`Slug API returned status ${i.status}`),null)}catch(a){return console.error("Failed to generate slug:",a),null}}function gs(t){const e=t.dataset.slugSource;if(!e){console.warn("Slug field missing data-slug-source:",t);return}const n=document.querySelector(`[name="${e}"]`);if(!n){console.warn(`Source field not found: ${e}`);return}const r=t.dataset.slugSeparator||"-",a=t.dataset.slugLocale||null,i=t.dataset.slugApiUrl;if(!i){console.error("Slug field missing data-slug-api-url");return}let o=null;t.addEventListener("focus",async function(){if(!this.value.trim()){const l=n.value.trim();if(l){o&&(o.abort(),o=null),hs(this);const c=new AbortController;o=c;try{const u=await ms(l,r,a,i);u!==null&&o===c&&(this.value=u)}finally{ps(this),o===c&&(o=null)}}}})}function ei(t=document){t.querySelectorAll("[data-slug-field]").forEach(gs)}function ti(t=document){t.querySelectorAll("[data-password-toggle]").forEach(n=>{n.addEventListener("click",function(r){r.preventDefault(),r.stopImmediatePropagation();const a=this.closest(".password-input-wrapper"),i=a?.querySelector("[data-password-input]"),o=this.querySelector(".icon-eye"),s=this.querySelector(".icon-eye-off");!a||!i||(i.type==="password"?(i.type="text",a.classList.add("password-shown"),o&&o.classList.add("hidden"),s&&s.classList.remove("hidden")):(i.type="password",a.classList.remove("password-shown"),o&&o.classList.remove("hidden"),s&&s.classList.add("hidden")))},!0)})}function ni(t=document){t.querySelectorAll("[data-ave-option-cards]").forEach(e=>{const n=e.querySelectorAll(".option-card"),r=()=>{n.forEach(a=>{const i=a.querySelector("input");a.classList.toggle("selected",!!i?.checked)})};n.forEach(a=>{const i=a.querySelector("input");i&&(i.addEventListener("change",()=>{if(i.type==="radio"){n.forEach(o=>{const s=o.querySelector("input");o.classList.toggle("selected",s===i)});return}a.classList.toggle("selected",i.checked)}),a.addEventListener("click",o=>{o.target!==i&&(i.type==="radio"?(i.checked=!0,i.dispatchEvent(new Event("change",{bubbles:!0}))):(i.checked=!i.checked,i.dispatchEvent(new Event("change",{bubbles:!0}))))}))}),r()})}function He(t,e=null,n=null){if(t){if(!e||!n){const r=t.querySelector(".fieldset-item-header, [data-head-title-field], [data-head-preview-field]");if(!r)return;e=e||r.dataset.headTitleField,n=n||r.dataset.headPreviewField}e&&vs(t,e),n&&ys(t,n)}}function vs(t,e){if(!t||!e)return;const n=t.querySelector("[data-item-title]");if(!n)return;let r=t.querySelector(`[name$="[${e}]"]`);r||(r=t.querySelector(`[name*="[${e}]"]`)),r&&r.value?(n.textContent=r.value,n.style.display="block"):n.style.display="none",ri(t)}function ri(t){const e=t.querySelector("[data-item-placeholder]");if(!e)return;const n=t.querySelector("[data-item-title]"),r=t.querySelector("[data-item-preview]"),a=n&&n.style.display!=="none"&&n.textContent.trim(),i=r&&r.style.display!=="none"&&r.style.backgroundImage;!a&&!i?e.style.display="flex":e.style.display="none"}function ys(t,e){if(!t||!e)return;const n=t.querySelector("[data-item-preview]");if(!n)return;const r=t.querySelector(`[data-field-name*="${e}"]`);if(!r){n.style.backgroundImage="",n.style.display="none";return}let a=null;if(a=r.dataset.previewUrl,!a){const i=r.querySelector(".media-preview img");i&&i.src&&(a=i.src)}a&&a.length>0?(n.style.backgroundImage=`url('${a}')`,n.style.display="block"):(n.style.backgroundImage="",n.style.display="none"),ri(t)}const ai=new WeakMap,cr=new Map;function bs(t,e,n){if(!t){console.error("Cannot register sortable: container is null");return}ai.set(t,n),cr.set(e,t)}function nn(t){const e=cr.get(t);return e?document.contains(e)?ai.get(e)||null:(cr.delete(t),null):null}let it=0;const ii="fieldset-editing";function ws(t="default"){return it++,it===1&&document.body.classList.add(ii),it}function Hn(t="default"){return it>0&&it--,it===0&&document.body.classList.remove(ii),it}function oi(t=document){t.querySelectorAll("[data-fieldset].fieldset-cards-view").forEach(e=>{if(e.dataset.cardsInitialized==="true")return;const n=e.querySelector("[data-fieldset-items]"),r=e.dataset.fieldName;e.dataset.cardsInitialized="true",e.addEventListener("input",a,!0),e.addEventListener("change",a,!0),e.addEventListener("mediaChanged",i,!0),e.addEventListener("click",o=>{const s=o.target.closest('[data-action="close-sidebar"]');if(s){const u=s.closest("[data-item-index]");if(u){o.stopPropagation(),u.classList.remove("is-editing"),Hn(),He(u);const d=nn(r);d&&d.option("disabled",!1),n.classList.remove("sortable-disabled")}return}if(o.target.closest('[data-action="delete"]'))return;const c=o.target.closest(".fieldset-card-header");if(c){const u=c.closest("[data-item-index]");if(u){u.classList.add("is-editing"),ws();const d=nn(r);d&&d.option("disabled",!0),n.classList.add("sortable-disabled")}return}}),document.addEventListener("keydown",o=>{if(o.key==="Escape"){const s=e.querySelector(".fieldset-item.is-editing");if(s){He(s),s.classList.remove("is-editing"),Hn();const l=nn(r);l&&l.option("disabled",!1),n.classList.remove("sortable-disabled")}}}),document.addEventListener("click",o=>{if(o.target===document.body||o.target.tagName==="HTML"){const s=e.querySelector(".fieldset-item.is-editing");if(s){He(s),s.classList.remove("is-editing"),Hn();const l=nn(r);l&&l.option("disabled",!1),n.classList.remove("sortable-disabled")}}});function a(o){const s=o.target.closest("[data-item-index]");s&&He(s)}function i(o){const s=o.target.closest("[data-item-index]");s&&He(s)}})}let Yn=null;async function Es(){return Yn||(Yn=cs(()=>import("./editors.js"),[],import.meta.url)),Yn}function si(t){ba(t),Za(t),ni(t),Qa(t),ti(t),ei(t),vn(t),oi(t)}async function li(t){let e=null;try{e=await Es()}catch(a){console.error("Failed to load editors bundle",a);return}const{initCodeEditor:n,initRichEditor:r}=e;typeof n=="function"&&n(t),typeof r=="function"&&r(t)}function Ss(){xe.on("dom:updated",t=>{si(t),li(t)})}function Ts(t=document){t.querySelectorAll("[data-fieldset]").forEach(e=>{const n=e.dataset.fieldName,r=e.querySelector("[data-fieldset-items]"),a=document.getElementById(`fieldset-template-${n}`),i=e.querySelector('[data-action="add"]'),o=e.dataset.sortable==="true",s=e.dataset.collapsible==="true",l=parseInt(e.dataset.minItems)||0,c=parseInt(e.dataset.maxItems)||null;if(!a){console.error(`FieldSet template not found: fieldset-template-${n}`);return}let u=null;const d=()=>Array.from(r.querySelectorAll("[data-field-id]")).map(T=>parseInt(T.value,10)).filter(Number.isInteger),f=()=>{const T=new Set(d());let y=0;for(;T.has(y);)y++;return y},h=(T,y)=>T.replace(/__INDEX__/g,y).replace(/__index__/g,y).replace(/__ITEM__/g,y).replace(/__item__/g,y).replace(/__TEMPLATE__/g,y).replace(/__template__/g,y),g=(T,y,p)=>{[T,...T.querySelectorAll("*")].forEach(I=>{Array.from(I.attributes||[]).forEach(q=>{const K=h(q.value,p);K!==q.value&&I.setAttribute(q.name,K)}),Object.entries(I.dataset||{}).forEach(([q,K])=>{const $=h(K,p);$!==K&&(I.dataset[q]=$)})}),T.dataset.itemIndex=y,T.dataset.itemId=p};if(o){const T=e.classList.contains("fieldset-cards-view"),y={animation:gn.SORTABLE,easing:Er.SORTABLE,ghostClass:"sortable-ghost",dragClass:"sortable-drag",disabled:!T,onEnd:()=>{w()}};T||(y.handle=".fieldset-drag-handle"),u=O.create(r,y),bs(e,n,u)}i&&i.addEventListener("click",()=>{const T=r.querySelectorAll(".fieldset-item").length;if(c&&T>=c){alert(m("fieldset.max_items_reached",{count:c}));return}const y=a.content.cloneNode(!0);r.appendChild(y);const p=r.lastElementChild;if(!p){console.error("Failed to add fieldset item");return}const A=f();g(p,T,A);const I=p.querySelector("[data-field-id]");I&&(I.value=A),p.querySelectorAll(".media-field-container").forEach(q=>{q.dataset.initialized="false"}),si(p),li(p),xe.emit("dom:updated",p),w(),He(p)}),r.addEventListener("click",async T=>{const y=T.target.closest('[data-action="delete"]');if(!y)return;const p=y.closest(".fieldset-item");if(!p)return;const A=r.querySelectorAll(".fieldset-item").length;if(l>0&&A<=l){ts(m("fieldset.min_items_required",{count:l}),{title:m("fieldset.deletion_blocked"),variant:"warning",confirmText:m("fieldset.ok_button")});return}await Ht(m("fieldset.confirm_delete"),{title:m("fieldset.delete_item"),variant:"error",confirmText:m("fieldset.delete_button"),cancelText:m("fieldset.cancel_button")})&&(p.remove(),w())}),s&&r.addEventListener("click",T=>{const y=T.target.closest('[data-action="collapse"]');if(!y)return;const p=y.closest(".fieldset-item");if(!p)return;const A=p.querySelector(".fieldset-item-fields");if(!A)return;p.classList.contains("collapsed")?(p.classList.remove("collapsed"),A.style.maxHeight=A.scrollHeight+"px",setTimeout(()=>{A.style.maxHeight=""},gn.COLLAPSE)):(A.style.maxHeight=A.scrollHeight+"px",A.offsetHeight,A.style.maxHeight="0",p.classList.add("collapsed"))});const v=e.querySelector('[data-action="collapse-all"]');v&&v.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(y=>{if(!y.classList.contains("collapsed")){const p=y.querySelector(".fieldset-item-fields");p&&(p.style.maxHeight=p.scrollHeight+"px",p.offsetHeight,p.style.maxHeight="0",y.classList.add("collapsed"))}})});const b=e.querySelector('[data-action="expand-all"]');b&&b.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(y=>{if(y.classList.contains("collapsed")){const p=y.querySelector(".fieldset-item-fields");p&&(y.classList.remove("collapsed"),p.style.maxHeight=p.scrollHeight+"px",setTimeout(()=>{p.style.maxHeight=""},300))}})});const L=e.querySelector('[data-action="toggle-sort"]');if(L&&u){const T=y=>{[v,b].forEach(p=>{p&&(p.disabled=!y,p.classList.toggle("is-disabled",!y))})};T(!L.checked),L.addEventListener("change",y=>{y.target.checked?(e.classList.add("sort-mode"),u.option("disabled",!1),T(!1),r.querySelectorAll(".fieldset-item").forEach(I=>{const q=I.querySelector(".fieldset-item-fields");q&&(q.style.maxHeight="0",I.classList.add("collapsed"))})):(e.classList.remove("sort-mode"),u.option("disabled",!0),T(!0),r.querySelectorAll(".fieldset-item").forEach(I=>{const q=I.querySelector(".fieldset-item-fields");q&&(I.classList.remove("collapsed"),q.style.maxHeight="")}))})}function w(){r.querySelectorAll(".fieldset-item").forEach((y,p)=>{y.dataset.itemIndex=p;const A=y.querySelector(".fieldset-item-number");A&&(A.textContent=p+1);const I=y.querySelector(".fieldset-item-order");I&&(I.textContent=p+1)})}w(),k(),r.addEventListener("input",T=>{const y=T.target.closest(".fieldset-item");y&&He(y)}),r.addEventListener("mediaChanged",T=>{const y=T.target.closest(".fieldset-item");y&&He(y)});function k(){r.querySelectorAll(".fieldset-item").forEach(y=>He(y))}})}function xs(t=document){t.querySelectorAll('.toggle[data-toggle="toggle"]').forEach(n=>{if(n.dataset.initialized==="true")return;n.dataset.initialized="true";const r=n.querySelector('input[type="checkbox"]'),a=n.querySelector(".toggle-on"),i=n.querySelector(".toggle-off");if(!r||!a||!i)return;const o=()=>{n.classList.toggle("off",!r.checked),a.classList.toggle("active",r.checked),i.classList.toggle("active",!r.checked)};o(),ci(n),r.addEventListener("change",o),n.addEventListener("click",()=>{r.checked=!r.checked,r.dispatchEvent(new Event("change"))})}),As()}function ci(t){const e=t.querySelector(".toggle-on"),n=t.querySelector(".toggle-off");if(!e||!n)return;const r=e.offsetWidth,a=n.offsetWidth,i=Math.max(r,a);i>0&&(t.style.minWidth=i+5+"px",e.style.width=i+"px",e.style.minWidth=i+"px",n.style.width=i+"px",n.style.minWidth=i+"px")}let ia=!1;function As(){ia||(ia=!0,xe.on("tab:activated",({pane:t})=>{requestAnimationFrame(()=>{t.querySelectorAll('.toggle[data-toggle="toggle"]').forEach(n=>{ci(n)})})}))}function _s(t=document){t.querySelectorAll("[data-tags-field]").forEach(n=>{n.dataset.tagsField;const r=n.querySelector(".tags-input"),a=n.parentElement.querySelector(".tags-hidden-input"),i=r?.dataset.tagsSeparator||",";r&&(r.addEventListener("keydown",o=>{if(o.key==="Enter"||o.key===i){o.preventDefault();const s=r.value.trim();s&&(Wn(n,s,a,i),r.value="")}if(o.key==="Tab"){const s=r.value.trim();s&&(o.preventDefault(),Wn(n,s,a,i),r.value="")}}),r.addEventListener("blur",()=>{const o=r.value.trim();o&&(Wn(n,o,a,i),r.value="")}),n.addEventListener("click",o=>{o.target.classList.contains("chip-remove")&&(o.target.closest(".chip").remove(),di(n,a,i))}))})}function Wn(t,e,n,r){const a=t.querySelectorAll(".chip-text"),i=e.toLowerCase();for(const l of a)if(l.textContent.toLowerCase()===i)return;const o=document.createElement("div");o.className="chip",o.tabIndex=0,o.innerHTML=`
        <span class="chip-text">${Ls(e)}</span>
        <span class="chip-remove" data-tag-remove>&times;</span>
    `;const s=t.querySelector(".tags-input");s.parentElement.insertBefore(o,s),di(t,n,r)}function di(t,e,n){const r=t.querySelectorAll(".chip-text"),a=Array.from(r).map(i=>i.textContent.trim());e.value=a.join(n.trim()+" ")}function Ls(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])}function Cs(t=document){t.querySelectorAll("[data-file-field]").forEach(n=>{const r=n.dataset.fileField,a=n.dataset.customPath||"",i=n.dataset.pathPrefix||"",o=n.querySelector("[data-file-input]"),s=n.querySelector("[data-file-delete]"),l=n.querySelector(".file-path-input"),c=n.querySelector("[data-file-progress]"),u=n.querySelector("[data-file-input-area]"),d=n.querySelector(".file-preview");if(!o||!l){console.error("[Ave] File upload: missing required elements for field",r);return}o.addEventListener("change",f=>{const h=f.target.files[0];if(!h)return;c.style.display="block";const g=c.querySelector(".progress-fill");g.style.width="0%";const v=new FormData;v.append("file",h),v.append("field",r);const b=n.closest("form"),L=b?.dataset.modelType||"",w=b?.dataset.modelId||"";L&&v.append("model_type",L),w&&v.append("model_id",w),a&&v.append("customPath",a),i&&v.append("pathPrefix",i);const k=document.querySelector('meta[name="csrf-token"]')?.content,T=new XMLHttpRequest;T.upload.addEventListener("progress",y=>{if(y.lengthComputable){const p=y.loaded/y.total*100;g.style.width=p+"%"}}),T.addEventListener("load",()=>{if(c.style.display="none",T.status===200)try{const y=JSON.parse(T.responseText);y.success&&y.path?(l.value=y.path,Ds(n,h.name,y.path),u.classList.add("hidden"),o.value=""):alert(m("upload.upload_failed_with_error",{error:y.message||m("media.upload_failed_unknown")}))}catch(y){console.error("[Ave] Error parsing upload response:",y),alert(m("upload.upload_processing_error"))}else console.error("[Ave] Upload failed with status:",T.status),alert(m("upload.upload_failed_with_status",{status:T.status}))}),T.addEventListener("error",()=>{c.style.display="none",console.error("[Ave] Upload error occurred"),alert(m("upload.upload_error"))}),T.open("POST","/admin/api/file-upload"),T.setRequestHeader("X-Requested-With","XMLHttpRequest"),k&&T.setRequestHeader("X-CSRF-TOKEN",k),T.send(v)}),s&&s.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation(),l.value="",d&&d.remove(),u.classList.remove("hidden"),o.value=""})})}function Ds(t,e,n){const r=t.querySelector(".file-preview");r&&r.remove();const a=document.createElement("div");a.className="file-preview",a.innerHTML=`
        <div class="file-item">
            <div class="file-info">
                <span class="file-name">${oa(e)}</span>
                <span class="file-size" data-file-path="${oa(n)}"></span>
            </div>
            <button type="button" class="file-delete-btn" data-file-delete style="cursor: pointer;">
                <i class="voyager-trash"></i> Remove
            </button>
        </div>
    `;const i=t.querySelector("[data-file-input-area]");i.parentElement.insertBefore(a,i);const o=a.querySelector("[data-file-delete]");o&&o.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const l=t.querySelector(".file-path-input");l.value="",a.remove(),t.querySelector("[data-file-input-area]").classList.remove("hidden");const u=t.querySelector("[data-file-input]");u.value=""})}function oa(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])}function Ms(t=document){ba(t),Za(t),ni(t),Qa(t),ti(t),xs(t),ei(t),_s(t),Cs(t),vn(t),Ts(t),oi(t),t.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",()=>{os()})})}function Os(){document.querySelectorAll('[data-ave-tabs="nav"]').forEach(e=>{const n=e.closest("[data-ave-tabs-root]"),r=n?Array.from(n.querySelectorAll("[data-ave-tab-pane]")):[],a=Array.from(e.querySelectorAll("[data-ave-tab-target]"));a.length===0||r.length===0||(Is(a,r,n),a.forEach(i=>{i.addEventListener("click",o=>{o.preventDefault();const s=i.getAttribute("data-ave-tab-target");if(!s)return;const l=r.find(c=>c.matches(s));l&&ui(a,r,i,l,n)})}))})}function ui(t,e,n,r,a){t.forEach(i=>{i.classList.toggle("active",i===n);const o=i.querySelector("a");o&&o.setAttribute("aria-selected",String(i===n))}),e.forEach(i=>{i.classList.toggle("active",i===r)}),xe.emit("tab:activated",{pane:r,tabsRoot:a})}function Is(t,e,n){const r=document.querySelector(".form-field.has-error");if(!r)return;const a=e.find(s=>s.contains(r));if(!a)return;const i=a.getAttribute("id"),o=t.find(s=>s.getAttribute("data-ave-tab-target")===`#${i}`);o&&ui(t,e,o,a,n)}function ks(){document.querySelectorAll(".alert-dismissible .close").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=t.closest(".alert");n&&n.remove()})})}function qs(){document.querySelectorAll("[data-ave-accordion-toggle]").forEach(t=>{const e=t.getAttribute("data-ave-accordion-toggle");if(!e)return;const n=e.startsWith("#")?e:`#${e}`,r=document.querySelector(n);r&&t.addEventListener("click",a=>{a.preventDefault();const o=!(t.getAttribute("aria-expanded")==="true");t.setAttribute("aria-expanded",String(o)),r.classList.toggle("show",o)})})}const Ps=t=>{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();let n=!1;try{n=document.execCommand("copy")}catch{n=!1}return document.body.removeChild(e),n};function Rs(){document.querySelectorAll("[data-ave-copy]").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault();const n=t.getAttribute("data-ave-copy");if(!n)return;const r=document.querySelector(n);if(!r)return;const a=r.value??r.textContent??"";try{await navigator.clipboard.writeText(a),_("success",m("common.copied_to_clipboard"))}catch{Ps(a)?_("success",m("common.copied_to_clipboard")):_("danger",m("common.copy_failed"))}})})}function Ns(){rs(),Os(),ks(),ns(),qs(),Rs()}function Bs(){if(!document.body.classList.contains("ave-login"))return;const t=document.forms[0],e=t?.querySelector('button[type="submit"]'),n=t?.querySelector('[name="email"]'),r=t?.querySelector('[name="password"]');if(!t||!e||!n||!r)return;e.addEventListener("click",i=>{if(t.checkValidity()){const o=e.querySelector(".signingin"),s=e.querySelector(".signin");o&&s&&(o.classList.remove("hidden"),s.classList.add("hidden"))}else i.preventDefault()}),n.focus();const a=document.getElementById("emailGroup");a&&a.classList.add("focused")}function Xs(t){const{title:e,fetchUrl:n,saveUrl:r,fetchParams:a={},onSuccess:i=null,onError:o=null,confirmText:s=m("common.save"),cancelText:l=m("common.cancel"),size:c="default"}=t,u=he({title:m("common.loading"),body:`<div class="spinner">${m("common.loading_form")}</div>`,type:"alert",size:"small"});Hs(n,a).then(({formHtml:d,currentData:f})=>{ke(u);const h=he({title:e,body:d,type:"form",size:c,confirmText:s,cancelText:l,onConfirm:g=>{Ys(g,r,i,o)}});xe.emit("dom:updated",h)}).catch(d=>{ke(u),_("danger",m("common.failed_to_load_form",{error:d.message})),o&&o(d)})}function Hs(t,e={}){const n=document.querySelector('meta[name="csrf-token"]')?.content,r=new URLSearchParams(e).toString(),a=r?`${t}?${r}`:t;return fetch(a,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":n}}).then(i=>{if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return i.json()}).then(i=>{if(!i.success)throw new Error(i.message||"Failed to load form");return{formHtml:i.formHtml||"",currentData:i.currentData||{}}})}function Ys(t,e,n=null,r=null){const a=document.querySelector('meta[name="csrf-token"]')?.content,i=new FormData;t.querySelectorAll("input, textarea, select").forEach(o=>{o.name&&(o.type==="checkbox"?i.append(o.name,o.checked?"1":"0"):o.type==="radio"?o.checked&&i.append(o.name,o.value):i.append(o.name,o.value))}),fetch(e,{method:"POST",headers:{"X-CSRF-TOKEN":a,Accept:"application/json"},body:i}).then(o=>o.ok?o.json():o.json().then(s=>{throw new Error(s.message||`HTTP ${o.status}`)})).then(o=>{if(o.success)_("success",o.message||m("common.saved_successfully")),n&&n(o),ke(t);else throw new Error(o.message||"Save failed")}).catch(o=>{_("danger",m("common.failed_to_save",{error:o.message})),r&&r(o)})}const Ws="[data-ave-action]",sa=document.querySelector('meta[name="csrf-token"]'),$n=sa?sa.content:"";function $s(t){t.dataset.actionLoading="true",t.classList.add("is-loading"),t.setAttribute("aria-busy","true"),(t.tagName==="BUTTON"||t.tagName==="INPUT")&&(t.disabled=!0)}function Fs(t){t.dataset.actionLoading="false",t.classList.remove("is-loading"),t.removeAttribute("aria-busy"),(t.tagName==="BUTTON"||t.tagName==="INPUT")&&(t.disabled=!1)}function js(){nl(),document.addEventListener("click",zs,!0)}function zs(t){const e=t.target.closest(Ws);if(!e||(t.preventDefault(),e.dataset.actionLoading==="true"))return;const n=e.dataset.aveAction,r=e.dataset.actionEndpoint;if(!r){console.warn("Ave action missing endpoint",e);return}if(n==="bulk"&&hi().length===0){_("warning",m("actions.no_selection"));return}const a=Ks(e.dataset.actionConfig),i=e.dataset.actionConfirmMessage,o=async(s={},l={})=>{$s(e);try{await Us(e,r,s,l)}finally{Fs(e)}};if(Array.isArray(a.form)&&a.form.length>0){rl(e,a,o);return}if(e.dataset.actionConfirm==="true"){he({title:a.label||m("actions.confirm"),body:i||m("actions.confirm"),type:"confirm",variant:e.dataset.variant||"primary",confirmText:a.label||m("common.confirm"),onConfirm:()=>o()});return}o()}async function Us(t,e,n={},r={}){const a=t.dataset.aveAction,i=new FormData,o=t.dataset.actionMethod||"POST",s=t.dataset.actionAccept||"application/json";$n&&!i.has("_token")&&i.append("_token",$n),i.append("_action",t.dataset.aveActionKey||""),a==="bulk"&&hi().forEach(d=>i.append("ids[]",d)),a==="form"&&Vs(i,t.dataset.actionFormSelector||"#ave-resource-form"),a==="global"&&new URLSearchParams(window.location.search).forEach((f,h)=>{i.append(h,f)}),Gs(i,n);const l=await fetch(e,{method:o,headers:{"X-Requested-With":"XMLHttpRequest",Accept:s,"X-CSRF-TOKEN":$n},body:i}),c=await Js(l);if(!l.ok){const d=Zs(l,c);throw r&&r.modal&&el(r.modal,c?.errors??{},d),_("danger",d),new Error(d)}if(r&&r.modal&&fi(r.modal),c.modal_form===!0){Xs({title:c.title||"Form",fetchUrl:c.fetch_url,saveUrl:c.save_url,size:c.size||"large",onSuccess:d=>{d.reload&&setTimeout(()=>{window.location.reload()},500)}});return}c.message&&_("success",c.message);const u=c.redirect??null;if(u){window.location.href=u;return}c.reload!==!1&&(window.dispatchEvent(new CustomEvent("ave:action:completed",{detail:{type:a,key:t.dataset.aveActionKey,result:c.result??null}})),setTimeout(()=>{window.location.reload()},500))}function Ks(t){if(!t)return{};try{return JSON.parse(t)}catch(e){return console.warn("Failed to parse action config",e),{}}}function Vs(t,e){const n=document.querySelector(e);if(!n)return;new FormData(n).forEach((a,i)=>{t.append(i,a)})}function Gs(t,e){!e||typeof e!="object"||Object.entries(e).forEach(([n,r])=>{if(r!=null){if(Array.isArray(r)){r.forEach(a=>t.append(`${n}[]`,a));return}t.append(n,r)}})}async function Js(t){const e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():{message:await t.text()}}function Zs(t,e){return t.status===422&&e?.errors?Qs(e.errors):e&&typeof e.message=="string"&&e.message.trim()!==""?e.message:t.statusText||FALLBACK_VALIDATION_MESSAGE}function Qs(t){if(!t||typeof t!="object")return FALLBACK_VALIDATION_MESSAGE;const e=Object.values(t).flatMap(r=>Array.isArray(r)?r:[r]).map(r=>(r??"").toString().trim()).filter(r=>r.length>0);if(e.length===0)return FALLBACK_VALIDATION_MESSAGE;const n=e.slice(0,3);return e.length>n.length&&n.push(` +${e.length-n.length} `),n.join(`
`)}function fi(t){const e=t.querySelector("[data-ave-action-form]");e&&(e.querySelectorAll(".form-error").forEach(n=>n.remove()),e.querySelectorAll(".form-group.has-error").forEach(n=>{n.classList.remove("has-error")}))}function el(t,e={},n=""){const r=t.querySelector("[data-ave-action-form]");if(!r)return;fi(t);const a=Object.entries(e);if(a.length===0){if(n){const o=document.createElement("div");o.className="form-error text-danger small",o.textContent=n,r.prepend(o)}return}a.forEach(([o,s])=>{const l=`[name="${tl(o)}"]`,c=r.querySelectorAll(l);if(c.length===0)return;const d=(Array.isArray(s)?s:[s]).map(f=>(f??"").toString().trim()).filter(Boolean).join(" ")||FALLBACK_VALIDATION_MESSAGE;c.forEach(f=>{const h=f.closest(".form-group")||f.parentElement;if(!h)return;h.classList.add("has-error");const g=document.createElement("div");g.className="form-error text-danger small",g.textContent=d,h.appendChild(g)})});const i=r.querySelector(".form-group.has-error input, .form-group.has-error select, .form-group.has-error textarea");i&&i.focus()}function tl(t){return window.CSS&&typeof window.CSS.escape=="function"?window.CSS.escape(t):t.replace(/([ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\\\$1")}function nl(){const t=document.getElementById("bulk-actions-toolbar"),e=document.getElementById("select-all"),n=Array.from(document.querySelectorAll(".row-selector")),r=document.getElementById("selected-count");if(!t||n.length===0)return;const a=()=>{const i=n.filter(o=>o.checked);if(r&&(r.textContent=i.length),t.classList.toggle("is-visible",i.length>0),e){const o=i.length===n.length;e.checked=o,e.indeterminate=i.length>0&&!o}};e&&e.addEventListener("change",i=>{n.forEach(o=>{o.checked=i.target.checked,Fn(o)}),a()}),n.forEach(i=>{i.addEventListener("change",()=>{Fn(i),a()}),Fn(i)}),a()}function hi(){return Array.from(document.querySelectorAll(".row-selector:checked")).map(t=>t.value)}function Fn(t){const e=t.closest(".resource-row");e&&e.classList.toggle("is-selected",t.checked)}function rl(t,e,n){const r=Array.isArray(e.form)?e.form:[],a=he({title:e.label||m("actions.confirm"),body:al(r),type:"form",variant:t.dataset.variant||"primary",confirmText:e.label||m("common.confirm"),autoClose:!1,onConfirm:async()=>{const i=a.querySelector("[data-ave-action-form]"),o=il(i);try{await n(o,{modal:a}),Be(a)}catch(s){console.warn("Ave action failed",s)}},onCancel:()=>Be(a)});return a}function al(t){return`
        <form data-ave-action-form>
            ${t.map(n=>{const r=n.name||n.key||"";if(!r)return"";const a=n.label||r,i=(n.type||"text").toLowerCase(),o=n.required?"required":"",s=n.placeholder||"",l=n.help?`<small class="help-block">${n.help}</small>`:"";if(i==="textarea")return`
                    <div class="form-group">
                        <label class="control-label">${a}</label>
                        <textarea class="form-control" name="${r}" ${o} placeholder="${s}"></textarea>
                        ${l}
                    </div>
                `;if(i==="select"&&Array.isArray(n.options)){const c=n.options.map(u=>`<option value="${u.value}">${u.label}</option>`).join("");return`
                    <div class="form-group">
                        <label class="control-label">${a}</label>
                        <select class="form-control" name="${r}" ${o}>
                            ${c}
                        </select>
                        ${l}
                    </div>
                `}return i==="checkbox"?`
                    <div class="form-group">
                        <label class="control-label">
                            <input type="checkbox" name="${r}" value="1" />
                            ${a}
                        </label>
                        ${l}
                    </div>
                `:`
                <div class="form-group">
                    <label class="control-label">${a}</label>
                    <input type="${i}" class="form-control" name="${r}" ${o} placeholder="${s}" />
                    ${l}
                </div>
            `}).join("")}
        </form>
    `}function il(t){if(!t)return{};const e=new FormData(t),n={};return e.forEach((r,a)=>{n[a]!==void 0?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(r)):n[a]=r}),n}const la=document.querySelector('meta[name="csrf-token"]'),ol=la?la.content:"";let ca=!1;function sl(){da(),window.Ave?.events&&!window.Ave.inlineEditingBound&&(window.Ave.events.on("dom:updated",da),window.Ave.inlineEditingBound=!0)}function da(){ca||(document.addEventListener("click",ll,!0),ca=!0)}function ll(t){const e=t.target.closest("[data-ave-inline-toggle]");if(!e||(t.preventDefault(),e.dataset.loading==="true"))return;const n=e.dataset.endpoint,r=e.dataset.field;if(!n||!r){console.warn("Inline toggle missing endpoint or field",e);return}const a=e.dataset.trueValue??"1",i=e.dataset.falseValue??"0",s=(e.dataset.currentValue??i)===String(a)?i:a;ua(e,!0),cl(n,r,s).then(l=>{const c=l.canonical??l.value,u=String(c)===String(a);e.dataset.currentValue=String(c),e.classList.toggle("is-on",u),e.classList.toggle("is-off",!u);const d=e.querySelector(".toggle-dot"),f=u?e.dataset.onColor||"#16a34a":e.dataset.offColor||"#d1d5db";d&&(d.style.backgroundColor=f),_("success",m("inline.saved"))}).catch(l=>{console.error("Inline toggle failed",l),_("danger",l.message||m("inline.error"))}).finally(()=>ua(e,!1))}async function cl(t,e,n){const r=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":ol,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({field:e,value:n})});if(!r.ok){const a=await r.json().catch(()=>({}));throw new Error(a.message||m("common.error"))}return r.json()}function ua(t,e){t.dataset.loading=e?"true":"false",t.classList.toggle("is-loading",e),t.setAttribute("aria-busy",e?"true":"false")}function dl(){ul(),fl()}function ul(){document.querySelectorAll(".per-page-select").forEach(e=>{e.addEventListener("change",function(){const n=parseInt(this.value,10);if(!n||n<1)return;const r=new URL(window.location.href);r.searchParams.set("per_page",n.toString()),r.searchParams.delete("page"),window.location.href=r.toString()})})}function fl(){document.querySelectorAll(".pagination-jump-input").forEach(e=>{e.addEventListener("keypress",function(n){n.key==="Enter"&&(n.preventDefault(),hl(this))}),e.addEventListener("blur",function(){const n=dr();(this.value===""||parseInt(this.value,10)<1)&&(this.value=n)})})}function hl(t){const e=parseInt(t.value,10),n=parseInt(t.dataset.lastPage,10),r=t.dataset.baseUrl;if(!e||e<1||e>n){t.value=dr();return}if(e===dr())return;const a=new URL(window.location.href);new URL(r,window.location.origin),e===1?a.searchParams.delete("page"):a.searchParams.set("page",e),window.location.href=a.toString()}function dr(){const t=new URLSearchParams(window.location.search);return parseInt(t.get("page")||"1",10)}const fa=document.querySelector('meta[name="csrf-token"]'),pl=fa?fa.content:"";function ml(t=document){t.querySelectorAll('[data-tree="true"]').forEach(e=>{gl(e)})}function gl(t){const e=t.dataset.slug,n=t.dataset.parentColumn,r=t.dataset.orderColumn,a=parseInt(t.dataset.maxDepth||"5"),i=t.dataset.updateEndpoint;vl(t),pi(t,a,e,n,r,i)}function vl(t){const e=document.querySelector(".tree-expand-all"),n=document.querySelector(".tree-collapse-all");e&&e.addEventListener("click",()=>{t.querySelectorAll(".tree-list").forEach(r=>{r.style.display=""}),t.querySelectorAll('[data-action="collapse"]').forEach(r=>{r.classList.remove("hidden")}),t.querySelectorAll('[data-action="expand"]').forEach(r=>{r.classList.add("hidden")})}),n&&n.addEventListener("click",()=>{t.querySelectorAll(".tree-item > .tree-list").forEach(r=>{r.style.display="none"}),t.querySelectorAll('[data-action="collapse"]').forEach(r=>{r.classList.add("hidden")}),t.querySelectorAll('[data-action="expand"]').forEach(r=>{r.classList.remove("hidden")})}),t.querySelectorAll(".dd-item-btns button").forEach(r=>{r.addEventListener("click",a=>{a.preventDefault();const i=r.dataset.action,o=r.closest(".tree-item"),s=o.querySelector(":scope > .tree-list");s&&(i==="collapse"?(s.style.display="none",r.classList.add("hidden"),o.querySelector('[data-action="expand"]')?.classList.remove("hidden")):(s.style.display="",r.classList.add("hidden"),o.querySelector('[data-action="collapse"]')?.classList.remove("hidden")))})})}let ha=new Map;function pi(t,e,n,r,a,i){t.querySelectorAll(".tree-list").forEach(s=>{if(ha.has(s))return;const l=O.create(s,{group:{name:"tree-nested",pull:!0,put:!0},animation:gn.SORTABLE,easing:Er.SORTABLE,handle:".tree-drag-handle",fallbackOnBody:!0,swapThreshold:5,direction:"vertical",emptyInsertThreshold:1,ghostClass:"sortable-ghost",dragClass:"sortable-drag",onMove:c=>{const u=c.dragged,d=c.to,f=bl(d),h=mi(u);if(f+h>e)return!1},onEnd:c=>{yl(t),setTimeout(()=>{pi(t,e,n,r,a,i)},50),El(t,n,r,a,i)}});ha.set(s,l)})}function yl(t){t.querySelectorAll(".tree-item").forEach(e=>{const n=e.querySelector(":scope > .tree-list"),r=e.querySelector(".dd-item-btns");if(n&&n.querySelectorAll(":scope > .tree-item").length>0)if(n&&n.classList.remove("tree-list-empty"),r)r.style.display="";else{const i=e.querySelector(".dd-handle");if(i){const o=document.createElement("div");o.className="dd-item-btns",o.innerHTML=`
                        <button type="button" data-action="expand" class="hidden" aria-label="Expand">
                            <i class="voyager-angle-down"></i>
                        </button>
                        <button type="button" data-action="collapse" aria-label="Collapse">
                            <i class="voyager-angle-up"></i>
                        </button>
                    `,i.insertBefore(o,i.querySelector(".dd-content")),o.querySelectorAll("button").forEach(s=>{s.addEventListener("click",l=>{l.preventDefault();const c=s.dataset.action,u=s.closest(".tree-item"),d=u.querySelector(":scope > .tree-list");d&&(c==="collapse"?(d.style.display="none",s.classList.add("hidden"),u.querySelector('[data-action="expand"]')?.classList.remove("hidden")):(d.style.display="",s.classList.add("hidden"),u.querySelector('[data-action="collapse"]')?.classList.remove("hidden")))})})}}else n&&n.classList.add("tree-list-empty"),r&&(r.style.display="none")})}function bl(t){let e=0,n=t;for(;n&&!n.matches('[data-tree="true"]');)n.matches(".tree-list")&&e++,n=n.parentElement;return e}function mi(t){let e=1;const n=t.querySelector(":scope > .tree-list");return n&&n.querySelectorAll(":scope > .tree-item").forEach(a=>{const i=mi(a);e=Math.max(e,1+i)}),e}function wl(t){const e=t.querySelector(":scope > .tree-list");return e?gi(e):[]}function gi(t){const e=[];return t.querySelectorAll(":scope > .tree-item").forEach(r=>{const a=parseInt(r.dataset.id),i=r.querySelector(":scope > .tree-list"),o={id:a};if(i){const s=gi(i);s.length>0&&(o.children=s)}e.push(o)}),e}function El(t,e,n,r,a){const i=wl(t);fetch(a,{method:"POST",headers:{"X-CSRF-TOKEN":pl,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tree:i,parent_column:n,order_column:r})}).then(o=>o.json()).then(o=>{o.success?_("success",o.message||m("tree.updated")):_("danger",o.message||m("tree.update_failed"))}).catch(o=>{console.error("Tree update error:",o),_("danger",m("tree.structure_update_failed"))})}const pa=document.querySelector('meta[name="csrf-token"]'),Sl=pa?pa.content:"";function Tl(t=document){t.querySelectorAll('[data-sortable="true"]').forEach(e=>{xl(e)})}function xl(t){const e=t.dataset.slug,n=t.dataset.orderColumn||"order",r=t.dataset.updateEndpoint;if(t.sortableInstance)return;const a=O.create(t,{animation:150,handle:".sortable-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",onStart:function(i){console.log("Drag started:",i.item)},onEnd:function(i){console.log("Drag ended. Old index:",i.oldIndex,"New index:",i.newIndex),i.oldIndex!==i.newIndex&&_l(t,e,n,r)}});t.sortableInstance=a}function Al(t,e){const n=t.querySelectorAll("tr[data-id]"),r=[];return n.forEach((a,i)=>{const o=parseInt(a.dataset.id);r.push({id:o,[e]:i})}),r}function _l(t,e,n,r){const a=Al(t,n);fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":Sl,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({items:a})}).then(i=>i.json()).then(i=>{i.success?_("success",i.message||m("sortable.order_updated")):(_("danger",i.message||m("sortable.order_update_failed")),window.location.reload())}).catch(i=>{console.error("Sortable table update error:",i),_("danger",m("sortable.table_order_failed")),setTimeout(()=>window.location.reload(),1500)})}async function vi(t,e){const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||"Request failed")}return n.json()}function Ll(){const t=document.querySelectorAll("tbody.group-items-tbody[data-group-id]");t.length!==0&&t.forEach(e=>{const n={slug:e.dataset.slug,groupId:e.dataset.groupId,groupColumn:e.dataset.groupColumn,orderColumn:e.dataset.orderColumn,updateEndpoint:e.dataset.updateEndpoint,groupUpdateEndpoint:e.dataset.groupUpdateEndpoint};O.create(e,{animation:150,handle:".sortable-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",group:{name:"shared-groups",pull:!0,put:!0},onEnd:r=>Cl(r,n)})})}function Cl(t,e){const n=t.item.dataset.id,r=t.to,a=t.from,i=r.dataset.groupId,o=a.dataset.groupId;i!==o?Dl(n,r,a,i,o,e,t):t.oldIndex!==t.newIndex&&Ml(r,i,e)}function Dl(t,e,n,r,a,i,o){Ol(t,r,i.groupColumn,i.groupUpdateEndpoint).then(()=>ur(e,r,i.orderColumn,i.updateEndpoint)).then(()=>{if(n.querySelectorAll(".sortable-row").length>0)return ur(n,a,i.orderColumn,i.updateEndpoint)}).then(()=>{_("success",m("sortable.item_moved"))}).catch(s=>{console.error("Error updating groups:",s),_("danger",m("sortable.item_move_error")),n.insertBefore(o.item,n.children[o.oldIndex])})}function Ml(t,e,n){ur(t,e,n.orderColumn,n.updateEndpoint).then(()=>{_("success",m("sortable.order_updated"))}).catch(r=>{console.error("Error saving order:",r),_("danger",m("sortable.order_error"))})}async function Ol(t,e,n,r){return vi(r,{item_id:t,group_column:n,group_id:e})}async function ur(t,e,n,r){const a=t.querySelectorAll(".sortable-row"),i={};return a.forEach((o,s)=>{i[o.dataset.id]=s+1}),vi(r,{order:i,order_column:n,group_id:e})}function Il(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function kl(t){t.hasAttribute("required")&&(t.dataset.hadRequired="true",t.removeAttribute("required")),t.hasAttribute("minlength")&&(t.dataset.hadMinlength=t.getAttribute("minlength"),t.removeAttribute("minlength")),t.hasAttribute("maxlength")&&(t.dataset.hadMaxlength=t.getAttribute("maxlength"),t.removeAttribute("maxlength")),t.hasAttribute("pattern")&&(t.dataset.hadPattern=t.getAttribute("pattern"),t.removeAttribute("pattern")),t.hasAttribute("min")&&(t.dataset.hadMin=t.getAttribute("min"),t.removeAttribute("min")),t.hasAttribute("max")&&(t.dataset.hadMax=t.getAttribute("max"),t.removeAttribute("max")),t.hasAttribute("step")&&(t.dataset.hadStep=t.getAttribute("step"),t.removeAttribute("step"))}function ql(){jn(),new MutationObserver(()=>{jn()}).observe(document.documentElement,{attributes:!0,attributeFilter:["style","class"],subtree:!0,characterData:!1}),document.addEventListener("submit",e=>{const n=e.target;n&&n.tagName==="FORM"&&jn(n)})}function jn(t=document){const e=t.querySelectorAll("input[required], input[minlength], input[maxlength], input[pattern], input[min], input[max], input[step], textarea[required], textarea[minlength], textarea[maxlength], textarea[pattern], select[required]");Array.from(e).forEach(n=>{Il(n)||kl(n)})}function Pl(){const t=document.querySelector('meta[name="ave-route-prefix"]')?.getAttribute("content")||"admin";document.querySelectorAll('a[href^="#cache-clear-"]').forEach(e=>{e.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation();const r=e.getAttribute("href").replace("#cache-clear-","");try{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),o=await(await fetch(`/${t}/cache/clear/${r}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json"}})).json();o.success?_("success",o.message):_("danger",o.message||m("cache.error"))}catch(a){console.error("Cache clear error:",a),_("danger",m("cache.error"))}})})}let Sr="",st={},ce=null;function Rl(){if(!document.getElementById("fm-file-list"))return;const e=document.getElementById("fm-routes");e&&(st={list:e.dataset.list,read:e.dataset.read,save:e.dataset.save,directory:e.dataset.directory,upload:e.dataset.upload,delete:e.dataset.delete,rename:e.dataset.rename});const n=document.getElementById("fm-current-path-input");n&&(Sr=n.value),Nl(),Bl()}function Nl(){document.addEventListener("click",async t=>{const e=t.target.closest(".fm-navigate");if(!e)return;t.preventDefault();const n=e.dataset.fmPath??"";await Xl(n)})}function Bl(){document.addEventListener("click",async n=>{const r=n.target.closest(".fm-edit");if(!r)return;n.preventDefault();const a=r.dataset.fmPath;await Hl(a)}),document.addEventListener("click",async n=>{const r=n.target.closest(".fm-delete");if(!r)return;n.preventDefault();const a=r.dataset.fmPath;await zl(a)}),document.addEventListener("click",n=>{const r=n.target.closest(".fm-rename-btn");if(!r)return;n.preventDefault();const a=r.dataset.fmPath,i=r.dataset.fmName;Kl(a,i)});const t=document.getElementById("fm-upload-btn");t&&t.addEventListener("click",Fl);const e=document.getElementById("fm-new-folder-btn");e&&e.addEventListener("click",Wl)}async function Xl(t){window.location.href=`${window.location.pathname}?path=${encodeURIComponent(t)}`}async function Hl(t){try{const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),r=await(await fetch(`${st.read}?path=${encodeURIComponent(t)}`,{headers:{Accept:"application/json","X-CSRF-TOKEN":e}})).json();if(r.error){_("danger",r.error);return}ce=he({title:r.name,body:`<div class="form-group">
                <textarea id="fm-editor-content" class="form-control" rows="20" style="font-family: monospace; width: 100%;">${yi(r.content)}</textarea>
            </div>`,type:"form",size:"large",confirmText:m("common.save"),cancelText:m("common.cancel"),autoClose:!1,onConfirm:async a=>{const i=a.querySelector("#fm-editor-content").value;await Yl(t,i)}})}catch(e){console.error("Read error:",e),_("danger",m("file_manager.error"))}}async function Yl(t,e){try{const n=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),a=await(await fetch(st.save,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n},body:JSON.stringify({path:t,content:e})})).json();a.success?(_("success",m("file_manager.file_saved")),ce&&(Be(ce),ce=null)):_("danger",a.error||m("file_manager.error"))}catch(n){console.error("Save error:",n),_("danger",m("file_manager.error"))}}function Wl(){ce=he({title:m("file_manager.new_folder"),body:`<div class="form-group">
            <label>${m("file_manager.folder_name")}</label>
            <input type="text" class="form-control" id="fm-folder-name" placeholder="${m("file_manager.folder_name_placeholder")}">
        </div>`,type:"form",confirmText:m("common.create"),cancelText:m("common.cancel"),autoClose:!1,onConfirm:async t=>{const e=t.querySelector("#fm-folder-name").value.trim();e&&await $l(e)}})}async function $l(t){try{const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),r=await(await fetch(st.directory,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":e},body:JSON.stringify({path:Sr,name:t})})).json();r.success?(_("success",m("file_manager.folder_created")),ce&&(Be(ce),ce=null),window.location.reload()):_("danger",r.error||m("file_manager.error"))}catch(e){console.error("Create folder error:",e),_("danger",m("file_manager.error"))}}function Fl(){ce=he({title:m("file_manager.upload_file"),body:`<div class="form-group">
            <input type="file" class="form-control" id="fm-upload-input">
        </div>`,type:"form",confirmText:m("file_manager.upload"),cancelText:m("common.cancel"),autoClose:!1,onConfirm:async t=>{const e=t.querySelector("#fm-upload-input");e&&e.files.length&&await jl(e.files[0])}})}async function jl(t){const e=new FormData;e.append("path",Sr),e.append("file",t);try{const n=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),a=await(await fetch(st.upload,{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":n},body:e})).json();a.success?(_("success",m("file_manager.file_uploaded")),ce&&(Be(ce),ce=null),window.location.reload()):_("danger",a.error||m("file_manager.error"))}catch(n){console.error("Upload error:",n),_("danger",m("file_manager.error"))}}async function zl(t){ce=he({title:m("modals.delete_confirm"),body:m("file_manager.confirm_delete"),type:"confirm",variant:"warning",confirmText:m("common.delete"),cancelText:m("common.cancel"),onConfirm:async()=>{await Ul(t)}})}async function Ul(t){try{const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),r=await(await fetch(st.delete,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":e},body:JSON.stringify({path:t})})).json();r.success?(_("success",m("file_manager.deleted")),window.location.reload()):_("danger",r.error||m("file_manager.error"))}catch(e){console.error("Delete error:",e),_("danger",m("file_manager.error"))}}function Kl(t,e){ce=he({title:m("file_manager.rename"),body:`<div class="form-group">
            <label>${m("file_manager.new_name")}</label>
            <input type="text" class="form-control" id="fm-rename-input" value="${yi(e)}">
        </div>`,type:"form",confirmText:m("common.save"),cancelText:m("common.cancel"),autoClose:!1,onConfirm:async n=>{const r=n.querySelector("#fm-rename-input").value.trim();r&&await Vl(t,r)}})}async function Vl(t,e){try{const n=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),a=await(await fetch(st.rename,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n},body:JSON.stringify({path:t,name:e})})).json();a.success?(_("success",m("file_manager.renamed")),ce&&(Be(ce),ce=null),window.location.reload()):_("danger",a.error||m("file_manager.error"))}catch(n){console.error("Rename error:",n),_("danger",m("file_manager.error"))}}function yi(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}window.aveEvents=xe;window.Ave=window.Ave||{};window.Ave.events=xe;document.addEventListener("DOMContentLoaded",()=>{ql(),Ss(),Bi(),Xi(),Ns(),Ms(),Bs(),js(),sl(),dl(),Ll(),ml(),Tl(),Pl(),Rl(),xe.emit("dom:updated",document);const t={confirm:Ht,createModal:he,closeModal:ke,destroyModal:Be};xe.emit("ave:loaded",t),window.Ave=window.Ave||{},Object.assign(window.Ave,t)});window.addEventListener("load",()=>{const t=document.getElementById("ave-loader");t&&setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},300)},200)});
