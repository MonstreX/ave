class Ea{constructor(){this.listeners={}}on(t,i){typeof t=="string"&&(t=[t]),t.forEach(r=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)})}once(t,i){typeof t=="string"&&(t=[t]);const r=(...a)=>{i(...a),this.off(t,r)};this.on(t,r)}off(t,i){typeof t=="string"&&(t=[t]),t.forEach(r=>{this.listeners[r]&&(this.listeners[r]=this.listeners[r].filter(a=>a!==i))})}emit(t,i){this.listeners[t]&&this.listeners[t].forEach(r=>{try{r(i)}catch(a){console.error(`Error in event listener for '${t}':`,a)}})}listeners(t){return this.listeners[t]||[]}hasListeners(t){return(this.listeners[t]||[]).length>0}flush(t){t?this.listeners[t]=[]:this.listeners={}}}const ne=new Ea;/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Dt(e){return getComputedStyle(e)}function pt(e,t){for(var i in t){var r=t[i];typeof r=="number"&&(r=r+"px"),e.style[i]=r}return e}function Ne(e){var t=document.createElement("div");return t.className=e,t}var Fi=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Rt(e,t){if(!Fi)throw new Error("No element matching method supported");return Fi.call(e,t)}function Jt(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function ji(e,t){return Array.prototype.filter.call(e.children,function(i){return Rt(i,t)})}var it={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},Cr={x:null,y:null};function Ar(e,t){var i=e.element.classList,r=it.state.scrolling(t);i.contains(r)?clearTimeout(Cr[t]):i.add(r)}function Lr(e,t){Cr[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(it.state.scrolling(t))},e.settings.scrollingThreshold)}function Sa(e,t){Ar(e,t),Lr(e,t)}var Ce=function(t){this.element=t,this.handlers={}},Mr={isEmpty:{configurable:!0}};Ce.prototype.bind=function(t,i){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(i),this.element.addEventListener(t,i,!1)};Ce.prototype.unbind=function(t,i){var r=this;this.handlers[t]=this.handlers[t].filter(function(a){return i&&a!==i?!0:(r.element.removeEventListener(t,a,!1),!1)})};Ce.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};Mr.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(Ce.prototype,Mr);var oe=function(){this.eventElements=[]};oe.prototype.eventElement=function(t){var i=this.eventElements.filter(function(r){return r.element===t})[0];return i||(i=new Ce(t),this.eventElements.push(i)),i};oe.prototype.bind=function(t,i,r){this.eventElement(t).bind(i,r)};oe.prototype.unbind=function(t,i,r){var a=this.eventElement(t);a.unbind(i,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};oe.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};oe.prototype.once=function(t,i,r){var a=this.eventElement(t),n=function(o){a.unbind(i,n),r(o)};a.bind(i,n)};function ke(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function Ue(e,t,i,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var n;if(t==="top")n=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")n=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");xa(e,i,n,r,a)}function xa(e,t,i,r,a){var n=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=e.element;e.reach[l]=null,d[s]<1&&(e.reach[l]="start"),d[s]>e[n]-e[o]-1&&(e.reach[l]="end"),t&&(d.dispatchEvent(ke("ps-scroll-"+l)),t<0?d.dispatchEvent(ke("ps-scroll-"+c)):t>0&&d.dispatchEvent(ke("ps-scroll-"+u)),r&&Sa(e,l)),e.reach[l]&&(t||a)&&d.dispatchEvent(ke("ps-"+l+"-reach-"+e.reach[l]))}function Q(e){return parseInt(e,10)||0}function Da(e){return Rt(e,"input,[contenteditable]")||Rt(e,"select,[contenteditable]")||Rt(e,"textarea,[contenteditable]")||Rt(e,"button,[contenteditable]")}function Ta(e){var t=Dt(e);return Q(t.width)+Q(t.paddingLeft)+Q(t.paddingRight)+Q(t.borderLeftWidth)+Q(t.borderRightWidth)}var Gt={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function _t(e){var t=e.element,i=Math.floor(t.scrollTop),r=t.getBoundingClientRect();e.containerWidth=Math.floor(r.width),e.containerHeight=Math.floor(r.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(ji(t,it.element.rail("x")).forEach(function(a){return Jt(a)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(ji(t,it.element.rail("y")).forEach(function(a){return Jt(a)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=Ui(e,Q(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=Q((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=Ui(e,Q(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=Q(i*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),Ca(t,e),e.scrollbarXActive?t.classList.add(it.state.active("x")):(t.classList.remove(it.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(it.state.active("y")):(t.classList.remove(it.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function Ui(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function Ca(e,t){var i={width:t.railXWidth},r=Math.floor(e.scrollTop);t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:i.left=e.scrollLeft,t.isScrollbarXUsingBottom?i.bottom=t.scrollbarXBottom-r:i.top=t.scrollbarXTop+r,pt(t.scrollbarXRail,i);var a={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,pt(t.scrollbarYRail,a),pt(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),pt(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function Aa(e){e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var i=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,r=i>e.scrollbarYTop?1:-1;e.element.scrollTop+=r*e.containerHeight,_t(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var i=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,r=i>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=r*e.containerWidth,_t(e),t.stopPropagation()})}var Pe=null;function La(e){Ki(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),Ki(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function Ki(e,t){var i=t[0],r=t[1],a=t[2],n=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=e.element,h=null,p=null,m=null;function g(w){w.touches&&w.touches[0]&&(w[a]=w.touches[0]["page"+c.toUpperCase()]),Pe===o&&(d[l]=h+m*(w[a]-p),Ar(e,c),_t(e),w.stopPropagation(),w.preventDefault())}function y(){Lr(e,c),e[u].classList.remove(it.state.clicking),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y),Pe=null}function D(w){Pe===null&&(Pe=o,h=d[l],w.touches&&(w[a]=w.touches[0]["page"+c.toUpperCase()]),p=w[a],m=(e[r]-e[i])/(e[n]-e[s]),w.touches?(document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",y)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)),e[u].classList.add(it.state.clicking)),w.stopPropagation(),w.cancelable&&w.preventDefault()}e[o].addEventListener("mousedown",D),e[o].addEventListener("touchstart",D)}function Ma(e){var t=e.element,i=function(){return Rt(t,":hover")},r=function(){return Rt(e.scrollbarX,":focus")||Rt(e.scrollbarY,":focus")};function a(n,o){var s=Math.floor(t.scrollTop);if(n===0){if(!e.scrollbarYActive)return!1;if(s===0&&o>0||s>=e.contentHeight-e.containerHeight&&o<0)return!e.settings.wheelPropagation}var l=t.scrollLeft;if(o===0){if(!e.scrollbarXActive)return!1;if(l===0&&n<0||l>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&!(!i()&&!r())){var o=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(Da(o))return}var s=0,l=0;switch(n.which){case 37:n.metaKey?s=-e.contentWidth:n.altKey?s=-e.containerWidth:s=-30;break;case 38:n.metaKey?l=e.contentHeight:n.altKey?l=e.containerHeight:l=30;break;case 39:n.metaKey?s=e.contentWidth:n.altKey?s=e.containerWidth:s=30;break;case 40:n.metaKey?l=-e.contentHeight:n.altKey?l=-e.containerHeight:l=-30;break;case 32:n.shiftKey?l=e.containerHeight:l=-e.containerHeight;break;case 33:l=e.containerHeight;break;case 34:l=-e.containerHeight;break;case 36:l=e.contentHeight;break;case 35:l=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&s!==0||e.settings.suppressScrollY&&l!==0||(t.scrollTop-=l,t.scrollLeft+=s,_t(e),a(s,l)&&n.preventDefault())}})}function _a(e){var t=e.element;function i(o,s){var l=Math.floor(t.scrollTop),c=t.scrollTop===0,u=l+t.offsetHeight===t.scrollHeight,d=t.scrollLeft===0,h=t.scrollLeft+t.offsetWidth===t.scrollWidth,p;return Math.abs(s)>Math.abs(o)?p=c||u:p=d||h,p?!e.settings.wheelPropagation:!0}function r(o){var s=o.deltaX,l=-1*o.deltaY;return(typeof s>"u"||typeof l>"u")&&(s=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(s*=10,l*=10),s!==s&&l!==l&&(s=0,l=o.wheelDelta),o.shiftKey?[-l,-s]:[s,l]}function a(o,s,l){if(!Gt.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(o))return!1;for(var c=o;c&&c!==t;){if(c.classList.contains(it.element.consuming))return!0;var u=Dt(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(s&&u.overflowX.match(/(scroll|auto)/)){var h=c.scrollWidth-c.clientWidth;if(h>0&&(c.scrollLeft>0&&s<0||c.scrollLeft<h&&s>0))return!0}c=c.parentNode}return!1}function n(o){var s=r(o),l=s[0],c=s[1];if(!a(o.target,l,c)){var u=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(c?t.scrollTop-=c*e.settings.wheelSpeed:t.scrollTop+=l*e.settings.wheelSpeed,u=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(l?t.scrollLeft+=l*e.settings.wheelSpeed:t.scrollLeft-=c*e.settings.wheelSpeed,u=!0):(t.scrollTop-=c*e.settings.wheelSpeed,t.scrollLeft+=l*e.settings.wheelSpeed),_t(e),u=u||i(l,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",n):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",n)}function Oa(e){if(!Gt.supportsTouch&&!Gt.supportsIePointer)return;var t=e.element,i={startOffset:{},startTime:0,speed:{},easingLoop:null};function r(d,h){var p=Math.floor(t.scrollTop),m=t.scrollLeft,g=Math.abs(d),y=Math.abs(h);if(y>g){if(h<0&&p===e.contentHeight-e.containerHeight||h>0&&p===0)return window.scrollY===0&&h>0&&Gt.isChrome}else if(g>y&&(d<0&&m===e.contentWidth-e.containerWidth||d>0&&m===0))return!0;return!0}function a(d,h){t.scrollTop-=h,t.scrollLeft-=d,_t(e)}function n(d){return d.targetTouches?d.targetTouches[0]:d}function o(d){return d.target===e.scrollbarX||d.target===e.scrollbarY||d.pointerType&&d.pointerType==="pen"&&d.buttons===0?!1:!!(d.targetTouches&&d.targetTouches.length===1||d.pointerType&&d.pointerType!=="mouse"&&d.pointerType!==d.MSPOINTER_TYPE_MOUSE)}function s(d){if(o(d)){var h=n(d);i.startOffset.pageX=h.pageX,i.startOffset.pageY=h.pageY,i.startTime=new Date().getTime(),i.easingLoop!==null&&clearInterval(i.easingLoop)}}function l(d,h,p){if(!t.contains(d))return!1;for(var m=d;m&&m!==t;){if(m.classList.contains(it.element.consuming))return!0;var g=Dt(m);if(p&&g.overflowY.match(/(scroll|auto)/)){var y=m.scrollHeight-m.clientHeight;if(y>0&&(m.scrollTop>0&&p<0||m.scrollTop<y&&p>0))return!0}if(h&&g.overflowX.match(/(scroll|auto)/)){var D=m.scrollWidth-m.clientWidth;if(D>0&&(m.scrollLeft>0&&h<0||m.scrollLeft<D&&h>0))return!0}m=m.parentNode}return!1}function c(d){if(o(d)){var h=n(d),p={pageX:h.pageX,pageY:h.pageY},m=p.pageX-i.startOffset.pageX,g=p.pageY-i.startOffset.pageY;if(l(d.target,m,g))return;a(m,g),i.startOffset=p;var y=new Date().getTime(),D=y-i.startTime;D>0&&(i.speed.x=m/D,i.speed.y=g/D,i.startTime=y),r(m,g)&&d.cancelable&&d.preventDefault()}}function u(){e.settings.swipeEasing&&(clearInterval(i.easingLoop),i.easingLoop=setInterval(function(){if(e.isInitialized){clearInterval(i.easingLoop);return}if(!i.speed.x&&!i.speed.y){clearInterval(i.easingLoop);return}if(Math.abs(i.speed.x)<.01&&Math.abs(i.speed.y)<.01){clearInterval(i.easingLoop);return}a(i.speed.x*30,i.speed.y*30),i.speed.x*=.8,i.speed.y*=.8},10))}Gt.supportsTouch?(e.event.bind(t,"touchstart",s),e.event.bind(t,"touchmove",c),e.event.bind(t,"touchend",u)):Gt.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",s),e.event.bind(t,"pointermove",c),e.event.bind(t,"pointerup",u)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",s),e.event.bind(t,"MSPointerMove",c),e.event.bind(t,"MSPointerUp",u)))}var Ia=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Na={"click-rail":Aa,"drag-thumb":La,keyboard:Ma,wheel:_a,touch:Oa},Ae=function(t,i){var r=this;if(i===void 0&&(i={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(it.main),this.settings=Ia();for(var a in i)this.settings[a]=i[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var n=function(){return t.classList.add(it.state.focus)},o=function(){return t.classList.remove(it.state.focus)};this.isRtl=Dt(t).direction==="rtl",this.isRtl===!0&&t.classList.add(it.rtl),this.isNegativeScroll=(function(){var c=t.scrollLeft,u=null;return t.scrollLeft=-1,u=t.scrollLeft<0,t.scrollLeft=c,u})(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new oe,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=Ne(it.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=Ne(it.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",n),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var s=Dt(this.scrollbarXRail);this.scrollbarXBottom=parseInt(s.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Q(s.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Q(s.borderLeftWidth)+Q(s.borderRightWidth),pt(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Q(s.marginLeft)+Q(s.marginRight),pt(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Ne(it.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=Ne(it.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",n),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=Dt(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Q(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Ta(this.scrollbarY):null,this.railBorderYWidth=Q(l.borderTopWidth)+Q(l.borderBottomWidth),pt(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Q(l.marginTop)+Q(l.marginBottom),pt(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return Na[c](r)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(c){return r.onScroll(c)}),_t(this)};Ae.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,pt(this.scrollbarXRail,{display:"block"}),pt(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Q(Dt(this.scrollbarXRail).marginLeft)+Q(Dt(this.scrollbarXRail).marginRight),this.railYMarginHeight=Q(Dt(this.scrollbarYRail).marginTop)+Q(Dt(this.scrollbarYRail).marginBottom),pt(this.scrollbarXRail,{display:"none"}),pt(this.scrollbarYRail,{display:"none"}),_t(this),Ue(this,"top",0,!1,!0),Ue(this,"left",0,!1,!0),pt(this.scrollbarXRail,{display:""}),pt(this.scrollbarYRail,{display:""}))};Ae.prototype.onScroll=function(t){this.isAlive&&(_t(this),Ue(this,"top",this.element.scrollTop-this.lastScrollTop),Ue(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Ae.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Jt(this.scrollbarX),Jt(this.scrollbarY),Jt(this.scrollbarXRail),Jt(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Ae.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const oi="ave.stickySidebar",Gi=()=>{try{return window.localStorage}catch{return null}},ka=(e,t)=>{const i=e.map(r=>({element:r,transition:r?.style.transition,webkit:r?.style.WebkitTransition,moz:r?.style.MozTransition}));i.forEach(({element:r})=>{r&&(r.style.WebkitTransition="none",r.style.MozTransition="none",r.style.transition="none")}),t(),i.forEach(({element:r,transition:a,webkit:n,moz:o})=>{r&&(r.style.WebkitTransition=n||"",r.style.MozTransition=o||"",r.style.transition=a||"")})};function Pa(){const e=document.querySelector(".app"),t=document.querySelector(".side-menu"),i=document.querySelector(".ave-navbar"),r=document.getElementById("ave-loader"),a=document.querySelector(".hamburger"),n=document.querySelector(".fadetoblack"),o=t?.querySelector('[data-ave-menu="container"]')||document.querySelector(".ave-sidebar__menu");if(!e||!t||!i||!a)return;let s=null;const l=()=>{s&&window.requestAnimationFrame(()=>{s?.update()})},c=p=>{const m=Gi();if(m){if(p){m.setItem(oi,"true");return}m.removeItem(oi)}},u=(p,m={suppressPersist:!1})=>{e.classList.toggle("expanded",p),a.classList.toggle("is-active",p),m.suppressPersist||c(p),l()};ka([t,e,i],()=>{if(!(window.innerWidth>768&&Gi()?.getItem(oi)==="true")){u(!1,{suppressPersist:!0});return}e.classList.add("expanded","no-animation"),a.classList.add("is-active","no-animation"),r&&(r.style.left=`${t.clientWidth/2}px`)}),n&&n.addEventListener("click",()=>{u(!1)}),a.addEventListener("click",p=>{p.preventDefault();const m=!e.classList.contains("expanded");u(m)}),o&&(s=new Ae(o,{wheelPropagation:!1,suppressScrollX:!0}),window.addEventListener("resize",()=>{l()},{passive:!0}));const d=document.querySelectorAll(".ave-sidebar__toggle"),h=(p,m)=>{if(!p)return;if(p.removeAttribute("data-ave-animating"),m){p.classList.add("ave-sidebar__submenu--open"),p.style.maxHeight="0px",requestAnimationFrame(()=>{const w=p.scrollHeight;p.style.maxHeight=`${w}px`,l()});const D=w=>{w.propertyName==="max-height"&&(p.style.maxHeight="none",p.removeEventListener("transitionend",D),l())};p.addEventListener("transitionend",D);return}const g=p.scrollHeight;p.style.maxHeight=`${g}px`,requestAnimationFrame(()=>{p.classList.remove("ave-sidebar__submenu--open"),p.style.maxHeight="0px",l()});const y=D=>{D.propertyName==="max-height"&&(p.style.maxHeight="0px",p.removeEventListener("transitionend",y),l())};p.addEventListener("transitionend",y)};d.forEach(p=>{const m=p.closest('[data-ave-menu="item"]'),g=p.getAttribute("data-ave-submenu"),y=g?document.getElementById(g):null;if(!m||!y)return;const D=p.getAttribute("aria-expanded")==="true";m.classList.toggle("ave-sidebar__item--expanded",D),y.classList.toggle("ave-sidebar__submenu--open",D),y.style.maxHeight=D?"none":"0px",p.setAttribute("aria-expanded",String(D)),l(),p.addEventListener("click",w=>{w.preventDefault();const M=p.getAttribute("aria-expanded")!=="true";p.setAttribute("aria-expanded",String(M)),m.classList.toggle("ave-sidebar__item--expanded",M),h(y,M)})})}function Ra(){const e=document.querySelector(".ave-navbar__right .dropdown.profile"),t=e?.querySelector(".dropdown-toggle"),i=e?.querySelector(".dropdown-menu");if(!e||!t||!i)return;const r=()=>{e.classList.remove("open"),t.setAttribute("aria-expanded","false")};t.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();const n=e.classList.toggle("open");t.setAttribute("aria-expanded",String(n))}),document.addEventListener("click",a=>{e.contains(a.target)||r()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&r()})}function _r(e=document){e.querySelectorAll(".form-field-default").forEach(t=>{const i=t.querySelector("input");i&&(i.addEventListener("focus",()=>t.classList.add("focused")),i.addEventListener("blur",()=>t.classList.remove("focused")))})}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function At(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Vi(Object(i),!0).forEach(function(r){Ha(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vi(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function We(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?We=function(t){return typeof t}:We=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(e)}function Ha(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ot(){return Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ot.apply(this,arguments)}function Ya(e,t){if(e==null)return{};var i={},r=Object.keys(e),a,n;for(n=0;n<r.length;n++)a=r[n],!(t.indexOf(a)>=0)&&(i[a]=e[a]);return i}function Xa(e,t){if(e==null)return{};var i=Ya(e,t),r,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ba="1.15.6";function Mt(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var It=Mt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Le=Mt(/Edge/i),Ji=Mt(/firefox/i),ge=Mt(/safari/i)&&!Mt(/chrome/i)&&!Mt(/android/i),Ri=Mt(/iP(ad|od|hone)/i),Or=Mt(/chrome/i)&&Mt(/android/i),Ir={capture:!1,passive:!1};function B(e,t,i){e.addEventListener(t,i,!It&&Ir)}function Y(e,t,i){e.removeEventListener(t,i,!It&&Ir)}function Ke(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Nr(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function St(e,t,i,r){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&Ke(e,t):Ke(e,t))||r&&e===i)return e;if(e===i)break}while(e=Nr(e))}return null}var Zi=/\s+/g;function gt(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Zi," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(Zi," ")}}function O(e,t,i){var r=e&&e.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=i+(typeof i=="string"?"":"px")}}function ee(e,t){var i="";if(typeof e=="string")i=e;else do{var r=O(e,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function kr(e,t,i){if(e){var r=e.getElementsByTagName(t),a=0,n=r.length;if(i)for(;a<n;a++)i(r[a],a);return r}return[]}function Tt(){var e=document.scrollingElement;return e||document.documentElement}function rt(e,t,i,r,a){if(!(!e.getBoundingClientRect&&e!==window)){var n,o,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==Tt()?(n=e.getBoundingClientRect(),o=n.top,s=n.left,l=n.bottom,c=n.right,u=n.height,d=n.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||i)&&e!==window&&(a=a||e.parentNode,!It))do if(a&&a.getBoundingClientRect&&(O(a,"transform")!=="none"||i&&O(a,"position")!=="static")){var h=a.getBoundingClientRect();o-=h.top+parseInt(O(a,"border-top-width")),s-=h.left+parseInt(O(a,"border-left-width")),l=o+n.height,c=s+n.width;break}while(a=a.parentNode);if(r&&e!==window){var p=ee(a||e),m=p&&p.a,g=p&&p.d;p&&(o/=g,s/=m,d/=m,u/=g,l=o+u,c=s+d)}return{top:o,left:s,bottom:l,right:c,width:d,height:u}}}function Qi(e,t,i){for(var r=Ht(e,!0),a=rt(e)[t];r;){var n=rt(r)[i],o=void 0;if(o=a>=n,!o)return r;if(r===Tt())break;r=Ht(r,!1)}return!1}function ae(e,t,i,r){for(var a=0,n=0,o=e.children;n<o.length;){if(o[n].style.display!=="none"&&o[n]!==_.ghost&&(r||o[n]!==_.dragged)&&St(o[n],i.draggable,e,!1)){if(a===t)return o[n];a++}n++}return null}function Hi(e,t){for(var i=e.lastElementChild;i&&(i===_.ghost||O(i,"display")==="none"||t&&!Ke(i,t));)i=i.previousElementSibling;return i||null}function yt(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==_.clone&&(!t||Ke(e,t))&&i++;return i}function tr(e){var t=0,i=0,r=Tt();if(e)do{var a=ee(e),n=a.a,o=a.d;t+=e.scrollLeft*n,i+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,i]}function qa(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i)}return-1}function Ht(e,t){if(!e||!e.getBoundingClientRect)return Tt();var i=e,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=O(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Tt();if(r||t)return i;r=!0}}while(i=i.parentNode);return Tt()}function Wa(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function si(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ve;function Pr(e,t){return function(){if(!ve){var i=arguments,r=this;i.length===1?e.call(r,i[0]):e.apply(r,i),ve=setTimeout(function(){ve=void 0},t)}}}function $a(){clearTimeout(ve),ve=void 0}function Rr(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Hr(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function Yr(e,t,i){var r={};return Array.from(e.children).forEach(function(a){var n,o,s,l;if(!(!St(a,t.draggable,e,!1)||a.animated||a===i)){var c=rt(a);r.left=Math.min((n=r.left)!==null&&n!==void 0?n:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var mt="Sortable"+new Date().getTime();function za(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(O(a,"display")==="none"||a===_.ghost)){e.push({target:a,rect:rt(a)});var n=At({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=ee(a,!0);o&&(n.top-=o.f,n.left-=o.e)}a.fromRect=n}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(qa(e,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var n=!1,o=0;e.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=rt(c),h=c.prevFromRect,p=c.prevToRect,m=s.rect,g=ee(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&si(h,d)&&!si(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=ja(m,h,p,a.options)),si(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=a.options.animation),a.animate(c,m,d,l)),l&&(n=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),n?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,a,n,o){if(o){O(r,"transition",""),O(r,"transform","");var s=ee(this.el),l=s&&s.a,c=s&&s.d,u=(a.left-n.left)/(l||1),d=(a.top-n.top)/(c||1);r.animatingX=!!u,r.animatingY=!!d,O(r,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Fa(r),O(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),O(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){O(r,"transition",""),O(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Fa(e){return e.offsetWidth}function ja(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}var jt=[],li={initializeByDefault:!0},Me={mount:function(t){for(var i in li)li.hasOwnProperty(i)&&!(i in t)&&(t[i]=li[i]);jt.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),jt.push(t)},pluginEvent:function(t,i,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var n=t+"Global";jt.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][n]&&i[o.pluginName][n](At({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][t]&&i[o.pluginName][t](At({sortable:i},r)))})},initializePlugins:function(t,i,r,a){jt.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,i,t.options);c.sortable=t,c.options=t.options,t[l]=c,Ot(r,c.defaults)}});for(var n in t.options)if(t.options.hasOwnProperty(n)){var o=this.modifyOption(t,n,t.options[n]);typeof o<"u"&&(t.options[n]=o)}},getEventProperties:function(t,i){var r={};return jt.forEach(function(a){typeof a.eventProperties=="function"&&Ot(r,a.eventProperties.call(i[a.pluginName],t))}),r},modifyOption:function(t,i,r){var a;return jt.forEach(function(n){t[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[i]=="function"&&(a=n.optionListeners[i].call(t[n.pluginName],r))}),a}};function Ua(e){var t=e.sortable,i=e.rootEl,r=e.name,a=e.targetEl,n=e.cloneEl,o=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||i&&i[mt],!!t){var g,y=t.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!It&&!Le?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||i,g.from=s||i,g.item=a||i,g.clone=n,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=p?p.lastPutMode:void 0;var w=At(At({},m),Me.getEventProperties(r,t));for(var M in w)g[M]=w[M];i&&i.dispatchEvent(g),y[D]&&y[D].call(t,g)}}var Ka=["evt"],ut=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,n=Xa(r,Ka);Me.pluginEvent.bind(_)(t,i,At({dragEl:b,parentEl:tt,ghostEl:N,rootEl:G,nextEl:zt,lastDownEl:$e,cloneEl:Z,cloneHidden:Pt,dragStarted:he,putSortable:st,activeSortable:_.active,originalEvent:a,oldIndex:Zt,oldDraggableIndex:be,newIndex:vt,newDraggableIndex:kt,hideGhostForTarget:Wr,unhideGhostForTarget:$r,cloneNowHidden:function(){Pt=!0},cloneNowShown:function(){Pt=!1},dispatchSortableEvent:function(s){dt({sortable:i,name:s,originalEvent:a})}},n))};function dt(e){Ua(At({putSortable:st,cloneEl:Z,targetEl:b,rootEl:G,oldIndex:Zt,oldDraggableIndex:be,newIndex:vt,newDraggableIndex:kt},e))}var b,tt,N,G,zt,$e,Z,Pt,Zt,vt,be,kt,Re,st,Vt=!1,Ge=!1,Ve=[],Bt,wt,ci,di,er,ir,he,Ut,ye,we=!1,He=!1,ze,lt,ui=[],yi=!1,Je=[],ii=typeof document<"u",Ye=Ri,rr=Le||It?"cssFloat":"float",Ga=ii&&!Or&&!Ri&&"draggable"in document.createElement("div"),Xr=(function(){if(ii){if(It)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}})(),Br=function(t,i){var r=O(t),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),n=ae(t,0,i),o=ae(t,1,i),s=n&&O(n),l=o&&O(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+rt(n).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+rt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return n&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&r[rr]==="none"||o&&r[rr]==="none"&&c+u>a)?"vertical":"horizontal"},Va=function(t,i,r){var a=r?t.left:t.top,n=r?t.right:t.bottom,o=r?t.width:t.height,s=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return a===s||n===l||a+o/2===s+c/2},Ja=function(t,i){var r;return Ve.some(function(a){var n=a[mt].options.emptyInsertThreshold;if(!(!n||Hi(a))){var o=rt(a),s=t>=o.left-n&&t<=o.right+n,l=i>=o.top-n&&i<=o.bottom+n;if(s&&l)return r=a}}),r},qr=function(t){function i(n,o){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(n==null&&(o||d))return!0;if(n==null||n===!1)return!1;if(o&&n==="clone")return n;if(typeof n=="function")return i(n(s,l,c,u),o)(s,l,c,u);var h=(o?s:l).options.group.name;return n===!0||typeof n=="string"&&n===h||n.join&&n.indexOf(h)>-1}}var r={},a=t.group;(!a||We(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=i(a.pull,!0),r.checkPut=i(a.put),r.revertClone=a.revertClone,t.group=r},Wr=function(){!Xr&&N&&O(N,"display","none")},$r=function(){!Xr&&N&&O(N,"display","")};ii&&!Or&&document.addEventListener("click",function(e){if(Ge)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ge=!1,!1},!0);var qt=function(t){if(b){t=t.touches?t.touches[0]:t;var i=Ja(t.clientX,t.clientY);if(i){var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[mt]._onDragOver(r)}}},Za=function(t){b&&b.parentNode[mt]._isOutsideThisEl(t.target)};function _(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ot({},t),e[mt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Br(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&(!ge||Ri),emptyInsertThreshold:5};Me.initializePlugins(this,e,i);for(var r in i)!(r in t)&&(t[r]=i[r]);qr(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:Ga,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?B(e,"pointerdown",this._onTapStart):(B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Ve.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ot(this,za())}_.prototype={constructor:_,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ut=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,b):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,r=this.el,a=this.options,n=a.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=a.filter;if(sn(r),!b&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&ge&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=St(l,a.draggable,r,!1),!(l&&l.animated)&&$e!==l)){if(Zt=yt(l),be=yt(l,a.draggable),typeof u=="function"){if(u.call(this,t,l,this)){dt({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),ut("filter",i,{evt:t}),n&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=St(c,d.trim(),r,!1),d)return dt({sortable:i,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),ut("filter",i,{evt:t}),!0}),u)){n&&t.preventDefault();return}a.handle&&!St(c,a.handle,r,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,i,r){var a=this,n=a.el,o=a.options,s=n.ownerDocument,l;if(r&&!b&&r.parentNode===n){var c=rt(r);if(G=n,b=r,tt=b.parentNode,zt=b.nextSibling,$e=r,Re=o.group,_.dragged=b,Bt={target:b,clientX:(i||t).clientX,clientY:(i||t).clientY},er=Bt.clientX-c.left,ir=Bt.clientY-c.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,b.style["will-change"]="all",l=function(){if(ut("delayEnded",a,{evt:t}),_.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Ji&&a.nativeDraggable&&(b.draggable=!0),a._triggerDragStart(t,i),dt({sortable:a,name:"choose",originalEvent:t}),gt(b,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){kr(b,u.trim(),hi)}),B(s,"dragover",qt),B(s,"mousemove",qt),B(s,"touchmove",qt),o.supportPointer?(B(s,"pointerup",a._onDrop),!this.nativeDraggable&&B(s,"pointercancel",a._onDrop)):(B(s,"mouseup",a._onDrop),B(s,"touchend",a._onDrop),B(s,"touchcancel",a._onDrop)),Ji&&this.nativeDraggable&&(this.options.touchStartThreshold=4,b.draggable=!0),ut("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Le||It))){if(_.eventCanceled){this._onDrop();return}o.supportPointer?(B(s,"pointerup",a._disableDelayedDrag),B(s,"pointercancel",a._disableDelayedDrag)):(B(s,"mouseup",a._disableDelayedDrag),B(s,"touchend",a._disableDelayedDrag),B(s,"touchcancel",a._disableDelayedDrag)),B(s,"mousemove",a._delayedDragTouchMoveHandler),B(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&B(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){b&&hi(b),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Y(t,"mouseup",this._disableDelayedDrag),Y(t,"touchend",this._disableDelayedDrag),Y(t,"touchcancel",this._disableDelayedDrag),Y(t,"pointerup",this._disableDelayedDrag),Y(t,"pointercancel",this._disableDelayedDrag),Y(t,"mousemove",this._delayedDragTouchMoveHandler),Y(t,"touchmove",this._delayedDragTouchMoveHandler),Y(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):i?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(b,"dragend",this),B(G,"dragstart",this._onDragStart));try{document.selection?Fe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(Vt=!1,G&&b){ut("dragStarted",this,{evt:i}),this.nativeDraggable&&B(document,"dragover",Za);var r=this.options;!t&&gt(b,r.dragClass,!1),gt(b,r.ghostClass,!0),_.active=this,t&&this._appendGhost(),dt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(wt){this._lastX=wt.clientX,this._lastY=wt.clientY,Wr();for(var t=document.elementFromPoint(wt.clientX,wt.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(wt.clientX,wt.clientY),t!==i);)i=t;if(b.parentNode[mt]._isOutsideThisEl(t),i)do{if(i[mt]){var r=void 0;if(r=i[mt]._onDragOver({clientX:wt.clientX,clientY:wt.clientY,target:t,rootEl:i}),r&&!this.options.dragoverBubble)break}t=i}while(i=Nr(i));$r()}},_onTouchMove:function(t){if(Bt){var i=this.options,r=i.fallbackTolerance,a=i.fallbackOffset,n=t.touches?t.touches[0]:t,o=N&&ee(N,!0),s=N&&o&&o.a,l=N&&o&&o.d,c=Ye&&lt&&tr(lt),u=(n.clientX-Bt.clientX+a.x)/(s||1)+(c?c[0]-ui[0]:0)/(s||1),d=(n.clientY-Bt.clientY+a.y)/(l||1)+(c?c[1]-ui[1]:0)/(l||1);if(!_.active&&!Vt){if(r&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(N){o?(o.e+=u-(ci||0),o.f+=d-(di||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");O(N,"webkitTransform",h),O(N,"mozTransform",h),O(N,"msTransform",h),O(N,"transform",h),ci=u,di=d,wt=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!N){var t=this.options.fallbackOnBody?document.body:G,i=rt(b,!0,Ye,!0,t),r=this.options;if(Ye){for(lt=t;O(lt,"position")==="static"&&O(lt,"transform")==="none"&&lt!==document;)lt=lt.parentNode;lt!==document.body&&lt!==document.documentElement?(lt===document&&(lt=Tt()),i.top+=lt.scrollTop,i.left+=lt.scrollLeft):lt=Tt(),ui=tr(lt)}N=b.cloneNode(!0),gt(N,r.ghostClass,!1),gt(N,r.fallbackClass,!0),gt(N,r.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",i.top),O(N,"left",i.left),O(N,"width",i.width),O(N,"height",i.height),O(N,"opacity","0.8"),O(N,"position",Ye?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),_.ghost=N,t.appendChild(N),O(N,"transform-origin",er/parseInt(N.style.width)*100+"% "+ir/parseInt(N.style.height)*100+"%")}},_onDragStart:function(t,i){var r=this,a=t.dataTransfer,n=r.options;if(ut("dragStart",this,{evt:t}),_.eventCanceled){this._onDrop();return}ut("setupClone",this),_.eventCanceled||(Z=Hr(b),Z.removeAttribute("id"),Z.draggable=!1,Z.style["will-change"]="",this._hideClone(),gt(Z,this.options.chosenClass,!1),_.clone=Z),r.cloneId=Fe(function(){ut("clone",r),!_.eventCanceled&&(r.options.removeCloneOnHide||G.insertBefore(Z,b),r._hideClone(),dt({sortable:r,name:"clone"}))}),!i&&gt(b,n.dragClass,!0),i?(Ge=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Y(document,"mouseup",r._onDrop),Y(document,"touchend",r._onDrop),Y(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",n.setData&&n.setData.call(r,a,b)),B(document,"drop",r),O(b,"transform","translateZ(0)")),Vt=!0,r._dragStartId=Fe(r._dragStarted.bind(r,i,t)),B(document,"selectstart",r),he=!0,window.getSelection().removeAllRanges(),ge&&O(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,r=t.target,a,n,o,s=this.options,l=s.group,c=_.active,u=Re===l,d=s.sort,h=st||c,p,m=this,g=!1;if(yi)return;function y(x,T){ut(x,m,At({evt:t,isOwner:u,axis:p?"vertical":"horizontal",revert:o,dragRect:a,targetRect:n,canSort:d,fromSortable:h,target:r,completed:w,onMove:function(I,F){return Xe(G,i,b,a,I,rt(I),t,F)},changed:M},T))}function D(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function w(x){return y("dragOverCompleted",{insertion:x}),x&&(u?c._hideClone():c._showClone(m),m!==h&&(gt(b,st?st.options.ghostClass:c.options.ghostClass,!1),gt(b,s.ghostClass,!0)),st!==m&&m!==_.active?st=m:m===_.active&&st&&(st=null),h===m&&(m._ignoreWhileAnimating=r),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===b&&!b.animated||r===i&&!r.animated)&&(Ut=null),!s.dragoverBubble&&!t.rootEl&&r!==document&&(b.parentNode[mt]._isOutsideThisEl(t.target),!x&&qt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function M(){vt=yt(b),kt=yt(b,s.draggable),dt({sortable:m,name:"change",toEl:i,newIndex:vt,newDraggableIndex:kt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=St(r,s.draggable,i,!0),y("dragOver"),_.eventCanceled)return g;if(b.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||m._ignoreWhileAnimating===r)return w(!1);if(Ge=!1,c&&!s.disabled&&(u?d||(o=tt!==G):st===this||(this.lastPutMode=Re.checkPull(this,c,b,t))&&l.checkPut(this,c,b,t))){if(p=this._getDirection(t,r)==="vertical",a=rt(b),y("dragOverValid"),_.eventCanceled)return g;if(o)return tt=G,D(),this._hideClone(),y("revert"),_.eventCanceled||(zt?G.insertBefore(b,zt):G.appendChild(b)),w(!0);var q=Hi(i,s.draggable);if(!q||rn(t,p,this)&&!q.animated){if(q===b)return w(!1);if(q&&i===t.target&&(r=q),r&&(n=rt(r)),Xe(G,i,b,a,r,n,t,!!r)!==!1)return D(),q&&q.nextSibling?i.insertBefore(b,q.nextSibling):i.appendChild(b),tt=i,M(),w(!0)}else if(q&&en(t,p,this)){var W=ae(i,0,s,!0);if(W===b)return w(!1);if(r=W,n=rt(r),Xe(G,i,b,a,r,n,t,!1)!==!1)return D(),i.insertBefore(b,W),tt=i,M(),w(!0)}else if(r.parentNode===i){n=rt(r);var f=0,v,E=b.parentNode!==i,A=!Va(b.animated&&b.toRect||a,r.animated&&r.toRect||n,p),L=p?"top":"left",k=Qi(r,"top","top")||Qi(b,"top","top"),U=k?k.scrollTop:void 0;Ut!==r&&(v=n[L],we=!1,He=!A&&s.invertSwap||E),f=an(t,r,n,p,A?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,He,Ut===r);var K;if(f!==0){var z=yt(b);do z-=f,K=tt.children[z];while(K&&(O(K,"display")==="none"||K===N))}if(f===0||K===r)return w(!1);Ut=r,ye=f;var j=r.nextElementSibling,nt=!1;nt=f===1;var S=Xe(G,i,b,a,r,n,t,nt);if(S!==!1)return(S===1||S===-1)&&(nt=S===1),yi=!0,setTimeout(tn,30),D(),nt&&!j?i.appendChild(b):r.parentNode.insertBefore(b,nt?j:r),k&&Rr(k,0,U-k.scrollTop),tt=b.parentNode,v!==void 0&&!He&&(ze=Math.abs(v-rt(r)[L])),M(),w(!0)}if(i.contains(b))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Y(document,"mousemove",this._onTouchMove),Y(document,"touchmove",this._onTouchMove),Y(document,"pointermove",this._onTouchMove),Y(document,"dragover",qt),Y(document,"mousemove",qt),Y(document,"touchmove",qt)},_offUpEvents:function(){var t=this.el.ownerDocument;Y(t,"mouseup",this._onDrop),Y(t,"touchend",this._onDrop),Y(t,"pointerup",this._onDrop),Y(t,"pointercancel",this._onDrop),Y(t,"touchcancel",this._onDrop),Y(document,"selectstart",this)},_onDrop:function(t){var i=this.el,r=this.options;if(vt=yt(b),kt=yt(b,r.draggable),ut("drop",this,{evt:t}),tt=b&&b.parentNode,vt=yt(b),kt=yt(b,r.draggable),_.eventCanceled){this._nulling();return}Vt=!1,He=!1,we=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wi(this.cloneId),wi(this._dragStartId),this.nativeDraggable&&(Y(document,"drop",this),Y(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ge&&O(document.body,"user-select",""),O(b,"transform",""),t&&(he&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(G===tt||st&&st.lastPutMode!=="clone")&&Z&&Z.parentNode&&Z.parentNode.removeChild(Z),b&&(this.nativeDraggable&&Y(b,"dragend",this),hi(b),b.style["will-change"]="",he&&!Vt&&gt(b,st?st.options.ghostClass:this.options.ghostClass,!1),gt(b,this.options.chosenClass,!1),dt({sortable:this,name:"unchoose",toEl:tt,newIndex:null,newDraggableIndex:null,originalEvent:t}),G!==tt?(vt>=0&&(dt({rootEl:tt,name:"add",toEl:tt,fromEl:G,originalEvent:t}),dt({sortable:this,name:"remove",toEl:tt,originalEvent:t}),dt({rootEl:tt,name:"sort",toEl:tt,fromEl:G,originalEvent:t}),dt({sortable:this,name:"sort",toEl:tt,originalEvent:t})),st&&st.save()):vt!==Zt&&vt>=0&&(dt({sortable:this,name:"update",toEl:tt,originalEvent:t}),dt({sortable:this,name:"sort",toEl:tt,originalEvent:t})),_.active&&((vt==null||vt===-1)&&(vt=Zt,kt=be),dt({sortable:this,name:"end",toEl:tt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ut("nulling",this),G=b=tt=N=zt=Z=$e=Pt=Bt=wt=he=vt=kt=Zt=be=Ut=ye=st=Re=_.dragged=_.ghost=_.clone=_.active=null,Je.forEach(function(t){t.checked=!0}),Je.length=ci=di=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":b&&(this._onDragOver(t),Qa(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,r=this.el.children,a=0,n=r.length,o=this.options;a<n;a++)i=r[a],St(i,o.draggable,this.el,!1)&&t.push(i.getAttribute(o.dataIdAttr)||on(i));return t},sort:function(t,i){var r={},a=this.el;this.toArray().forEach(function(n,o){var s=a.children[o];St(s,this.options.draggable,a,!1)&&(r[n]=s)},this),i&&this.captureAnimationState(),t.forEach(function(n){r[n]&&(a.removeChild(r[n]),a.appendChild(r[n]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return St(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var r=this.options;if(i===void 0)return r[t];var a=Me.modifyOption(this,t,i);typeof a<"u"?r[t]=a:r[t]=i,t==="group"&&qr(r)},destroy:function(){ut("destroy",this);var t=this.el;t[mt]=null,Y(t,"mousedown",this._onTapStart),Y(t,"touchstart",this._onTapStart),Y(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(t,"dragover",this),Y(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ve.splice(Ve.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Pt){if(ut("hideClone",this),_.eventCanceled)return;O(Z,"display","none"),this.options.removeCloneOnHide&&Z.parentNode&&Z.parentNode.removeChild(Z),Pt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Pt){if(ut("showClone",this),_.eventCanceled)return;b.parentNode==G&&!this.options.group.revertClone?G.insertBefore(Z,b):zt?G.insertBefore(Z,zt):G.appendChild(Z),this.options.group.revertClone&&this.animate(b,Z),O(Z,"display",""),Pt=!1}}};function Qa(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Xe(e,t,i,r,a,n,o,s){var l,c=e[mt],u=c.options.onMove,d;return window.CustomEvent&&!It&&!Le?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=i,l.draggedRect=r,l.related=a||t,l.relatedRect=n||rt(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function hi(e){e.draggable=!1}function tn(){yi=!1}function en(e,t,i){var r=rt(ae(i.el,0,i.options,!0)),a=Yr(i.el,i.options,N),n=10;return t?e.clientX<a.left-n||e.clientY<r.top&&e.clientX<r.right:e.clientY<a.top-n||e.clientY<r.bottom&&e.clientX<r.left}function rn(e,t,i){var r=rt(Hi(i.el,i.options.draggable)),a=Yr(i.el,i.options,N),n=10;return t?e.clientX>a.right+n||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>a.bottom+n||e.clientX>r.right&&e.clientY>r.top}function an(e,t,i,r,a,n,o,s){var l=r?e.clientY:e.clientX,c=r?i.height:i.width,u=r?i.top:i.left,d=r?i.bottom:i.right,h=!1;if(!o){if(s&&ze<c*a){if(!we&&(ye===1?l>u+c*n/2:l<d-c*n/2)&&(we=!0),we)h=!0;else if(ye===1?l<u+ze:l>d-ze)return-ye}else if(l>u+c*(1-a)/2&&l<d-c*(1-a)/2)return nn(t)}return h=h||o,h&&(l<u+c*n/2||l>d-c*n/2)?l>u+c/2?1:-1:0}function nn(e){return yt(b)<yt(e)?1:-1}function on(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function sn(e){Je.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var r=t[i];r.checked&&Je.push(r)}}function Fe(e){return setTimeout(e,0)}function wi(e){return clearTimeout(e)}ii&&B(document,"touchmove",function(e){(_.active||Vt)&&e.cancelable&&e.preventDefault()});_.utils={on:B,off:Y,css:O,find:kr,is:function(t,i){return!!St(t,i,t,!1)},extend:Wa,throttle:Pr,closest:St,toggleClass:gt,clone:Hr,index:yt,nextTick:Fe,cancelNextTick:wi,detectDirection:Br,getChild:ae,expando:mt};_.get=function(e){return e[mt]};_.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(_.utils=At(At({},_.utils),r.utils)),Me.mount(r)})};_.create=function(e,t){return new _(e,t)};_.version=Ba;var et=[],fe,Ei,Si=!1,fi,pi,Ze,pe;function ln(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):r.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):(Y(document,"pointermove",this._handleFallbackAutoScroll),Y(document,"touchmove",this._handleFallbackAutoScroll),Y(document,"mousemove",this._handleFallbackAutoScroll)),ar(),je(),$a()},nulling:function(){Ze=Ei=fe=Si=pe=fi=pi=null,et.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var a=this,n=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,s=document.elementFromPoint(n,o);if(Ze=i,r||this.options.forceAutoScrollFallback||Le||It||ge){mi(i,this.options,s,r);var l=Ht(s,!0);Si&&(!pe||n!==fi||o!==pi)&&(pe&&ar(),pe=setInterval(function(){var c=Ht(document.elementFromPoint(n,o),!0);c!==l&&(l=c,je()),mi(i,a.options,c,r)},10),fi=n,pi=o)}else{if(!this.options.bubbleScroll||Ht(s,!0)===Tt()){je();return}mi(i,this.options,Ht(s,!1),!1)}}},Ot(e,{pluginName:"scroll",initializeByDefault:!0})}function je(){et.forEach(function(e){clearInterval(e.pid)}),et=[]}function ar(){clearInterval(pe)}var mi=Pr(function(e,t,i,r){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,l=Tt(),c=!1,u;Ei!==i&&(Ei=i,je(),fe=t.scroll,u=t.scrollFn,fe===!0&&(fe=Ht(i,!0)));var d=0,h=fe;do{var p=h,m=rt(p),g=m.top,y=m.bottom,D=m.left,w=m.right,M=m.width,q=m.height,W=void 0,f=void 0,v=p.scrollWidth,E=p.scrollHeight,A=O(p),L=p.scrollLeft,k=p.scrollTop;p===l?(W=M<v&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),f=q<E&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(W=M<v&&(A.overflowX==="auto"||A.overflowX==="scroll"),f=q<E&&(A.overflowY==="auto"||A.overflowY==="scroll"));var U=W&&(Math.abs(w-a)<=o&&L+M<v)-(Math.abs(D-a)<=o&&!!L),K=f&&(Math.abs(y-n)<=o&&k+q<E)-(Math.abs(g-n)<=o&&!!k);if(!et[d])for(var z=0;z<=d;z++)et[z]||(et[z]={});(et[d].vx!=U||et[d].vy!=K||et[d].el!==p)&&(et[d].el=p,et[d].vx=U,et[d].vy=K,clearInterval(et[d].pid),(U!=0||K!=0)&&(c=!0,et[d].pid=setInterval((function(){r&&this.layer===0&&_.active._onTouchMove(Ze);var j=et[this.layer].vy?et[this.layer].vy*s:0,nt=et[this.layer].vx?et[this.layer].vx*s:0;typeof u=="function"&&u.call(_.dragged.parentNode[mt],nt,j,e,Ze,et[this.layer].el)!=="continue"||Rr(et[this.layer].el,nt,j)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==l&&(h=Ht(h,!1)));Si=c}},30),zr=function(t){var i=t.originalEvent,r=t.putSortable,a=t.dragEl,n=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(i){var c=r||n;s();var u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function Yi(){}Yi.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=ae(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:zr};Ot(Yi,{pluginName:"revertOnSpill"});function Xi(){}Xi.prototype={onSpill:function(t){var i=t.dragEl,r=t.putSortable,a=r||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:zr};Ot(Xi,{pluginName:"removeOnSpill"});_.mount(new ln);_.mount(Xi,Yi);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function nr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function Fr(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?nr(Object(i),!0).forEach(function(r){hn(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nr(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function cn(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jr(e){var t=cn(e,"string");return typeof t=="symbol"?t:t+""}function xi(e){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jr(r.key),r)}}function un(e,t,i){return t&&or(e.prototype,t),i&&or(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function hn(e,t,i){return t=jr(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ur(e){return fn(e)||pn(e)||mn(e)||gn()}function fn(e){if(Array.isArray(e))return Di(e)}function pn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mn(e,t){if(e){if(typeof e=="string")return Di(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Di(e,t)}}function Di(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function gn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ri=typeof window<"u"&&typeof window.document<"u",Lt=ri?window:{},Bi=ri&&Lt.document.documentElement?"ontouchstart"in Lt.document.documentElement:!1,qi=ri?"PointerEvent"in Lt:!1,V="cropper",Wi="all",Kr="crop",Gr="move",Vr="zoom",Wt="e",$t="w",Kt="s",Nt="n",le="ne",ce="nw",de="se",ue="sw",Ti="".concat(V,"-crop"),sr="".concat(V,"-disabled"),ft="".concat(V,"-hidden"),lr="".concat(V,"-hide"),vn="".concat(V,"-invisible"),Qe="".concat(V,"-modal"),Ci="".concat(V,"-move"),xe="".concat(V,"Action"),Be="".concat(V,"Preview"),$i="crop",Jr="move",Zr="none",Ai="crop",Li="cropend",Mi="cropmove",_i="cropstart",cr="dblclick",bn=Bi?"touchstart":"mousedown",yn=Bi?"touchmove":"mousemove",wn=Bi?"touchend touchcancel":"mouseup",dr=qi?"pointerdown":bn,ur=qi?"pointermove":yn,hr=qi?"pointerup pointercancel":wn,fr="ready",pr="resize",mr="wheel",Oi="zoom",gr="image/jpeg",En=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Sn=/^data:/,xn=/^data:image\/jpeg;base64,/,Dn=/^img|canvas$/i,Qr=200,ta=100,vr={viewMode:0,dragMode:$i,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Qr,minContainerHeight:ta,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Tn='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Cn=Number.isNaN||Lt.isNaN;function X(e){return typeof e=="number"&&!Cn(e)}var br=function(t){return t>0&&t<1/0};function gi(e){return typeof e>"u"}function Ft(e){return xi(e)==="object"&&e!==null}var An=Object.prototype.hasOwnProperty;function Qt(e){if(!Ft(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&An.call(i,"isPrototypeOf")}catch{return!1}}function ht(e){return typeof e=="function"}var Ln=Array.prototype.slice;function ea(e){return Array.from?Array.from(e):Ln.call(e)}function at(e,t){return e&&ht(t)&&(Array.isArray(e)||X(e.length)?ea(e).forEach(function(i,r){t.call(e,i,r,e)}):Ft(e)&&Object.keys(e).forEach(function(i){t.call(e,e[i],i,e)})),e}var J=Object.assign||function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return Ft(t)&&r.length>0&&r.forEach(function(n){Ft(n)&&Object.keys(n).forEach(function(o){t[o]=n[o]})}),t},Mn=/\.\d*(?:0|9){12}\d*$/;function ie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mn.test(e)?Math.round(e*t)/t:e}var _n=/^width|height|left|top|marginLeft|marginTop$/;function Yt(e,t){var i=e.style;at(t,function(r,a){_n.test(a)&&X(r)&&(r="".concat(r,"px")),i[a]=r})}function On(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function ot(e,t){if(t){if(X(e.length)){at(e,function(r){ot(r,t)});return}if(e.classList){e.classList.add(t);return}var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function Ct(e,t){if(t){if(X(e.length)){at(e,function(i){Ct(i,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function te(e,t,i){if(t){if(X(e.length)){at(e,function(r){te(r,t,i)});return}i?ot(e,t):Ct(e,t)}}var In=/([a-z\d])([A-Z])/g;function zi(e){return e.replace(In,"$1-$2").toLowerCase()}function Ii(e,t){return Ft(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(zi(t)))}function De(e,t,i){Ft(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(zi(t)),i)}function Nn(e,t){if(Ft(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(zi(t)))}var ia=/\s\s*/,ra=(function(){var e=!1;if(ri){var t=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(n){t=n}});Lt.addEventListener("test",i,r),Lt.removeEventListener("test",i,r)}return e})();function Et(e,t,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;t.trim().split(ia).forEach(function(n){if(!ra){var o=e.listeners;o&&o[n]&&o[n][i]&&(a=o[n][i],delete o[n][i],Object.keys(o[n]).length===0&&delete o[n],Object.keys(o).length===0&&delete e.listeners)}e.removeEventListener(n,a,r)})}function bt(e,t,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;t.trim().split(ia).forEach(function(n){if(r.once&&!ra){var o=e.listeners,s=o===void 0?{}:o;a=function(){delete s[n][i],e.removeEventListener(n,a,r);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];i.apply(e,u)},s[n]||(s[n]={}),s[n][i]&&e.removeEventListener(n,s[n][i],r),s[n][i]=a,e.listeners=s}e.addEventListener(n,a,r)})}function re(e,t,i){var r;return ht(Event)&&ht(CustomEvent)?r=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(r)}function aa(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var vi=Lt.location,kn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function yr(e){var t=e.match(kn);return t!==null&&(t[1]!==vi.protocol||t[2]!==vi.hostname||t[3]!==vi.port)}function wr(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function Ee(e){var t=e.rotate,i=e.scaleX,r=e.scaleY,a=e.translateX,n=e.translateY,o=[];X(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),X(n)&&n!==0&&o.push("translateY(".concat(n,"px)")),X(t)&&t!==0&&o.push("rotate(".concat(t,"deg)")),X(i)&&i!==1&&o.push("scaleX(".concat(i,")")),X(r)&&r!==1&&o.push("scaleY(".concat(r,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Pn(e){var t=Fr({},e),i=0;return at(e,function(r,a){delete t[a],at(t,function(n){var o=Math.abs(r.startX-n.startX),s=Math.abs(r.startY-n.startY),l=Math.abs(r.endX-n.endX),c=Math.abs(r.endY-n.endY),u=Math.sqrt(o*o+s*s),d=Math.sqrt(l*l+c*c),h=(d-u)/u;Math.abs(h)>Math.abs(i)&&(i=h)})}),i}function qe(e,t){var i=e.pageX,r=e.pageY,a={endX:i,endY:r};return t?a:Fr({startX:i,startY:r},a)}function Rn(e){var t=0,i=0,r=0;return at(e,function(a){var n=a.startX,o=a.startY;t+=n,i+=o,r+=1}),t/=r,i/=r,{pageX:t,pageY:i}}function Xt(e){var t=e.aspectRatio,i=e.height,r=e.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=br(r),o=br(i);if(n&&o){var s=i*t;a==="contain"&&s>r||a==="cover"&&s<r?i=r/t:r=i*t}else n?i=r/t:o&&(r=i*t);return{width:r,height:i}}function Hn(e){var t=e.width,i=e.height,r=e.degree;if(r=Math.abs(r)%180,r===90)return{width:i,height:t};var a=r%90*Math.PI/180,n=Math.sin(a),o=Math.cos(a),s=t*o+i*n,l=t*n+i*o;return r>90?{width:l,height:s}:{width:s,height:l}}function Yn(e,t,i,r){var a=t.aspectRatio,n=t.naturalWidth,o=t.naturalHeight,s=t.rotate,l=s===void 0?0:s,c=t.scaleX,u=c===void 0?1:c,d=t.scaleY,h=d===void 0?1:d,p=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,y=r.fillColor,D=y===void 0?"transparent":y,w=r.imageSmoothingEnabled,M=w===void 0?!0:w,q=r.imageSmoothingQuality,W=q===void 0?"low":q,f=r.maxWidth,v=f===void 0?1/0:f,E=r.maxHeight,A=E===void 0?1/0:E,L=r.minWidth,k=L===void 0?0:L,U=r.minHeight,K=U===void 0?0:U,z=document.createElement("canvas"),j=z.getContext("2d"),nt=Xt({aspectRatio:p,width:v,height:A}),S=Xt({aspectRatio:p,width:k,height:K},"cover"),x=Math.min(nt.width,Math.max(S.width,m)),T=Math.min(nt.height,Math.max(S.height,g)),R=Xt({aspectRatio:a,width:v,height:A}),I=Xt({aspectRatio:a,width:k,height:K},"cover"),F=Math.min(R.width,Math.max(I.width,n)),C=Math.min(R.height,Math.max(I.height,o)),P=[-F/2,-C/2,F,C];return z.width=ie(x),z.height=ie(T),j.fillStyle=D,j.fillRect(0,0,x,T),j.save(),j.translate(x/2,T/2),j.rotate(l*Math.PI/180),j.scale(u,h),j.imageSmoothingEnabled=M,j.imageSmoothingQuality=W,j.drawImage.apply(j,[e].concat(Ur(P.map(function(H){return Math.floor(ie(H))})))),j.restore(),z}var na=String.fromCharCode;function Xn(e,t,i){var r="";i+=t;for(var a=t;a<i;a+=1)r+=na(e.getUint8(a));return r}var Bn=/^data:.*,/;function qn(e){var t=e.replace(Bn,""),i=atob(t),r=new ArrayBuffer(i.length),a=new Uint8Array(r);return at(a,function(n,o){a[o]=i.charCodeAt(o)}),r}function Wn(e,t){for(var i=[],r=8192,a=new Uint8Array(e);a.length>0;)i.push(na.apply(null,ea(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function $n(e){var t=new DataView(e),i;try{var r,a,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){a=s;break}s+=1}if(a){var l=a+4,c=a+10;if(Xn(t,l,4)==="Exif"){var u=t.getUint16(c);if(r=u===18761,(r||u===19789)&&t.getUint16(c+2,r)===42){var d=t.getUint32(c+4,r);d>=8&&(n=c+d)}}}if(n){var h=t.getUint16(n,r),p,m;for(m=0;m<h;m+=1)if(p=n+m*12+2,t.getUint16(p,r)===274){p+=8,i=t.getUint16(p,r),t.setUint16(p,1,r);break}}}catch{i=1}return i}function zn(e){var t=0,i=1,r=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:r}}var Fn={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,r=this.container,a=this.cropper,n=Number(i.minContainerWidth),o=Number(i.minContainerHeight);ot(a,ft),Ct(t,ft);var s={width:Math.max(r.offsetWidth,n>=0?n:Qr),height:Math.max(r.offsetHeight,o>=0?o:ta)};this.containerData=s,Yt(a,{width:s.width,height:s.height}),ot(t,ft),Ct(a,ft)},initCanvas:function(){var t=this.containerData,i=this.imageData,r=this.options.viewMode,a=Math.abs(i.rotate)%180===90,n=a?i.naturalHeight:i.naturalWidth,o=a?i.naturalWidth:i.naturalHeight,s=n/o,l=t.width,c=t.height;t.height*s>t.width?r===3?l=t.height*s:c=t.width/s:r===3?c=t.width/s:l=t.height*s;var u={aspectRatio:s,naturalWidth:n,naturalHeight:o,width:l,height:c};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(t.width-u.width)/2,u.top=(t.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=J({},u)},limitCanvas:function(t,i){var r=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,s=r.viewMode,l=n.aspectRatio,c=this.cropped&&o;if(t){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;s>1?(u=Math.max(u,a.width),d=Math.max(d,a.height),s===3&&(d*l>u?u=d*l:d=u/l)):s>0&&(u?u=Math.max(u,c?o.width:0):d?d=Math.max(d,c?o.height:0):c&&(u=o.width,d=o.height,d*l>u?u=d*l:d=u/l));var h=Xt({aspectRatio:l,width:u,height:d});u=h.width,d=h.height,n.minWidth=u,n.minHeight=d,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(s>(c?0:1)){var p=a.width-n.width,m=a.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,m),c&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,s===2&&(n.width>=a.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=a.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,i){var r=this.canvasData,a=this.imageData;if(i){var n=Hn({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,s=n.height,l=r.width*(o/r.naturalWidth),c=r.height*(s/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(c-r.height)/2,r.width=l,r.height=c,r.aspectRatio=o/s,r.naturalWidth=o,r.naturalHeight=s,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Yt(this.canvas,J({width:r.width,height:r.height},Ee({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,r=this.imageData,a=r.naturalWidth*(i.width/i.naturalWidth),n=r.naturalHeight*(i.height/i.naturalHeight);J(r,{width:a,height:n,left:(i.width-a)/2,top:(i.height-n)/2}),Yt(this.image,J({width:r.width,height:r.height},Ee(J({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:i.width,height:i.height};r&&(i.height*r>i.width?n.height=n.width/r:n.width=n.height*r),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=J({},n)},limitCropBox:function(t,i){var r=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,s=this.limited,l=r.aspectRatio;if(t){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=s?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,h=s?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;c=Math.min(c,a.width),u=Math.min(u,a.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),h*l>d?h=d/l:d=h*l),o.minWidth=Math.min(c,d),o.minHeight=Math.min(u,h),o.maxWidth=d,o.maxHeight=h}i&&(s?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var t=this.options,i=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&De(this.face,xe,r.width>=i.width&&r.height>=i.height?Gr:Wi),Yt(this.cropBox,J({width:r.width,height:r.height},Ee({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),re(this.element,Ai,this.getData())}},jn={initPreview:function(){var t=this.element,i=this.crossOrigin,r=this.options.preview,a=i?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(i&&(o.crossOrigin=i),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,!!r){var s=r;typeof r=="string"?s=t.ownerDocument.querySelectorAll(r):r.querySelector&&(s=[r]),this.previews=s,at(s,function(l){var c=document.createElement("img");De(l,Be,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),i&&(c.crossOrigin=i),c.src=a,c.alt=n,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){at(this.previews,function(t){var i=Ii(t,Be);Yt(t,{width:i.width,height:i.height}),t.innerHTML=i.html,Nn(t,Be)})},preview:function(){var t=this.imageData,i=this.canvasData,r=this.cropBoxData,a=r.width,n=r.height,o=t.width,s=t.height,l=r.left-i.left-t.left,c=r.top-i.top-t.top;!this.cropped||this.disabled||(Yt(this.viewBoxImage,J({width:o,height:s},Ee(J({translateX:-l,translateY:-c},t)))),at(this.previews,function(u){var d=Ii(u,Be),h=d.width,p=d.height,m=h,g=p,y=1;a&&(y=h/a,g=n*y),n&&g>p&&(y=p/n,m=a*y,g=p),Yt(u,{width:m,height:g}),Yt(u.getElementsByTagName("img")[0],J({width:o*y,height:s*y},Ee(J({translateX:-l*y,translateY:-c*y},t))))}))}},Un={bind:function(){var t=this.element,i=this.options,r=this.cropper;ht(i.cropstart)&&bt(t,_i,i.cropstart),ht(i.cropmove)&&bt(t,Mi,i.cropmove),ht(i.cropend)&&bt(t,Li,i.cropend),ht(i.crop)&&bt(t,Ai,i.crop),ht(i.zoom)&&bt(t,Oi,i.zoom),bt(r,dr,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&bt(r,mr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&bt(r,cr,this.onDblclick=this.dblclick.bind(this)),bt(t.ownerDocument,ur,this.onCropMove=this.cropMove.bind(this)),bt(t.ownerDocument,hr,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&bt(window,pr,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,r=this.cropper;ht(i.cropstart)&&Et(t,_i,i.cropstart),ht(i.cropmove)&&Et(t,Mi,i.cropmove),ht(i.cropend)&&Et(t,Li,i.cropend),ht(i.crop)&&Et(t,Ai,i.crop),ht(i.zoom)&&Et(t,Oi,i.zoom),Et(r,dr,this.onCropStart),i.zoomable&&i.zoomOnWheel&&Et(r,mr,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Et(r,cr,this.onDblclick),Et(t.ownerDocument,ur,this.onCropMove),Et(t.ownerDocument,hr,this.onCropEnd),i.responsive&&Et(window,pr,this.onResize)}},Kn={resize:function(){if(!this.disabled){var t=this.options,i=this.container,r=this.containerData,a=i.offsetWidth/r.width,n=i.offsetHeight/r.height,o=Math.abs(a-1)>Math.abs(n-1)?a:n;if(o!==1){var s,l;t.restore&&(s=this.getCanvasData(),l=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(at(s,function(c,u){s[u]=c*o})),this.setCropBoxData(at(l,function(c,u){l[u]=c*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Zr||this.setDragMode(On(this.dragBox,Ti)?Jr:$i)},wheel:function(t){var i=this,r=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*r,t)))},cropStart:function(t){var i=t.buttons,r=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(X(i)&&i!==1||X(r)&&r!==0||t.ctrlKey))){var a=this.options,n=this.pointers,o;t.changedTouches?at(t.changedTouches,function(s){n[s.identifier]=qe(s)}):n[t.pointerId||0]=qe(t),Object.keys(n).length>1&&a.zoomable&&a.zoomOnTouch?o=Vr:o=Ii(t.target,xe),En.test(o)&&re(this.element,_i,{originalEvent:t,action:o})!==!1&&(t.preventDefault(),this.action=o,this.cropping=!1,o===Kr&&(this.cropping=!0,ot(this.dragBox,Qe)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var r=this.pointers;t.preventDefault(),re(this.element,Mi,{originalEvent:t,action:i})!==!1&&(t.changedTouches?at(t.changedTouches,function(a){J(r[a.identifier]||{},qe(a,!0))}):J(r[t.pointerId||0]||{},qe(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,r=this.pointers;t.changedTouches?at(t.changedTouches,function(a){delete r[a.identifier]}):delete r[t.pointerId||0],i&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,te(this.dragBox,Qe,this.cropped&&this.options.modal)),re(this.element,Li,{originalEvent:t,action:i}))}}},Gn={change:function(t){var i=this.options,r=this.canvasData,a=this.containerData,n=this.cropBoxData,o=this.pointers,s=this.action,l=i.aspectRatio,c=n.left,u=n.top,d=n.width,h=n.height,p=c+d,m=u+h,g=0,y=0,D=a.width,w=a.height,M=!0,q;!l&&t.shiftKey&&(l=d&&h?d/h:1),this.limited&&(g=n.minLeft,y=n.minTop,D=g+Math.min(a.width,r.width,r.left+r.width),w=y+Math.min(a.height,r.height,r.top+r.height));var W=o[Object.keys(o)[0]],f={x:W.endX-W.startX,y:W.endY-W.startY},v=function(A){switch(A){case Wt:p+f.x>D&&(f.x=D-p);break;case $t:c+f.x<g&&(f.x=g-c);break;case Nt:u+f.y<y&&(f.y=y-u);break;case Kt:m+f.y>w&&(f.y=w-m);break}};switch(s){case Wi:c+=f.x,u+=f.y;break;case Wt:if(f.x>=0&&(p>=D||l&&(u<=y||m>=w))){M=!1;break}v(Wt),d+=f.x,d<0&&(s=$t,d=-d,c-=d),l&&(h=d/l,u+=(n.height-h)/2);break;case Nt:if(f.y<=0&&(u<=y||l&&(c<=g||p>=D))){M=!1;break}v(Nt),h-=f.y,u+=f.y,h<0&&(s=Kt,h=-h,u-=h),l&&(d=h*l,c+=(n.width-d)/2);break;case $t:if(f.x<=0&&(c<=g||l&&(u<=y||m>=w))){M=!1;break}v($t),d-=f.x,c+=f.x,d<0&&(s=Wt,d=-d,c-=d),l&&(h=d/l,u+=(n.height-h)/2);break;case Kt:if(f.y>=0&&(m>=w||l&&(c<=g||p>=D))){M=!1;break}v(Kt),h+=f.y,h<0&&(s=Nt,h=-h,u-=h),l&&(d=h*l,c+=(n.width-d)/2);break;case le:if(l){if(f.y<=0&&(u<=y||p>=D)){M=!1;break}v(Nt),h-=f.y,u+=f.y,d=h*l}else v(Nt),v(Wt),f.x>=0?p<D?d+=f.x:f.y<=0&&u<=y&&(M=!1):d+=f.x,f.y<=0?u>y&&(h-=f.y,u+=f.y):(h-=f.y,u+=f.y);d<0&&h<0?(s=ue,h=-h,d=-d,u-=h,c-=d):d<0?(s=ce,d=-d,c-=d):h<0&&(s=de,h=-h,u-=h);break;case ce:if(l){if(f.y<=0&&(u<=y||c<=g)){M=!1;break}v(Nt),h-=f.y,u+=f.y,d=h*l,c+=n.width-d}else v(Nt),v($t),f.x<=0?c>g?(d-=f.x,c+=f.x):f.y<=0&&u<=y&&(M=!1):(d-=f.x,c+=f.x),f.y<=0?u>y&&(h-=f.y,u+=f.y):(h-=f.y,u+=f.y);d<0&&h<0?(s=de,h=-h,d=-d,u-=h,c-=d):d<0?(s=le,d=-d,c-=d):h<0&&(s=ue,h=-h,u-=h);break;case ue:if(l){if(f.x<=0&&(c<=g||m>=w)){M=!1;break}v($t),d-=f.x,c+=f.x,h=d/l}else v(Kt),v($t),f.x<=0?c>g?(d-=f.x,c+=f.x):f.y>=0&&m>=w&&(M=!1):(d-=f.x,c+=f.x),f.y>=0?m<w&&(h+=f.y):h+=f.y;d<0&&h<0?(s=le,h=-h,d=-d,u-=h,c-=d):d<0?(s=de,d=-d,c-=d):h<0&&(s=ce,h=-h,u-=h);break;case de:if(l){if(f.x>=0&&(p>=D||m>=w)){M=!1;break}v(Wt),d+=f.x,h=d/l}else v(Kt),v(Wt),f.x>=0?p<D?d+=f.x:f.y>=0&&m>=w&&(M=!1):d+=f.x,f.y>=0?m<w&&(h+=f.y):h+=f.y;d<0&&h<0?(s=ce,h=-h,d=-d,u-=h,c-=d):d<0?(s=ue,d=-d,c-=d):h<0&&(s=le,h=-h,u-=h);break;case Gr:this.move(f.x,f.y),M=!1;break;case Vr:this.zoom(Pn(o),t),M=!1;break;case Kr:if(!f.x||!f.y){M=!1;break}q=aa(this.cropper),c=W.startX-q.left,u=W.startY-q.top,d=n.minWidth,h=n.minHeight,f.x>0?s=f.y>0?de:le:f.x<0&&(c-=d,s=f.y>0?ue:ce),f.y<0&&(u-=h),this.cropped||(Ct(this.cropBox,ft),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(n.width=d,n.height=h,n.left=c,n.top=u,this.action=s,this.renderCropBox()),at(o,function(E){E.startX=E.endX,E.startY=E.endY})}},Vn={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ot(this.dragBox,Qe),Ct(this.cropBox,ft),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=J({},this.initialImageData),this.canvasData=J({},this.initialCanvasData),this.cropBoxData=J({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(J(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ct(this.dragBox,Qe),ot(this.cropBox,ft)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,at(this.previews,function(r){r.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ct(this.cropper,sr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ot(this.cropper,sr)),this},destroy:function(){var t=this.element;return t[V]?(t[V]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,a=r.left,n=r.top;return this.moveTo(gi(t)?t:a+Number(t),gi(i)?i:n+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(X(t)&&(r.left=t,a=!0),X(i)&&(r.top=i,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,i){var r=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(r.width*t/r.naturalWidth,null,i)},zoomTo:function(t,i,r){var a=this.options,n=this.canvasData,o=n.width,s=n.height,l=n.naturalWidth,c=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&a.zoomable){var u=l*t,d=c*t;if(re(this.element,Oi,{ratio:t,oldRatio:o/l,originalEvent:r})===!1)return this;if(r){var h=this.pointers,p=aa(this.cropper),m=h&&Object.keys(h).length?Rn(h):{pageX:r.pageX,pageY:r.pageY};n.left-=(u-o)*((m.pageX-p.left-n.left)/o),n.top-=(d-s)*((m.pageY-p.top-n.top)/s)}else Qt(i)&&X(i.x)&&X(i.y)?(n.left-=(u-o)*((i.x-n.left)/o),n.top-=(d-s)*((i.y-n.top)/s)):(n.left-=(u-o)/2,n.top-=(d-s)/2);n.width=u,n.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),X(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,X(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(X(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.imageData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(X(t)&&(r.scaleX=t,a=!0),X(i)&&(r.scaleY=i,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,r=this.imageData,a=this.canvasData,n=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:n.left-a.left,y:n.top-a.top,width:n.width,height:n.height};var s=r.width/r.naturalWidth;if(at(o,function(u,d){o[d]=u/s}),t){var l=Math.round(o.y+o.height),c=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=c-o.x,o.height=l-o.y}}else o={x:0,y:0,width:0,height:0};return i.rotatable&&(o.rotate=r.rotate||0),i.scalable&&(o.scaleX=r.scaleX||1,o.scaleY=r.scaleY||1),o},setData:function(t){var i=this.options,r=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&Qt(t)){var o=!1;i.rotatable&&X(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,o=!0),i.scalable&&(X(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,o=!0),X(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=r.width/r.naturalWidth;X(t.x)&&(n.left=t.x*s+a.left),X(t.y)&&(n.top=t.y*s+a.top),X(t.width)&&(n.width=t.width*s),X(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?J({},this.containerData):{}},getImageData:function(){return this.sized?J({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&at(["left","top","width","height","naturalWidth","naturalHeight"],function(r){i[r]=t[r]}),i},setCanvasData:function(t){var i=this.canvasData,r=i.aspectRatio;return this.ready&&!this.disabled&&Qt(t)&&(X(t.left)&&(i.left=t.left),X(t.top)&&(i.top=t.top),X(t.width)?(i.width=t.width,i.height=t.width/r):X(t.height)&&(i.height=t.height,i.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,r=this.options.aspectRatio,a,n;return this.ready&&this.cropped&&!this.disabled&&Qt(t)&&(X(t.left)&&(i.left=t.left),X(t.top)&&(i.top=t.top),X(t.width)&&t.width!==i.width&&(a=!0,i.width=t.width),X(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),r&&(a?i.height=i.width/r:n&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,r=Yn(this.image,this.imageData,i,t);if(!this.cropped)return r;var a=this.getData(t.rounded),n=a.x,o=a.y,s=a.width,l=a.height,c=r.width/Math.floor(i.naturalWidth);c!==1&&(n*=c,o*=c,s*=c,l*=c);var u=s/l,d=Xt({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=Xt({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=Xt({aspectRatio:u,width:t.width||(c!==1?r.width:s),height:t.height||(c!==1?r.height:l)}),m=p.width,g=p.height;m=Math.min(d.width,Math.max(h.width,m)),g=Math.min(d.height,Math.max(h.height,g));var y=document.createElement("canvas"),D=y.getContext("2d");y.width=ie(m),y.height=ie(g),D.fillStyle=t.fillColor||"transparent",D.fillRect(0,0,m,g);var w=t.imageSmoothingEnabled,M=w===void 0?!0:w,q=t.imageSmoothingQuality;D.imageSmoothingEnabled=M,q&&(D.imageSmoothingQuality=q);var W=r.width,f=r.height,v=n,E=o,A,L,k,U,K,z;v<=-s||v>W?(v=0,A=0,k=0,K=0):v<=0?(k=-v,v=0,A=Math.min(W,s+v),K=A):v<=W&&(k=0,A=Math.min(s,W-v),K=A),A<=0||E<=-l||E>f?(E=0,L=0,U=0,z=0):E<=0?(U=-E,E=0,L=Math.min(f,l+E),z=L):E<=f&&(U=0,L=Math.min(l,f-E),z=L);var j=[v,E,A,L];if(K>0&&z>0){var nt=m/s;j.push(k*nt,U*nt,K*nt,z*nt)}return D.drawImage.apply(D,[r].concat(Ur(j.map(function(S){return Math.floor(ie(S))})))),y},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!gi(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,r=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===$i,o=i.movable&&t===Jr;t=n||o?t:Zr,i.dragMode=t,De(r,xe,t),te(r,Ti,n),te(r,Ci,o),i.cropBoxMovable||(De(a,xe,t),te(a,Ti,n),te(a,Ci,o))}return this}},Jn=Lt.Cropper,oa=(function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dn(this,e),!t||!Dn.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=J({},vr,Qt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return un(e,[{key:"init",value:function(){var i=this.element,r=i.tagName.toLowerCase(),a;if(!i[V]){if(i[V]=this,r==="img"){if(this.isImg=!0,a=i.getAttribute("src")||"",this.originalUrl=a,!a)return;a=i.src}else r==="canvas"&&window.HTMLCanvasElement&&(a=i.toDataURL());this.load(a)}}},{key:"load",value:function(i){var r=this;if(i){this.url=i,this.imageData={};var a=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Sn.test(i)){xn.test(i)?this.read(qn(i)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==gr&&o.abort()},o.onload=function(){r.read(o.response)},o.onloadend=function(){r.reloading=!1,r.xhr=null},n.checkCrossOrigin&&yr(i)&&a.crossOrigin&&(i=wr(i)),o.open("GET",i,!0),o.responseType="arraybuffer",o.withCredentials=a.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(i){var r=this.options,a=this.imageData,n=$n(i),o=0,s=1,l=1;if(n>1){this.url=Wn(i,gr);var c=zn(n);o=c.rotate,s=c.scaleX,l=c.scaleY}r.rotatable&&(a.rotate=o),r.scalable&&(a.scaleX=s,a.scaleY=l),this.clone()}},{key:"clone",value:function(){var i=this.element,r=this.url,a=i.crossOrigin,n=r;this.options.checkCrossOrigin&&yr(r)&&(a||(a="anonymous"),n=wr(r)),this.crossOrigin=a,this.crossOriginUrl=n;var o=document.createElement("img");a&&(o.crossOrigin=a),o.src=n||r,o.alt=i.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),ot(o,lr),i.parentNode.insertBefore(o,i.nextSibling)}},{key:"start",value:function(){var i=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var a=Lt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Lt.navigator.userAgent),n=function(c,u){J(i.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),i.initialImageData=J({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(r.naturalWidth&&!a){n(r.naturalWidth,r.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),a||s.removeChild(o)},o.src=r.src,a||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,r=this.options,a=this.image,n=i.parentNode,o=document.createElement("div");o.innerHTML=Tn;var s=o.querySelector(".".concat(V,"-container")),l=s.querySelector(".".concat(V,"-canvas")),c=s.querySelector(".".concat(V,"-drag-box")),u=s.querySelector(".".concat(V,"-crop-box")),d=u.querySelector(".".concat(V,"-face"));this.container=n,this.cropper=s,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=s.querySelector(".".concat(V,"-view-box")),this.face=d,l.appendChild(a),ot(i,ft),n.insertBefore(s,i.nextSibling),Ct(a,lr),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,ot(u,ft),r.guides||ot(u.getElementsByClassName("".concat(V,"-dashed")),ft),r.center||ot(u.getElementsByClassName("".concat(V,"-center")),ft),r.background&&ot(s,"".concat(V,"-bg")),r.highlight||ot(d,vn),r.cropBoxMovable&&(ot(d,Ci),De(d,xe,Wi)),r.cropBoxResizable||(ot(u.getElementsByClassName("".concat(V,"-line")),ft),ot(u.getElementsByClassName("".concat(V,"-point")),ft)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),ht(r.ready)&&bt(i,fr,r.ready,{once:!0}),re(i,fr)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),Ct(this.element,ft)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Jn,e}},{key:"setDefaults",value:function(i){J(vr,Qt(i)&&i)}}])})();J(oa.prototype,Fn,jn,Un,Kn,Gn,Vn);const sa=e=>{if(!e)return;e.classList.add("is-active"),e.setAttribute("aria-hidden","false"),e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},Se=e=>{e&&(e.classList.remove("is-active"),e.setAttribute("aria-hidden","true"))},ti=e=>{e&&(Se(e),setTimeout(()=>e.remove(),300))},Te=e=>{const{title:t="Modal",body:i="",bodyParams:r=null,type:a="default",variant:n="default",confirmText:o="OK",cancelText:s="Cancel",onConfirm:l=null,onCancel:c=null,size:u="default",autoClose:d=!0}=e,h=document.createElement("div");h.className="modal",h.setAttribute("data-ave-modal",""),h.setAttribute("data-modal-dynamic","true");const p=u==="small"?"modal-sm":u==="large"?"modal-lg":"",m=n!=="default"?`modal-${n}`:"";let g=i;if(r&&Array.isArray(r)&&r.length>0){const W=r.map(f=>`<span class="modal-param">"${f}"</span>`).join(", ");g=`<p class="modal-message">${i} ${W}</p>`}else i&&!i.startsWith("<")&&(g=`<p>${i}</p>`);h.innerHTML=`
        <div class="modal-background" data-ave-modal-close></div>
        <div class="modal-dialog ${p} ${m}">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">${t}</h4>
                    <button class="close" data-ave-modal-dismiss type="button">&times;</button>
                </div>
                <div class="modal-body">
                    ${g}
                </div>
                <div class="modal-footer">
                    ${a==="alert"?`
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="confirm"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:a==="form"?`
                        <button class="btn btn-default" data-modal-cancel type="button">${s}</button>
                        <button class="btn btn-modal-confirm" data-modal-confirm type="button">${o}</button>
                    `:""}
                </div>
            </div>
        </div>
    `;const y=h.querySelector("[data-modal-confirm]"),D=h.querySelector("[data-modal-cancel]"),w=h.querySelector("[data-ave-modal-dismiss]"),M=h.querySelector("[data-ave-modal-close]"),q=()=>{Se(h),setTimeout(()=>h.remove(),300)};return y&&y.addEventListener("click",()=>{l&&l(h),d&&q()}),D&&D.addEventListener("click",()=>{c&&c(),q()}),w&&w.addEventListener("click",q),M&&M.addEventListener("click",()=>{c&&c(),q()}),document.body.appendChild(h),requestAnimationFrame(()=>{sa(h),ne.emit("dom:updated",h)}),h},la=(e,t={})=>new Promise(i=>{Te({title:t.title||"Confirm",body:e,bodyParams:t.bodyParams||null,type:"confirm",variant:t.variant||"default",confirmText:t.confirmText||"Yes",cancelText:t.cancelText||"No",size:t.size||"small",onConfirm:()=>i(!0),onCancel:()=>i(!1)})}),Zn=(e,t={})=>{Te({title:t.title||"Alert",body:e,bodyParams:t.bodyParams||null,type:"alert",variant:t.variant||"default",confirmText:t.confirmText||"OK",size:t.size||"small"})};function Qn(){document.querySelectorAll("[data-ave-modal-trigger]").forEach(e=>{const t=e.getAttribute("data-ave-modal-trigger"),i=t?document.querySelector(t):null;i&&e.addEventListener("click",r=>{r.preventDefault(),sa(i)})}),document.querySelectorAll("[data-ave-modal]").forEach(e=>{e.addEventListener("click",t=>{t.target.hasAttribute("data-ave-modal-close")&&Se(e)}),e.querySelectorAll("[data-ave-modal-dismiss]").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault(),Se(e)})})}),document.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=document.querySelector("[data-ave-modal].is-active");t&&Se(t)}})}let me=null;const $=(e="success",t="",i=4e3)=>{if(!me&&(me=document.getElementById("toast-container"),!me)){console.error('Toast container not found. Add <div id="toast-container"></div> to your layout.');return}const r={success:"Action completed successfully.",danger:"Something went wrong. Please try again.",warning:"Please review your action.",info:"Here is some information."},a={success:"Success",danger:"Error",warning:"Warning",info:"Info"},n=document.createElement("div");n.className=`toast toast-${e}`;const s=(t||r[e]||r.info).split(`
`).map(c=>`<p>${c}</p>`).join("");n.innerHTML=`
        <div class="toast-title">${a[e]||a.info}</div>
        <div class="toast-message">${s}</div>
    `,me.appendChild(n),requestAnimationFrame(()=>{n.classList.add("show")});const l=e==="danger"?Math.max(i,6e3):i;window.setTimeout(()=>{n.classList.remove("show"),window.setTimeout(()=>n.remove(),200)},l)};function to(){me=document.getElementById("toast-container");const e=document.getElementById("ave-toast-data");if(e)try{const t=JSON.parse(e.textContent);t.type&&t.message&&$(t.type,t.message)}catch(t){console.error("Failed to parse toast data:",t)}document.querySelectorAll("[data-ave-toast-trigger]").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault();const r=t.getAttribute("data-ave-toast-trigger")||"success",a=t.getAttribute("data-ave-toast-message")||"";$(r,a)})})}function eo(e,t=1){const i=["B","KB","MB","GB","TB"];if(e<=0)return"0B";const r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,r)).toFixed(t)+i[r]}const ca=new Map,Er=(e="")=>e?e.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"";function io(){ca.forEach(e=>{e.uploadedIdsInput&&(e.uploadedIdsInput.value=e.uploadedIds.join(",")),e.deletedIdsInput&&(e.deletedIdsInput.value=e.deletedIds.join(",")),Ni(e)})}function Ni(e){const{fieldValueInput:t,container:i,collection:r,uploadedIds:a}=e;if(!t||!i)return;const n=i.querySelector("[data-media-grid]"),s=(n?n.querySelectorAll(".media-item"):[]).length>0||(a??[]).length>0;t.value=s?r:""}function da(e=document){e.querySelectorAll(".media-field-container").forEach(t=>{if(t.dataset.initialized==="true")return;t.dataset.initialized="true";const i=t.dataset.multiple==="true",r=parseInt(t.dataset.maxFiles)||null,a=parseInt(t.dataset.maxSize)||null;t.dataset.accept;const n=t.dataset.uploadUrl,o=t.dataset.modelType||"",s=t.dataset.modelId||"",l=t.closest("[data-field-name]")?.dataset.fieldName||"media";let c=Er(t.dataset.metaKey||l);t.dataset.metaKey=c;const u=JSON.parse(t.dataset.propNames||"[]"),d=t.dataset.collection||"default";console.debug("Init media field container",{rawFieldName:t.closest("[data-field-name]")?.getAttribute("data-field-name")||null,datasetFieldName:l,metaKey:c,collection:d});const h=t.querySelector("[data-media-dropzone]"),p=t.querySelector(".media-file-input"),m=t.querySelector("[data-media-grid]"),g=t.querySelector("[data-uploaded-ids]"),y=t.querySelector("[data-deleted-ids]"),D=t.querySelector("[data-media-value]"),w=[],M=[],q=c||l;ca.set(q,{uploadedIds:w,deletedIds:M,uploadedIdsInput:g,deletedIdsInput:y,fieldValueInput:D,fieldName:l,metaKey:c,collection:d,container:t}),Ni({fieldValueInput:D,container:t,collection:d,uploadedIds:w}),h?.addEventListener("click",S=>{S.target.closest(".media-item")||p?.click()}),p?.addEventListener("change",S=>{W(S.target.files)}),h?.addEventListener("dragover",S=>{S.preventDefault(),h.classList.add("dragover")}),h?.addEventListener("dragleave",()=>{h.classList.remove("dragover")}),h?.addEventListener("drop",S=>{S.preventDefault(),h.classList.remove("dragover"),W(S.dataTransfer.files)}),m?.addEventListener("click",S=>{const x=S.target.closest("[data-action]");if(!x)return;const T=x.closest(".media-item"),R=T?.dataset.mediaId;x.dataset.action==="delete"?(S.stopPropagation(),A(T,R)):x.dataset.action==="edit"?(S.stopPropagation(),U(T,R)):x.dataset.action==="crop"&&(S.stopPropagation(),L(T,R))}),i&&m&&_.create(m,{animation:400,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)",handle:".media-drag-handle",onEnd:()=>{j(),nt()}});function W(S){const x=Array.from(S);if(i){if(r&&m.querySelectorAll(".media-item").length+x.length>r){$("warning",`Maximum ${r} files allowed`);return}}else{if(x.length>1){$("warning","You can only upload 1 file");return}m.querySelectorAll(".media-item").forEach(R=>{const I=R.dataset.mediaId;I?E(I,R):R.remove()})}for(const T of x){if(a&&T.size>a*1024){$("warning",`File "${T.name}" is too large. Maximum size: ${(a/1024).toFixed(1)} MB`);continue}f(T)}p&&(p.value="")}function f(S){const x=new FormData;x.append("files[]",S),x.append("collection",d),o&&x.append("model_type",o),s&&x.append("model_id",s),a&&x.append("max_size",a);const T=h?.querySelector(".upload-progress"),R=T?.querySelector(".progress-fill"),I=T?.querySelector(".progress-text"),F=h?.querySelector(".upload-prompt");F&&(F.style.display="none"),T&&(T.style.display="block",T.classList.add("active"));const C=document.querySelector('meta[name="csrf-token"]')?.content,P=new XMLHttpRequest;P.upload.addEventListener("progress",H=>{if(H.lengthComputable&&R&&I){const ct=H.loaded/H.total*100;R.style.width=ct+"%",I.textContent=`Uploading... ${Math.round(ct)}%`}}),P.addEventListener("load",()=>{if(P.status===200)try{const H=JSON.parse(P.responseText);H.success&&H.media?(H.media.forEach(ct=>{v(ct),w.push(ct.id)}),z(),$("success","File uploaded successfully.")):$("danger","Upload failed: "+(H.message||"Unknown error"))}catch{$("danger","Upload failed: Invalid server response")}else $("danger","Upload failed: "+P.statusText);T&&(T.classList.remove("active"),T.style.display="none"),F&&(F.style.display="flex"),R&&(R.style.width="0%")}),P.addEventListener("error",()=>{$("danger","Upload failed. Please try again."),T&&(T.classList.remove("active"),T.style.display="none"),F&&(F.style.display="flex")}),P.open("POST",n,!0),C&&P.setRequestHeader("X-CSRF-TOKEN",C),P.send(x)}function v(S){const x=document.getElementById("media-item-template-"+l);if(!x){console.error("Media item template not found:","media-item-template-"+l);return}const T=x.content.cloneNode(!0).querySelector(".media-item");if(T.dataset.mediaId=S.id,S.mime_type&&S.mime_type.startsWith("image/")){const C=T.querySelector(".media-image");C.src=S.url||S.preview_url,C.alt=S.file_name,C.style.display="block"}else{const C=T.querySelector(".media-file-icon"),P=C.querySelector(".media-file-name");P.textContent=S.file_name,C.style.display="flex"}const I=T.querySelector('input[type="hidden"]');I.value=S.id;const F=T.querySelector(".media-item-footer");if(F){const C=F.querySelector(".media-filename");C&&(C.textContent=S.file_name);const P=F.querySelector(".media-size");P&&S.size&&(P.textContent=eo(S.size),S.size>1048576&&P.classList.add("media-large-file"));const H=F.querySelector(".media-title i");H&&S.title&&(H.textContent=S.title)}m?.appendChild(T),ne.emit("dom:updated",T),j()}function E(S,x){if(!S){x?.remove(),j();return}const T=n.replace("/upload",`/${S}`),R=document.querySelector('meta[name="csrf-token"]')?.content;fetch(T,{method:"DELETE",headers:{"X-CSRF-TOKEN":R,Accept:"application/json","Content-Type":"application/json"}}).then(I=>I.json()).then(I=>{I.success?(x?.remove(),j()):console.error("Failed to delete file:",I.message)}).catch(I=>{console.error("Delete error:",I)})}async function A(S,x){const T=S?.querySelector(".media-filename")?.textContent||"this file";if(!await la("You are going to remove:",{title:"Delete File",variant:"error",bodyParams:[T],confirmText:"Delete",cancelText:"Cancel"}))return;if(!x){S?.remove(),j(),z(),$("success","File removed successfully.");return}const I=n.replace("/upload",`/${x}`),F=document.querySelector('meta[name="csrf-token"]')?.content;fetch(I,{method:"DELETE",headers:{"X-CSRF-TOKEN":F,Accept:"application/json","Content-Type":"application/json"}}).then(C=>C.json()).then(C=>{if(C.success){S?.remove(),j();const P=parseInt(x,10),H=w.indexOf(P);H!==-1&&w.splice(H,1),M.includes(P)||M.push(P),z(),$("success","File deleted successfully.")}else $("danger","Failed to delete file: "+(C.message||"Unknown error"))}).catch(C=>{console.error("Delete error:",C),$("danger","Failed to delete file. Please try again.")})}function L(S,x){const T=S?.querySelector(".media-filename")?.textContent||"Media",R=S?.querySelector("img");if(!R){$("danger","Could not load image for cropping");return}const I=R.src,F=`
                <div class="cropper-modal-content">
                    <div class="cropper-image-container">
                        <img id="cropper-image-${x}" src="${I}" alt="Crop image" class="cropper-image">
                    </div>
                    <div class="cropper-options">
                        <div class="option-group">
                            <label>Aspect Ratio:</label>
                            <select id="cropper-ratio-${x}" class="form-control">
                                <option value="">Free</option>
                                <option value="16/9">16:9</option>
                                <option value="4/3">4:3</option>
                                <option value="1/1">1:1</option>
                                <option value="3/2">3:2</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label>Max Width (px):</label>
                            <input type="number" id="cropper-max-width-${x}" class="form-control" placeholder="No limit" min="1">
                        </div>
                        <div class="option-group">
                            <label>Max Height (px):</label>
                            <input type="number" id="cropper-max-height-${x}" class="form-control" placeholder="No limit" min="1">
                        </div>
                    </div>
                </div>
            `,C=Te({title:`Crop: ${T}`,body:F,type:"form",confirmText:"Crop",cancelText:"Cancel",size:"large",autoClose:!1,onConfirm:P=>{k(P,x,S)}});setTimeout(()=>{const P=document.getElementById(`cropper-image-${x}`),H=document.getElementById(`cropper-ratio-${x}`);if(!P){console.error("Cropper image element not found");return}const ct=new oa(P,{aspectRatio:NaN,viewMode:1,autoCropArea:1,responsive:!0,guides:!0,grid:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0});C.cropper=ct,H?.addEventListener("change",_e=>{const se=_e.target.value;if(se==="")ct.setAspectRatio(NaN);else{const[Oe,ai]=se.split("/").map(Number);ct.setAspectRatio(Oe/ai)}})},100)}function k(S,x,T){const R=S.cropper;if(!R){$("danger","Cropper not initialized");return}R.getCanvasData();const I=R.getData(!0);if(I.width<=0||I.height<=0){$("danger","Invalid crop area");return}const F=Math.round(I.x),C=Math.round(I.y),P=Math.round(I.width),H=Math.round(I.height),ct=document.getElementById(`cropper-max-width-${x}`),_e=document.getElementById(`cropper-max-height-${x}`),se=ct?.value?parseInt(ct.value,10):null,Oe=_e?.value?parseInt(_e.value,10):null,ai=document.querySelector('meta[name="csrf-token"]')?.content,ya=n.replace("/upload",""),ni={x:F,y:C,width:P,height:H};se&&(ni.maxWidth=se),Oe&&(ni.maxHeight=Oe),fetch(`${ya}/${x}/crop`,{method:"POST",headers:{"X-CSRF-TOKEN":ai,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(ni)}).then(xt=>xt.ok?xt.json():xt.json().then(Ie=>{throw new Error(Ie.message||`HTTP ${xt.status}`)})).then(xt=>{if(xt.success){const Ie=T.querySelector("img");if(Ie){const wa=new Date().getTime();Ie.src=xt.media.url+"?t="+wa}$("success","Image cropped successfully"),ti(S)}else throw new Error(xt.message||"Crop failed")}).catch(xt=>{$("danger","Failed to crop image: "+xt.message)})}function U(S,x){const T=S?.querySelector(".media-filename")?.textContent||"Media",R=S.querySelector(`input[data-media-props="true"][data-props-id="${x}"]`),I=R?JSON.parse(R.value||"{}"):{},F=u.map(C=>{const P=C.charAt(0).toUpperCase()+C.slice(1).replace(/_/g," "),H=`media-prop-${C}`;return`
                    <div class="form-field">
                        <label for="${H}">${P}</label>
                        <input type="text" id="${H}" name="${C}" class="form-control" value="${I[C]||""}" placeholder="Enter ${P.toLowerCase()}">
                    </div>
                `}).join("");Te({title:`Edit: ${T}`,body:F,type:"form",confirmText:"Save",cancelText:"Cancel",size:"default",autoClose:!1,onConfirm:C=>{K(C,x,S)}})}function K(S,x,T){const R=document.querySelector('meta[name="csrf-token"]')?.content,I={};S.querySelectorAll("input[name], textarea[name]").forEach(C=>{const P=C.getAttribute("name");P&&(I[P]=C.value||"")});const F=n.replace("/upload","");fetch(`${F}/${x}/props`,{method:"POST",headers:{"X-CSRF-TOKEN":R,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(I)}).then(C=>C.ok?C.json():C.json().then(P=>{throw new Error(P.message||`HTTP ${C.status}`)})).then(C=>{if(C.success){if(C.media?.props?.title){const ct=T.querySelector(".media-title i");ct&&(ct.textContent=C.media.props.title)}const P=t.dataset.metaKey||c||Er(l);let H=T.querySelector(`input[data-media-props="true"][data-props-id="${x}"]`);H?(H.name=`__media_props[${P}][${x}]`,H.setAttribute("data-media-props","true"),H.setAttribute("data-props-id",x)):(H=document.createElement("input"),H.type="hidden",H.name=`__media_props[${P}][${x}]`,H.setAttribute("data-media-props","true"),H.setAttribute("data-props-id",x),T.appendChild(H)),H.value=JSON.stringify(C.media.props),$("success",C.message||"Properties saved successfully"),ti(S)}else throw new Error(C.message||"Save failed")}).catch(C=>{$("danger","Failed to save: "+C.message)})}function z(){g&&(g.value=w.join(","),console.debug("Media uploaded IDs updated",{fieldName:l,metaKey:c,uploadedIds:[...w],inputName:g.name})),y&&(y.value=M.join(",")),Ni({fieldValueInput:D,container:t,collection:d,uploadedIds:w})}function j(){m?.querySelectorAll(".media-item")?.forEach((x,T)=>{const R=x.querySelector(".media-order");R&&(R.textContent=T+1)})}function nt(){const S=m.querySelectorAll(".media-item"),x=[];if(S.forEach((I,F)=>{const C=I.dataset.mediaId;C&&x.push({id:parseInt(C),order:F})}),x.length===0)return;const T=document.querySelector('meta[name="csrf-token"]')?.content,R=n.replace("/upload","/reorder");fetch(R,{method:"POST",headers:{"X-CSRF-TOKEN":T,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({media:x,collection:d})}).then(I=>I.json()).then(I=>{I.success?$("success","Files reordered successfully."):(console.error("Order update failed:",I.message),$("danger","Failed to reorder files."))}).catch(I=>{console.error("Order update error:",I),$("danger","Failed to reorder files.")})}})}const ro="modulepreload",ao=function(e,t){return new URL(e,t).href},Sr={},no=function(t,i,r){let a=Promise.resolve();if(i&&i.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");a=c(i.map(u=>{if(u=ao(u,r),u in Sr)return;Sr[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(r)for(let m=o.length-1;m>=0;m--){const g=o[m];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":ro,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&n(s.reason);return t().catch(n)})};function ua(e=document){e.querySelectorAll("[data-ave-chips]").forEach(t=>{const i=t.querySelector("input");t.addEventListener("click",()=>{i?.focus()}),t.addEventListener("keydown",r=>{if(!i||r.key!=="Enter")return;const a=i.value.trim();if(!a)return;r.preventDefault();const n=document.createElement("span");n.className="chip",n.innerHTML=`${a} <span class="chip-remove" data-ave-chip-remove>&times;</span>`,t.insertBefore(n,i),i.value=""}),t.addEventListener("click",r=>{const a=r.target.closest("[data-ave-chip-remove]");if(!a)return;r.preventDefault(),a.closest(".chip")?.remove()})})}let ki=[],xr=!1;const ei=e=>{ki.forEach(t=>{t!==e&&t.classList.remove("is-open")})},oo=(e,t,i,r,a)=>{const n=()=>{const o=a.filter(c=>c.querySelector("input")?.checked);if(!o.length){i.textContent=r,i.classList.add("select-dropdown__placeholder");return}const s=o.map(c=>c.getAttribute("data-label")||c.textContent.trim()),l=s.length>3?`${s.length} options selected`:s.join(", ");i.textContent=l,i.classList.remove("select-dropdown__placeholder")};a.forEach(o=>{const s=o.querySelector('input[type="checkbox"]');s&&(o.classList.toggle("is-selected",s.checked),s.addEventListener("change",()=>{o.classList.toggle("is-selected",s.checked),n()}),o.addEventListener("click",l=>{l.target!==s&&(s.checked=!s.checked,s.dispatchEvent(new Event("change",{bubbles:!0})))}))}),n(),t.addEventListener("click",o=>{o.preventDefault();const s=!e.classList.contains("is-open");ei(e),e.classList.toggle("is-open",s)})},so=(e,t,i,r,a)=>{const n=()=>{const o=a.find(s=>s.querySelector("input")?.checked);o?(i.textContent=o.getAttribute("data-label")||o.textContent.trim(),i.classList.remove("select-dropdown__placeholder")):(i.textContent=r,i.classList.add("select-dropdown__placeholder")),a.forEach(s=>{const l=s.querySelector("input");s.classList.toggle("is-selected",!!l?.checked)})};a.forEach(o=>{const s=o.querySelector('input[type="radio"]');if(!s)return;o.classList.toggle("is-selected",s.checked);const l=()=>{s.checked&&(n(),e.classList.remove("is-open"))};s.addEventListener("change",l),o.addEventListener("click",c=>{c.target!==s&&(s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})))})}),n(),t.addEventListener("click",o=>{o.preventDefault();const s=!e.classList.contains("is-open");ei(e),e.classList.toggle("is-open",s)})},lo=(e,t)=>{const i=e.querySelector("[data-ave-select-dropdown-search]");i&&i.addEventListener("input",()=>{const r=i.value.trim().toLowerCase();t.forEach(a=>{const o=(a.getAttribute("data-label")||a.textContent||"").toLowerCase().includes(r);a.classList.toggle("is-hidden",!!r&&!o)})})};function ha(e=document){const t=Array.from(e.querySelectorAll("[data-ave-select-dropdown]"));t.length&&(t.forEach(i=>{ki.includes(i)||ki.push(i)}),t.forEach(i=>{const r=i.querySelector("[data-ave-select-toggle]"),a=i.querySelector("[data-ave-select-label]"),n=i.querySelector("[data-ave-select-menu]");if(!r||!a||!n)return;const o=r.getAttribute("data-placeholder")||a.textContent.trim();a.classList.add("select-dropdown__placeholder");const s=Array.from(n.querySelectorAll("[data-ave-select-option]")),l=i.getAttribute("data-ave-select-dropdown")||"single";l==="multi"?oo(i,r,a,o,s):so(i,r,a,o,s),l==="search"&&lo(i,s)}),xr||(document.addEventListener("click",i=>{i.target.closest("[data-ave-select-dropdown]")||ei()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&ei()}),xr=!0))}const co=e=>e.replace(/^\/+|\/+$/g,""),uo=()=>{const t=document.head.querySelector('meta[name="ave-route-prefix"]')?.getAttribute("content")??"admin";return co(t)},ho=()=>document.head.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",fo=()=>{const e=uo();return e===""?"/ave/api/tools/slug":`/${e}/ave/api/tools/slug`};async function po(e,t={}){const i=(e??"").toString().trim();if(i==="")return"";const r={source:i,separator:t.separator??"-"};t.language&&(r.language=t.language);const a=await fetch(fo(),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":ho()},credentials:"same-origin",body:JSON.stringify(r)});if(!a.ok)throw new Error("Unable to fetch slug");const n=await a.json();if(!n||typeof n.slug!="string")throw new Error("Invalid slug payload");return n.slug}const Dr={:"a",:"b",:"v",:"g",:"d",:"e",:"e",:"zh",:"z",:"i",:"y",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"f",:"h",:"ts",:"ch",:"sh",:"sch",:"",:"y",:"",:"e",:"yu",:"ya"},Tr=e=>e.toString().toLowerCase().split("").map(t=>{if(Object.prototype.hasOwnProperty.call(Dr,t))return Dr[t];const i=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return i!==t?i:t}).join("").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),mo=e=>e.replace(/(["\\\[\]])/g,"\\"),go=(e,t)=>t?e.querySelector('[name="'+mo(t)+'"]'):null,vo=e=>{if(e.dataset.aveSlugInit==="1")return;const t=e.dataset.aveSlugSource;if(!t)return;const i=e.closest("form")||document,r=go(i,t);if(!r)return;const a=()=>{e.dataset.aveSlugAuto=e.value.trim()===""?"1":"0"},n={};e.dataset.aveSlugSeparator&&(n.separator=e.dataset.aveSlugSeparator),e.dataset.aveSlugLanguage&&(n.language=e.dataset.aveSlugLanguage);const o=async()=>{if(e.dataset.aveSlugAuto!=="1")return;const s=(r.value||"").trim();if(s==="")return;let l="";try{l=await po(s,n)}catch{l=Tr(s)}l||(l=Tr(s)),l&&(e.value=l,e.dispatchEvent(new Event("input",{bubbles:!0})),a())};e.addEventListener("input",a),e.addEventListener("focus",()=>{e.value.trim()===""&&(e.dataset.aveSlugAuto="1"),o()}),a(),e.dataset.aveSlugInit="1"};function fa(e=document){const t=e.querySelectorAll("[data-ave-slug-source]");t.length&&t.forEach(vo)}function pa(e=document){e.querySelectorAll("[data-password-toggle]").forEach(i=>{i.addEventListener("click",function(){const a=this.closest(".password-input-wrapper").querySelector("[data-password-input]"),n=this.querySelector(".icon-eye"),o=this.querySelector(".icon-eye-off");a.type==="password"?(a.type="text",n.style.display="none",o.style.display="block"):(a.type="password",n.style.display="block",o.style.display="none")})})}function ma(e=document){e.querySelectorAll("[data-ave-option-cards]").forEach(t=>{const i=t.querySelectorAll(".option-card"),r=()=>{i.forEach(a=>{const n=a.querySelector("input");a.classList.toggle("selected",!!n?.checked)})};i.forEach(a=>{const n=a.querySelector("input");n&&(n.addEventListener("change",()=>{if(n.type==="radio"){i.forEach(o=>{const s=o.querySelector("input");o.classList.toggle("selected",s===n)});return}a.classList.toggle("selected",n.checked)}),a.addEventListener("click",o=>{o.target!==n&&(n.type==="radio"?(n.checked=!0,n.dispatchEvent(new Event("change",{bubbles:!0}))):(n.checked=!n.checked,n.dispatchEvent(new Event("change",{bubbles:!0}))))}))}),r()})}let bi=null;async function bo(){return bi||(bi=no(()=>import("./editors.js"),[],import.meta.url)),bi}function ga(e){_r(e),ua(e),ma(e),ha(e),pa(e),fa(e),da(e)}async function va(e){let t=null;try{t=await bo()}catch(a){console.error("Failed to load editors bundle",a);return}const{initCodeEditor:i,initRichEditor:r}=t;typeof i=="function"&&i(e),typeof r=="function"&&r(e)}function yo(){ne.on("dom:updated",e=>{ga(e),va(e)})}function wo(e=document){e.querySelectorAll("[data-fieldset]").forEach(t=>{const i=t.dataset.fieldName,r=t.querySelector("[data-fieldset-items]"),a=document.getElementById(`fieldset-template-${i}`),n=t.querySelector('[data-action="add"]'),o=t.dataset.sortable==="true",s=t.dataset.collapsible==="true",l=parseInt(t.dataset.minItems)||0,c=parseInt(t.dataset.maxItems)||null;if(!a){console.error(`FieldSet template not found: fieldset-template-${i}`);return}const u=(f="")=>f?f.replace(/\]/g,"").replace(/\[/g,".").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"").toLowerCase():"";let d=null;const h=()=>Array.from(r.querySelectorAll("[data-field-id]")).map(f=>parseInt(f.value,10)).filter(Number.isInteger),p=()=>{const f=new Set(h());let v=0;for(;f.has(v);)v++;return v},m=(f,v)=>f.replace(/__INDEX__/g,v).replace(/__index__/g,v).replace(/__ITEM__/g,v).replace(/__item__/g,v),g=(f,v,E)=>{[f,...f.querySelectorAll("*")].forEach(L=>{Array.from(L.attributes||[]).forEach(k=>{const U=m(k.value,E);U!==k.value&&L.setAttribute(k.name,U)}),Object.entries(L.dataset||{}).forEach(([k,U])=>{const K=m(U,E);K!==U&&(L.dataset[k]=K)})}),f.dataset.itemIndex=v,f.dataset.itemId=E,f.querySelectorAll('[data-meta-key*=".__ITEM__."]').forEach(L=>{const k=L.dataset.metaKey,U=m(k,E),K=u(U);if(L.dataset.metaKey=K,L.dataset.collection&&L.dataset.collection.includes("__ITEM__")){const z=m(L.dataset.collection,E);L.dataset.collection=z}L.querySelectorAll('input[data-uploaded-ids], input[data-deleted-ids], input[data-media-props="true"]').forEach(z=>{z.name&&z.name.includes(k)&&(z.name=z.name.replace(k,K))}),delete L.dataset.initialized})};o&&(d=_.create(r,{animation:400,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)",handle:".fieldset-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",disabled:!0,onEnd:()=>{M()}})),n&&n.addEventListener("click",()=>{const f=r.querySelectorAll(".fieldset-item").length;if(c&&f>=c){alert(`Maximum ${c} items allowed`);return}const v=a.content.cloneNode(!0);r.appendChild(v);const E=r.lastElementChild;if(!E){console.error("Failed to add fieldset item");return}const A=p();g(E,f,A);const L=E.querySelector("[data-field-id]");L&&(L.value=A),E.querySelectorAll(".media-field-container").forEach(k=>{k.dataset.initialized="false"}),ga(E),va(E),ne.emit("dom:updated",E),M(),W(E)}),r.addEventListener("click",async f=>{const v=f.target.closest('[data-action="delete"]');if(!v)return;const E=v.closest(".fieldset-item");if(!E)return;const A=r.querySelectorAll(".fieldset-item").length;if(l>0&&A<=l){Zn(`Minimum ${l} items required`,{title:"Deletion Blocked",variant:"warning",confirmText:"OK"});return}await la("Are you sure you want to delete this item?",{title:"Delete Item",variant:"error",confirmText:"Delete",cancelText:"Cancel"})&&(E.remove(),M())}),s&&r.addEventListener("click",f=>{const v=f.target.closest('[data-action="collapse"]');if(!v)return;const E=v.closest(".fieldset-item");if(!E)return;const A=E.querySelector(".fieldset-item-fields");if(!A)return;E.classList.contains("collapsed")?(E.classList.remove("collapsed"),A.style.maxHeight=A.scrollHeight+"px",setTimeout(()=>{A.style.maxHeight=""},300)):(A.style.maxHeight=A.scrollHeight+"px",A.offsetHeight,A.style.maxHeight="0",E.classList.add("collapsed"))});const y=t.querySelector('[data-action="collapse-all"]');y&&y.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(v=>{if(!v.classList.contains("collapsed")){const E=v.querySelector(".fieldset-item-fields");E&&(E.style.maxHeight=E.scrollHeight+"px",E.offsetHeight,E.style.maxHeight="0",v.classList.add("collapsed"))}})});const D=t.querySelector('[data-action="expand-all"]');D&&D.addEventListener("click",()=>{r.querySelectorAll(".fieldset-item").forEach(v=>{if(v.classList.contains("collapsed")){const E=v.querySelector(".fieldset-item-fields");E&&(v.classList.remove("collapsed"),E.style.maxHeight=E.scrollHeight+"px",setTimeout(()=>{E.style.maxHeight=""},300))}})});const w=t.querySelector('[data-action="toggle-sort"]');if(w&&d){const f=v=>{[y,D].forEach(E=>{E&&(E.disabled=!v,E.classList.toggle("is-disabled",!v))})};f(!w.checked),w.addEventListener("change",v=>{v.target.checked?(t.classList.add("sort-mode"),d.option("disabled",!1),f(!1),r.querySelectorAll(".fieldset-item").forEach(L=>{const k=L.querySelector(".fieldset-item-fields");k&&(k.style.maxHeight="0",L.classList.add("collapsed"))})):(t.classList.remove("sort-mode"),d.option("disabled",!0),f(!0),r.querySelectorAll(".fieldset-item").forEach(L=>{const k=L.querySelector(".fieldset-item-fields");k&&(L.classList.remove("collapsed"),k.style.maxHeight="")}))})}function M(){r.querySelectorAll(".fieldset-item").forEach((v,E)=>{v.dataset.itemIndex=E;const A=v.querySelector(".fieldset-item-number");A&&(A.textContent=E+1)})}M(),q(),r.addEventListener("input",f=>{const v=f.target.closest(".fieldset-item");v&&W(v)}),r.addEventListener("mediaChanged",f=>{const v=f.target.closest(".fieldset-item");v&&W(v)});function q(){r.querySelectorAll(".fieldset-item").forEach(v=>W(v))}function W(f){const v=f.querySelector(".fieldset-item-header");if(!v)return;const E=v.dataset.headTitleField,A=v.dataset.headPreviewField;if(E){const L=v.querySelector("[data-item-title]"),k=f.querySelector(`[name$="[${E}]"]`);L&&k&&(L.textContent=k.value||"")}if(A){const L=v.querySelector("[data-item-preview]"),k=f.querySelector(`[data-field-name*="${A}"]`);if(L&&k){const U=k.querySelector(".media-preview img");U?(L.style.backgroundImage=`url(${U.src})`,L.style.display="block"):(L.style.backgroundImage="",L.style.display="none")}}}})}function Eo(e=document){_r(e),ua(e),ma(e),ha(e),pa(e),fa(e),da(e),wo(e),e.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",i=>{io()})})}function So(){document.querySelectorAll('[data-ave-tabs="nav"]').forEach(t=>{const i=t.closest("[data-ave-tabs-root]"),r=i?Array.from(i.querySelectorAll("[data-ave-tab-pane]")):[],a=Array.from(t.querySelectorAll("[data-ave-tab-target]"));a.length===0||r.length===0||(xo(a,r),a.forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const s=n.getAttribute("data-ave-tab-target");if(!s)return;const l=r.find(c=>c.matches(s));l&&ba(a,r,n,l)})}))})}function ba(e,t,i,r){e.forEach(a=>{a.classList.toggle("active",a===i);const n=a.querySelector("a");n&&n.setAttribute("aria-selected",String(a===i))}),t.forEach(a=>{a.classList.toggle("active",a===r)})}function xo(e,t){const i=document.querySelector(".form-field.has-error");if(!i)return;const r=t.find(o=>o.contains(i));if(!r)return;const a=r.getAttribute("id"),n=e.find(o=>o.getAttribute("data-ave-tab-target")===`#${a}`);n&&ba(e,t,n,r)}function Do(){document.querySelectorAll(".alert-dismissible .close").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.closest(".alert");i&&i.remove()})})}function To(){document.querySelectorAll("[data-ave-accordion-toggle]").forEach(e=>{const t=e.getAttribute("data-ave-accordion-toggle");if(!t)return;const i=t.startsWith("#")?t:`#${t}`,r=document.querySelector(i);r&&e.addEventListener("click",a=>{a.preventDefault();const o=!(e.getAttribute("aria-expanded")==="true");e.setAttribute("aria-expanded",String(o)),r.classList.toggle("show",o)})})}const Co=e=>{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select();let i=!1;try{i=document.execCommand("copy")}catch{i=!1}return document.body.removeChild(t),i};function Ao(){document.querySelectorAll("[data-ave-copy]").forEach(e=>{e.addEventListener("click",async t=>{t.preventDefault();const i=e.getAttribute("data-ave-copy");if(!i)return;const r=document.querySelector(i);if(!r)return;const a=r.value??r.textContent??"";try{await navigator.clipboard.writeText(a),$("success","Copied to clipboard.")}catch{Co(a)?$("success","Copied to clipboard."):$("danger","Copy failed. Please try again.")}})})}function Lo(){to(),So(),Do(),Qn(),To(),Ao()}function Mo(){if(!document.body.classList.contains("ave-login"))return;const e=document.forms[0],t=e?.querySelector('button[type="submit"]'),i=e?.querySelector('[name="email"]'),r=e?.querySelector('[name="password"]');if(!e||!t||!i||!r)return;t.addEventListener("click",n=>{if(e.checkValidity()){const o=t.querySelector(".signingin"),s=t.querySelector(".signin");o&&s&&(o.classList.remove("hidden"),s.classList.add("hidden"))}else n.preventDefault()}),i.focus();const a=document.getElementById("emailGroup");a&&a.classList.add("focused")}function Pi(){const e=document.getElementById("bulk-actions-toolbar");if(!e)return;const t=document.getElementById("select-all"),i=document.querySelectorAll(".row-selector"),r=document.getElementById("selected-count"),a=e.querySelectorAll(".bulk-action-btn");function n(){const o=Array.from(i).filter(s=>s.checked).length;r.textContent=o,o>0?(e.classList.add("is-visible"),a.forEach(s=>{s.disabled=!1})):(e.classList.remove("is-visible"),t.checked=!1)}t&&t.addEventListener("change",o=>{i.forEach(s=>{s.checked=o.target.checked}),n()}),i.forEach(o=>{o.addEventListener("change",()=>{const s=Array.from(i).every(c=>c.checked),l=Array.from(i).some(c=>c.checked);t&&(t.checked=s,t.indeterminate=l&&!s),n()})}),a.forEach(o=>{o.addEventListener("click",async s=>{s.preventDefault();const l=Array.from(i).filter(h=>h.checked).map(h=>h.value);if(l.length===0){$("warning","Please select at least one record");return}o.dataset.handler;const c=o.textContent.trim(),u=o.dataset.variant||"primary";o.disabled=!0,o.textContent=c+"...";const d=Te({title:`${c} ${l.length} Record(s)?`,body:`Are you sure you want to ${c.toLowerCase()} ${l.length} selected record(s)?`,type:"confirm",variant:u,confirmText:c,cancelText:"Cancel",size:"small",autoClose:!1,onConfirm:async()=>{try{await Promise.all(l.map(h=>fetch(`${window.location.pathname.replace(/\/$/,"")}/${h}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||"",Accept:"application/json"}}))),ti(d),setTimeout(()=>{$("success",`Successfully ${c.toLowerCase()} ${l.length} record(s)`),window.location.reload()},300)}catch(h){ti(d),$("danger","Error executing action: "+h.message),o.disabled=!1,o.textContent=c}},onCancel:()=>{o.disabled=!1,o.textContent=c}})})}),n()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Pi):Pi();window.Ave=window.Ave||{};window.Ave.events=ne;document.addEventListener("DOMContentLoaded",()=>{yo(),Pa(),Ra(),Lo(),Eo(),Mo(),Pi(),ne.emit("dom:updated",document)});window.addEventListener("load",()=>{const e=document.getElementById("ave-loader");e&&setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300)},200)});
